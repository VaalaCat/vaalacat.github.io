<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Vaala Cat]]></title><description><![CDATA[Vaala Cat | é²¸å–µ]]></description><link>https://vaala.cat</link><image><url>https://vaala.cat/images/blog/avatar.png</url><title>Vaala Cat</title><link>https://vaala.cat</link></image><generator>Vaala Cat</generator><lastBuildDate>Sat, 28 Dec 2024 06:08:24 GMT</lastBuildDate><atom:link href="https://vaala.cat/atom.xml" rel="self" type="application/rss+xml"/><language><![CDATA[zh-CN]]></language><item><title><![CDATA[ä¸€ç‚¹è”ææ´¾ rv nano ä¸Šæ‰‹è®°å½•]]></title><description><![CDATA[<blockquote>
<p>è”ææ´¾ LicheeRV nano ä½¿ç”¨è®°å½•</p>
</blockquote>
<h2 id="-">ä¸€ç‚¹èƒŒæ™¯</h2>
<p>æœ€è¿‘ä¸€ç›´åœ¨æƒ³åšä¸€ä¸ª24å°æ—¶å½•éŸ³è®¾å¤‡ï¼Œè”ç½‘åéŸ³é¢‘è¯†åˆ«å­˜å‚¨æ–‡å­—ï¼ŒAIæé—®+æ€»ç»“çš„å°ç©å…·ã€‚æ‰€ä»¥è¦è´­ç½®ä¸€äº›åˆ¶ä½œ demo çš„è®¾å¤‡ã€‚ä¸Šæ·˜å®çœ‹äº†å‰äº›æ—¥å­å¾ˆç«çš„Milk-V duoï¼Œå‘ç°æ²¡æœ‰Wifiï¼Œå¾ˆéš¾å—ã€‚ä¸‡èƒ½çš„æ·˜å®ä»¿ä½›çŸ¥é“æˆ‘çš„å¿ƒå£°ï¼Œä»¥åˆ‡åˆ°ä¸»é¡µå°±æ³¨æ„åˆ°ä¸€å—è¿‘ä¹å®Œç¾çš„å¼€å‘æ¿ Lichee Pi RV nanoã€‚ä¸‰æ ¸å¿ƒï¼Œä¸¤é¢—å¤§æ ¸åˆ†åˆ«æ˜¯ 1GHz RISC-V C906 å’Œ ARM A53ï¼Œä½†åªèƒ½äºŒé€‰ä¸€å¯åŠ¨ï¼Œå¾ˆç¥å¥‡çš„å¼‚æ„è®¾è®¡ï¼Œå°æ ¸å¿ƒæ˜¯ä¸€é¢—é¢‘ç‡ç•¥ä½çš„ C906ï¼Œå¦‚æœç”¨ ARM å¤§æ ¸ + RISCV å°æ ¸ï¼Œä¸RKçš„RV1106ä¹Ÿéå¸¸ç±»ä¼¼ï¼Œçœ‹æ¥å„å®¶éƒ½æƒ³åšè¿™ç§èŠ¯ç‰‡ã€‚æ¥å£ä¹Ÿæ˜¯éå¸¸ä¸°å¯Œï¼ŒI2C/SPI/USB/GPIO/UART/CSI/DSI åº”æœ‰å°½æœ‰ï¼Œç”šè‡³æ¿è½½äº†ä¸€é¢—éº¦å…‹é£ï¼Œè¿™ç®€ç›´æ˜¯ä¸ºæˆ‘çš„åœºæ™¯é‡èº«å®šåšã€‚</p>
<p>è¿™æ¬¾å¼€å‘æ¿æœ‰å‡ ç§è§„æ ¼ï¼ŒåŒºåˆ«åœ¨äºæ˜¯å¦åŒ…å«RJ45ç½‘å£/WIFI&amp;BTã€‚è¿™é‡Œæˆ‘è´­ä¹°çš„æ˜¯WiFiï¼Œä¸å«RJ45ç‰ˆã€‚</p>
<h2 id="-">å‡ å¼ ç…§ç‰‡</h2>
<div className="gird gird-cols-1 sm:grid-cols-2">
  <img src="/images/lichee/licheerv-nano-debian-boot.jpg" />
  <img src="/images/lichee/licheerv-nano-debian-info.jpg" />
</div>

<h2 id="-">ä¸‹ç‚¹é•œåƒ</h2>
<p>åˆ°æ‰‹æˆ‘ä»¬å…ˆç”¨åŸç‰ˆé•œåƒå¯åŠ¨ã€‚</p>

<ul>
<li>åœ¨ Githubä¸‹è½½é•œåƒï¼š<a href="https://github.com/sipeed/LicheeRV-Nano-Build">https://github.com/sipeed/LicheeRV-Nano-Build</a></li>
</ul>
<p>åœ¨Macä¸Šï¼Œæˆ‘é€‰æ‹©ä½¿ç”¨BalenaEtcherçƒ§å½•é•œåƒ
Linuxå¯é€‰ddï¼ŒWindowså¯é€‰rufuså’ŒBalenaEtcherçƒ§å½•å³å¯</p>
<h2 id="-mac">è¿ä¸‹Mac</h2>
<p>è”ææ´¾RV nano è®¾è®¡ä½¿ç”¨RNDISè¿›è¡Œé€šä¿¡å¼€å‘ï¼Œä¸å¹¸çš„æ˜¯MacOSæ²¡æœ‰å®˜æ–¹å†…ç½®é©±åŠ¨ã€‚éœ€è¦å®‰è£…æŸä½å¼€æºå¤§å–„äººçš„é©±åŠ¨ï¼š</p>

<ul>
<li><a href="https://github.com/jwise/HoRNDIS/files/7323710/HoRNDIS-M1.zip">https://github.com/jwise/HoRNDIS/files/7323710/HoRNDIS-M1.zip</a>    </li>
</ul>
<p>AppleSilicon éœ€è¦å¹²æ‰ kext ä¿æŠ¤åæ‰èƒ½ä½¿ç”¨ã€‚
é¦–å…ˆå…³æœºï¼Œç„¶åé•¿æŒ‰å¼€æœºé”®è¿›å…¥æ¢å¤æ¨¡å¼åæ‰“å¼€ç»ˆç«¯</p>

<pre><code>csrutil disable
(è¯·è¾“å…¥ä½ çš„å¯†ç )
csrutil enable --without kext
(è¯·è¾“å…¥ä½ çš„å¯†ç )
</code></pre>
<p>å®Œæˆåå…³é—­ç»ˆç«¯ï¼Œè¿›å…¥å®ç”¨å·¥å…·å¯ç”¨å†…æ ¸æ‰©å±•å®½æ¾é™åˆ¶</p>
<p>éšåé‡å¯ååœ¨ç³»ç»Ÿè®¾ç½®ä¸­â€œéšç§ä¸å®‰å…¨â€æ‰“å¼€ç³»ç»Ÿæ‹“å±•ï¼Œå†æ¬¡é‡å¯å³å¯åœ¨ç³»ç»Ÿè®¾ç½®çš„ç½‘ç»œä¸­çœ‹åˆ°ä½ çš„è”ææ´¾äº†</p>
<h2 id="-sdk-buildroot">ç¼–è¯‘ç‚¹å®˜æ–¹SDK buildroot</h2>
<p>å®˜æ–¹æä¾›çš„é•œåƒå¯è°“æ˜¯éå¸¸å¹²å‡€ï¼Œæ²¡æœ‰åŒ…ç®¡ç†å™¨ï¼Œè®©æˆ‘å¾ˆéš¾åšäººï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¸®å®˜æ–¹é€‚é…ä¸€ä¸‹ Debian å’Œ Arch Linux</p>
<p>ä¸ºäº†ç¯å¢ƒçš„ä¸€è‡´æ€§ï¼Œæœ€å¥½æœ‰ä¸€ä¸ªçº¯å‡€çš„ Linux ç³»ç»Ÿã€‚è¿™é‡Œæˆ‘åœ¨åƒåœ¾ç®±ä¸­ç¿»å‡ºæ¥ä¸€åª SteamDeckï¼Œåœ¨é‡Œé¢è£…äº†ä¸€åª Debian è™šæ‹Ÿæœºä½œä¸ºæ“ä½œç¯å¢ƒã€‚</p>
<p>å› ä¸ºå®˜æ–¹çš„é•œåƒå®åœ¨æ˜¯è¿‡äºå¹²å‡€ï¼Œç›´æ¥æ›¿æ¢ rootfs å®Œå…¨æ— æ³•æ”¯æŒ Debian æˆ– Arch å¯åŠ¨é¦–å…ˆéœ€è¦æŒ‰ä»¥ä¸‹å†…å®¹ä¿®æ”¹SDKå¯¹åº”æ–‡ä»¶ï¼Œä¸»è¦æ˜¯ä¸€äº›systemdçš„ä¾èµ–</p>

<pre><code class="lang-diff">--- a/build/boards/sg200x/sg2002_licheervnano_sd/linux/sg2002_licheervnano_sd_defconfig
+++ b/build/boards/sg200x/sg2002_licheervnano_sd/linux/sg2002_licheervnano_sd_defconfig
@@ -578,3 +578,23 @@ CONFIG_SPI_SPIDEV=y
 CONFIG_EPOLL=y
 CONFIG_IO_URING=y
 CONFIG_SIGNALFD=y
+
+# for systemd
+CONFIG_CGROUPS=y
+CONFIG_CGROUP_FREEZER=y
+CONFIG_CGROUP_PIDS=y
+CONFIG_CGROUP_DEVICE=y
+CONFIG_CPUSETS=y
+CONFIG_PROC_PID_CPUSET=y
+CONFIG_CGROUP_CPUACCT=y
+CONFIG_PAGE_COUNTER=y
+CONFIG_MEMCG=y
+CONFIG_CGROUP_SCHED=y
+CONFIG_NAMESPACES=y
+CONFIG_OVERLAY_FS=y
+CONFIG_AUTOFS4_FS=y
+CONFIG_SIGNALFD=y
+CONFIG_TIMERFD=y
+CONFIG_EPOLL=y
+CONFIG_IPV6=y
+CONFIG_FANOTIFY
diff --git a/build/boards/sg200x/sg2002_licheervnano_sd/memmap.py b/build/boards/sg200x/sg2002_licheervnano_sd/memmap.py
index 4c676f060..467e93a2e 100755
--- a/build/boards/sg200x/sg2002_licheervnano_sd/memmap.py
+++ b/build/boards/sg200x/sg2002_licheervnano_sd/memmap.py
@@ -41,6 +41,7 @@ class MemoryMap:
     # Multimedia buffer. Used by u-boot/kernel/FreeRTOS
     # =================
     ION_SIZE = 75 * SIZE_1M
+    # ION_SIZE = 0 * SIZE_1M
     H26X_BITSTREAM_SIZE = 2 * SIZE_1M
     H26X_ENC_BUFF_SIZE = 0
     ISP_MEM_BASE_SIZE = 20 * SIZE_1M
diff --git a/build/tools/common/sd_tools/genimage.cfg b/build/tools/common/sd_tools/genimage.cfg
index b97c9e958..6e970200b 100644
--- a/build/tools/common/sd_tools/genimage.cfg
+++ b/build/tools/common/sd_tools/genimage.cfg
@@ -13,7 +13,7 @@ image rootfs.ext4 {
        ext4 {
                label = &quot;rootfs&quot;
        }
-       size = 256M
+       size = 1G
     mountpoint = &quot;/&quot;
 }
</code></pre>
<p>å®˜æ–¹githubæ–‡æ¡£çš„Readmeæœ‰ç‚¹é—®é¢˜ï¼Œä¸èƒ½æŒ‰ç…§readmeä¸­çš„å‘½ä»¤ç›´æ¥buildï¼Œéœ€è¦å»github action workflow ä¸­ææ‰€éœ€çš„æ–‡ä»¶</p>

<pre><code class="lang-bash">git clone https://github.com/sipeed/LicheeRV-Nano-Build --depth=1
cd LicheeRV-Nano-Build
wget https://sophon-file.sophon.cn/sophon-prod-s3/drive/23/03/07/16/host-tools.tar.gz
tar xf host-tools.tar.gz
</code></pre>
<p>å‡†å¤‡å¥½ä¹‹åå¼€å§‹ç¼–è¯‘</p>

<pre><code class="lang-bash">source build/cvisetup.sh
defconfig sg2002_licheervnano_sd
build_all
</code></pre>
<p>ç¼–è¯‘å®Œæˆåä¼šç»™å‡ºç›®æ ‡æ–‡ä»¶çš„ä½ç½®</p>

<pre><code>---------------&gt;8------------------
# please use win32diskimager or dd command write it into sdcard


/mnt/li/LicheeRV-Nano-Build/install/soc_sg2002_licheervnano_sd/images/2024-05-26-04-29-e4c87a.img


---------------&gt;8------------------
/mnt/li/LicheeRV-Nano-Build
</code></pre>
<p>å¾—åˆ°imgæ–‡ä»¶åå³å¯å¼€å§‹ç§»æ¤</p>
<h2 id="img-">imgæ–‡ä»¶æ‰©å®¹</h2>
<p>é¦–å…ˆå‡†å¤‡ä¸€ä¸ªç©ºæ–‡ä»¶ï¼Œå°†å†…å®¹è¿½åŠ åˆ°imgæ–‡ä»¶é‡Œï¼Œè¿™é‡Œæˆ‘å‡†å¤‡æ‰©å®¹500M </p>

<pre><code class="lang-bash">dd if=/dev/zero of=new.img bs=1M count=500
cat new.img &gt;&gt; origin.img
</code></pre>
<p>é€šè¿‡loopè®¾å¤‡ä½¿ç”¨partdæ“ä½œåˆ†åŒº</p>

<pre><code class="lang-bash">sudo losetup -f # å¾—åˆ°ç©ºé—²loopè®¾å¤‡
sudo losetup -P /dev/loop0 /path/to/origin.img
sudo parted /dev/loop0
# resizepart 2 100%
sudo resize2fs /dev/loop0p2
sudo losetup -d /dev/loop0
</code></pre>
<p>å³å¯ï¼Œä½¿ç”¨fdiskå¯ä»¥æŸ¥çœ‹</p>
<h2 id="-debian-licheerv-nano">ç§»æ¤ä¸ª Debian åˆ° LicheeRV nano</h2>
<p>ç”±äºç›®å‰ Debian å·²ç»å°† rv64 è§†ä½œå®˜æ–¹æ¶æ„æ”¯æŒï¼Œæˆ‘ä»¬æ— éœ€è‡ªè¡Œåˆ¶ä½œ portsã€‚åœ¨è¿™é‡Œä¸‹è½½ RiscV ç‰ˆæœ¬çš„é•œåƒï¼š   </p>

<ul>
<li><a href="https://people.debian.org/~gio/dqib/">Debian Quick Image Baker pre-baked images</a>   </li>
</ul>
<p>è§£å‹åå¾—åˆ°è¿™æ ·çš„ç›®å½•ï¼Œæˆ‘ä»¬åªéœ€è¦å…¶ä¸­çš„ <code>image.qcow2</code>ã€‚</p>

<pre><code>â”œâ”€â”€ image.qcow2
â”œâ”€â”€ initrd
â”œâ”€â”€ kernel
â”œâ”€â”€ readme.txt
â”œâ”€â”€ ssh_user_ecdsa_key
â”œâ”€â”€ ssh_user_ed25519_key
â””â”€â”€ ssh_user_rsa_key
</code></pre>
<p>è¿™æ˜¯ QEMU ä½¿ç”¨çš„é•œåƒæ ¼å¼ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå®‰è£… qemu ç„¶åæŒ‚è½½ä¸ºç½‘ç›˜ã€‚</p>

<pre><code class="lang-bash">sudo apt update
sudo apt install qemu-utils
# å¼€å¯ NBD
sudo modprobe nbd max_part=8
sudo qemu-nbd -c /dev/nbd0 image.qcow2
sudo mkdir /mnt/debian-rv
sudo mount /dev/nbd0p2 /mnt/debian-rv
# éªŒè¯æ˜¯å¦èƒ½è¯»å‡ºä¸¤ä¸ªåˆ†åŒº
sudo fdisk -l /dev/nbd0
</code></pre>
<p>åŒæ—¶æŠŠä¹‹å‰çš„ loop è®¾å¤‡æŒ‚è½½åˆ°è¿™ä¸ª<code>/mnt/lichee</code>ä¸‹ï¼Œå¼€å§‹æ›¿æ¢æ–‡ä»¶ï¼š</p>

<pre><code class="lang-bash">sudo mkdir /mnt/lichee
sudo losetup -f # æ‰¾åˆ°loè®¾å¤‡åï¼Œè¿™é‡Œæˆ‘æ˜¯/dev/loop0
sudo losetup -P /dev/loop0 /path/to/xxxx.img
sudo cp -r /mnt/lichee/mnt /tmp # ä¿å­˜ä¸€äº›é‡è¦æ–‡ä»¶ï¼ŒåŒ…å«é©±åŠ¨
sudo cp -r /mnt/lichee/lib/firmware /tmp
sudo cp -r /mnt/lichee/etc/init.d /tmp

sudo rm -rf /mnt/lichee/*
sudo cp -a /mnt/debian-rv/* /mnt/lichee

sudo cp -r /tmp/mnt/* /mnt/lichee/mnt
sudo cp -r /tmp/init.d /mnt/lichee/mnt
sudo cp -r /tmp/firmware /mnt/lichee/lib
</code></pre>
<p>å®Œæˆåå°±å¯ä»¥å–æ¶ˆæŒ‚è½½åˆ·è¿› SD å¡å°è¯•å¯åŠ¨è®¾å¤‡äº† ï¼ˆå¦‚æœéœ€è¦rndisï¼Œè¯·å†çœ‹çœ‹ä¸‹é¢çš„RNDISä¸€èŠ‚ï¼Œå†å–æ¶ˆæŒ‚è½½ï¼‰</p>

<pre><code class="lang-bash">sudo umount /mnt/lichee
sudo umount /mnt/debian-rv
sudo losetup -d /dev/loop0
sudo qemu-nbd -d /dev/nbd0
</code></pre>
<p>è¿›å…¥è®¾å¤‡å®‰è£… NetworkManagerï¼Œæˆ‘ä»¬ä½¿ç”¨ RNDIS æŠŠç”µè„‘å½“ä½œ proxy è¿æ¥ apt æºï¼Œä¿®æ”¹ <code>/etc/apt/apt.conf</code></p>

<pre><code class="lang-ini">Acquire::http::Proxy &quot;http://192.168.42.xx:xxxx/&quot;;
Acquire::Languages &quot;none&quot;;
</code></pre>
<p>å…¶ä¸­ xx æ˜¯è‡ªå·±ç”µè„‘ç»™ RNDIS æ¥å£é…ç½®çš„ IPï¼Œç”µè„‘ä¸Šéœ€è¦æŒ‚ä¸€ä¸ª http proxy server è¿æ¥åˆ°</p>

<pre><code class="lang-bash"># apt å¯èƒ½ OOMï¼Œåˆ›å»º swap
dd if=/dev/zero of=/swap bs=1M count=512
chmod 0600 /swap
mkswap /swap
swapon /swap

apt update
apt install network-manager
systemctl enable NetworkManager
systemctl start NetworkManager
# æ›¿æ¢ &lt;WIFI_SSID&gt; å’Œ &lt;PASSWORD&gt; ä¸º wifi AP åç§°å’Œå¯†ç 
nmcli device wifi connect &lt;WIFI_SSID&gt; password &lt;PASSWORD&gt;
</code></pre>
<p>æ­¤æ—¶åº”è¯¥å¯ä»¥æ­£å¸¸è”ç½‘ä½¿ç”¨äº†ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦ä¸‹è½½ä¾èµ–æ¥åˆ¶ä½œé•œåƒï¼Œ</p>

<pre><code class="lang-bash">export PKG=network-manager
apt download $PKG &amp;&amp; apt depends -i $PKG | awk &#39;/Depends:/ {print $2}&#39; | xargs apt download
</code></pre>
<p>è¿˜æœ‰ä¸€äº›é—´æ¥ä¾èµ–ï¼Œéšä¾¿æ”¾åˆ°ä¸€ä¸ª pkglist æ–‡ä»¶ä¸­</p>

<pre><code class="lang-bash">libaudit1
libbluetooth3
libc6
libcurl3t64-gnutls
libglib2.0-0t64
libgnutls30t64
libjansson4
libmm-glib0
libndp0
libnewt0.52
libnm0
libpsl5t64
libreadline8t64
libselinux1
libsystemd0
libteamdctl0
libudev1
udev
adduser
polkitd
dbus-session-bus-common
libbrotli1
libldap-2.5-0
libnetfilter-conntrack3
libnghttp2-14
libpolkit-agent-1-0
librtmp1
libsasl2-modules
libssh2-1t64
xml-core
dbus-user-session
libduktape207
libldap-common
libnfnetlink0
libpam-systemd
libpolkit-gobject-1-0
libsasl2-2
libsasl2-modules-db
sgml-base
</code></pre>
<p>ç„¶åå®‰è£…</p>

<pre><code>cat pkglist | xargs apt download
</code></pre>
<h2 id="-archlinux-licheerv-nano">ç§»æ¤ä¸ª ArchLinux åˆ° LicheeRV nano</h2>
<p>æˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªArchLinuxçš„ RV64 port</p>

<ul>
<li><a href="https://archriscv.felixc.at/">https://archriscv.felixc.at/</a>    </li>
</ul>
<p>é¦–å…ˆä¸‹è½½æ–‡ä»¶</p>

<pre><code class="lang-bash">wget https://archriscv.felixc.at/images/archriscv-2024-03-30.tar.zst
</code></pre>
<p>ç„¶åå°†åŸå§‹é•œåƒæ–‡ä»¶é€šè¿‡loopè®¾å¤‡æŒ‚è½½åˆ°ä¸€ä¸ªç›®å½•</p>

<pre><code class="lang-bash">sudo losetup -f # æ‰¾åˆ°loè®¾å¤‡åï¼Œè¿™é‡Œæˆ‘æ˜¯/dev/loop0
sudo losetup -P /dev/loop0 /path/to/xxxx.img
sudo mkdir /mnt/lichee
sudo mount /dev/loop0p2 /mnt/lichee
</code></pre>
<p>å°†ç›®å½•ä¸­çš„æ–‡ä»¶æ›¿æ¢ä¸ºæˆ‘ä»¬ä¸‹è½½çš„å†…å®¹</p>

<pre><code class="lang-bash">cd /mnt/lichee
sudo cp -r /mnt/lichee/mnt /tmp # ä¿å­˜ä¸€äº›é‡è¦æ–‡ä»¶
sudo cp -r /mnt/lichee/etc/init.d /tmp

sudo rm -rf *
sudo tar -xvf /path/to/archriscv-2024-03-30.tar.zst -C .
sudo cp -r /tmp/mnt/* ./mnt
sudo cp -r /mnt/init.d ./mnt
</code></pre>
<p>éšåå–æ¶ˆæŒ‚è½½ (å¦‚æœéœ€è¦RNDISï¼Œè¯·å†çœ‹çœ‹ä¸‹é¢çš„RNDISä¸€èŠ‚ï¼Œå†å–æ¶ˆæŒ‚è½½)</p>

<pre><code class="lang-bash">sudo umount /mnt/lichee
sudo losetup -d /dev/loop0
</code></pre>
<p>ç„¶åå°±å¯ä»¥å°†æ–‡ä»¶å†™å…¥SDå¡å¯åŠ¨è®¾å¤‡å•¦</p>
<p>ä¸è¿‡è¿™é‡Œ Arch æ‡’å¾—æ wifiï¼Œåç»­è¿˜æ˜¯æ›´æƒ³ç”¨ Debian ä¸€ç‚¹</p>
<h2 id="-rndis">è®¾ç½®RNDIS</h2>
<p>éœ€è¦å†™å…¥ä»¥ä¸‹æ–‡ä»¶åˆ°æ–°çš„ç³»ç»Ÿï¼Œè®°å¾—<code>chmod +x filename</code></p>

<ul>
<li>/etc/run_usb.sh    </li>
</ul>

<pre><code class="lang-bash">CLASS=acm
VID=0x3346
PID=0x1003
MSC_PID=0x1008
RNDIS_PID=0x1009
UVC_PID=0x100A
UAC_PID=0x100B
ADB_VID=0x18D1
ADB_PID=0x4EE0
ADB_PID_M1=0x4EE2
ADB_PID_M2=0x4EE4
MANUFACTURER=&quot;Cvitek&quot;
PRODUCT=&quot;USB Com Port&quot;
PRODUCT_RNDIS=&quot;RNDIS&quot;
PRODUCT_UVC=&quot;UVC&quot;
PRODUCT_UAC=&quot;UAC&quot;
PRODUCT_ADB=&quot;ADB&quot;
ADBD_PATH=/usr/bin/
SERIAL=&quot;0123456789&quot;
MSC_FILE=$3
CVI_DIR=/tmp/usb
CVI_GADGET=$CVI_DIR/usb_gadget/cvitek
CVI_FUNC=$CVI_GADGET/functions
FUNC_NUM=0
MAX_EP_NUM=4
TMP_NUM=0
INTF_NUM=0
EP_IN=0
EP_OUT=0

case &quot;$2&quot; in
  acm)
    CLASS=acm
    ;;
  msc)
    CLASS=mass_storage
    PID=$MSC_PID
    ;;
  cvg)
    CLASS=cvg
    ;;
  rndis)
    CLASS=rndis
    PID=$RNDIS_PID
    PRODUCT=$PRODUCT_RNDIS
    ;;
  uvc)
    CLASS=uvc
    PID=$UVC_PID
    PRODUCT=$PRODUCT_UVC
    ;;
  uac1)
    CLASS=uac1
    PID=$UAC_PID
    PRODUCT=$PRODUCT_UAC
    ;;
  adb)
    CLASS=ffs.adb
    VID=$ADB_VID
    PID=$ADB_PID
    PRODUCT=$PRODUCT_ADB
    ;;
  *)
    if [ &quot;$1&quot; = &quot;probe&quot; ] ; then
      echo &quot;Usage: $0 probe {acm|msc|cvg|rndis|uvc|uac1|adb}&quot;
      exit 1
    fi
esac

calc_func() {
  FUNC_NUM=$(ls $CVI_GADGET/functions -l | grep ^d | wc -l)
  echo &quot;$FUNC_NUM file(s)&quot;
}

res_check() {
  TMP_NUM=$(find $CVI_GADGET/functions/ -name &quot;acm*&quot; | wc -l)
  EP_OUT=$(($EP_OUT+$TMP_NUM))
  TMP_NUM=$(($TMP_NUM * 2))
  EP_IN=$(($EP_IN+$TMP_NUM))
  INTF_NUM=$(($INTF_NUM+$TMP_NUM))
  TMP_NUM=$(find $CVI_GADGET/functions/ -name &quot;mass_storage*&quot; | wc -l)
  EP_IN=$(($EP_IN+$TMP_NUM))
  EP_OUT=$(($EP_OUT+$TMP_NUM))
  INTF_NUM=$(($INTF_NUM+$TMP_NUM))
  TMP_NUM=$(find $CVI_GADGET/functions/ -name &quot;cvg*&quot; | wc -l)
  EP_IN=$(($EP_IN+$TMP_NUM))
  EP_OUT=$(($EP_OUT+$TMP_NUM))
  INTF_NUM=$(($INTF_NUM+$TMP_NUM))
  TMP_NUM=$(find $CVI_GADGET/functions/ -name &quot;rndis*&quot; | wc -l)
  EP_OUT=$(($EP_OUT+$TMP_NUM))
  TMP_NUM=$(($TMP_NUM * 2))
  EP_IN=$(($EP_IN+$TMP_NUM))
  INTF_NUM=$(($INTF_NUM+$TMP_NUM))
  TMP_NUM=$(find $CVI_GADGET/functions/ -name &quot;uvc*&quot; | wc -l)
  TMP_NUM=$(($TMP_NUM * 2))
  EP_IN=$(($EP_IN+$TMP_NUM))
  INTF_NUM=$(($INTF_NUM+$TMP_NUM))
  TMP_NUM=$(find $CVI_GADGET/functions/ -name &quot;uac1*&quot; | wc -l)
  TMP_NUM=$(($TMP_NUM * 2))
  EP_IN=$(($EP_IN+$TMP_NUM))
  EP_OUT=$(($EP_OUT+$TMP_NUM))
  INTF_NUM=$(($INTF_NUM+$TMP_NUM))
  TMP_NUM=$(find $CVI_GADGET/functions/ -name ffs.adb | wc -l)
  EP_IN=$(($EP_IN+$TMP_NUM))
  EP_OUT=$(($EP_OUT+$TMP_NUM))
  INTF_NUM=$(($INTF_NUM+$TMP_NUM))

  if [ &quot;$CLASS&quot; = &quot;acm&quot; ] ; then
    EP_IN=$(($EP_IN+2))
    EP_OUT=$(($EP_OUT+1))
  fi
  if [ &quot;$CLASS&quot; = &quot;mass_storage&quot; ] ; then
    EP_IN=$(($EP_IN+1))
    EP_OUT=$(($EP_OUT+1))
  fi
  if [ &quot;$CLASS&quot; = &quot;cvg&quot; ] ; then
    EP_IN=$(($EP_IN+1))
    EP_OUT=$(($EP_OUT+1))
  fi
  if [ &quot;$CLASS&quot; = &quot;rndis&quot; ] ; then
    EP_IN=$(($EP_IN+2))
    EP_OUT=$(($EP_OUT+1))
  fi
  if [ &quot;$CLASS&quot; = &quot;uvc&quot; ] ; then
    EP_IN=$(($EP_IN+2))
  fi
  if [ &quot;$CLASS&quot; = &quot;uac1&quot; ] ; then
    EP_IN=$(($EP_IN+1))
    EP_OUT=$(($EP_OUT+1))
  fi
  if [ &quot;$CLASS&quot; = &quot;ffs.adb&quot; ] ; then
    EP_IN=$(($EP_IN+1))
    EP_OUT=$(($EP_OUT+1))
  fi
  echo &quot;$EP_IN in ep&quot;
  echo &quot;$EP_OUT out ep&quot;
  if [ $EP_IN -gt $MAX_EP_NUM ]; then
    echo &quot;reach maximum resource&quot;
    exit 1
  fi
  if [ $EP_OUT -gt $MAX_EP_NUM ]; then
    echo &quot;reach maximum resource&quot;
    exit 1
  fi
}

probe() {
  if [ ! -d $CVI_DIR ]; then
    mkdir $CVI_DIR
  fi
  if [ ! -d $CVI_DIR/usb_gadget ]; then
    # Enale USB ConfigFS
    mount none $CVI_DIR -t configfs
    # Create gadget dev
    mkdir $CVI_GADGET
    # Set the VID and PID
    echo $VID &gt;$CVI_GADGET/idVendor
    echo $PID &gt;$CVI_GADGET/idProduct
    # Set the product information string
    mkdir $CVI_GADGET/strings/0x409
    echo $MANUFACTURER&gt;$CVI_GADGET/strings/0x409/manufacturer
    echo $PRODUCT&gt;$CVI_GADGET/strings/0x409/product
    echo $SERIAL&gt;$CVI_GADGET/strings/0x409/serialnumber
    # Set the USB configuration
    mkdir $CVI_GADGET/configs/c.1
    mkdir $CVI_GADGET/configs/c.1/strings/0x409
    echo &quot;config1&quot;&gt;$CVI_GADGET/configs/c.1/strings/0x409/configuration
    # Set the MaxPower of USB descriptor
    echo 120 &gt;$CVI_GADGET/configs/c.1/MaxPower
  fi
  # get current functions number
  calc_func
  # assign the class code for composite device
  if [ ! $FUNC_NUM -eq 0 ]; then
    echo 0xEF &gt;$CVI_GADGET/bDeviceClass
    echo 0x02 &gt;$CVI_GADGET/bDeviceSubClass
    echo 0x01 &gt;$CVI_GADGET/bDeviceProtocol
  fi
  # resource check
  res_check
  # create the desired function
  if [ &quot;$CLASS&quot; = &quot;ffs.adb&quot; ] ; then
    # adb shall be the last function to probe. Override the pid/vid
    echo $VID &gt;$CVI_GADGET/idVendor
    echo $PID &gt;$CVI_GADGET/idProduct
    # choose pid for different function number
    if [ $INTF_NUM -eq 1 ]; then
      echo $ADB_PID_M1 &gt;$CVI_GADGET/idProduct
    fi
    if [ $INTF_NUM -eq 2 ]; then
      echo $ADB_PID_M2 &gt;$CVI_GADGET/idProduct
    fi
    mkdir $CVI_GADGET/functions/$CLASS
  else
    mkdir $CVI_GADGET/functions/$CLASS.usb$FUNC_NUM
  fi
  if [ &quot;$CLASS&quot; = &quot;mass_storage&quot; ] ; then
    echo $MSC_FILE &gt;$CVI_GADGET/functions/$CLASS.usb$FUNC_NUM/lun.0/file
  fi
  if [ &quot;$CLASS&quot; = &quot;rndis&quot; ] ; then
    #OS STRING
    echo 1 &gt;$CVI_GADGET/os_desc/use
    echo 0xcd &gt;$CVI_GADGET/os_desc/b_vendor_code
    echo MSFT100 &gt;$CVI_GADGET/os_desc/qw_sign
    #COMPATIBLE ID
    echo RNDIS &gt;$CVI_FUNC/rndis.usb$FUNC_NUM/os_desc/interface.rndis/compatible_id
    #MAKE c.1 THE ONE ASSOCIATED WITH OS DESCRIPTORS
    ln -s $CVI_GADGET/configs/c.1 $CVI_GADGET/os_desc
    #MAKE &quot;Icons&quot; EXTENDED PROPERTY
    mkdir $CVI_FUNC/rndis.usb$FUNC_NUM/os_desc/interface.rndis/Icons
    echo 2 &gt;$CVI_FUNC/rndis.usb$FUNC_NUM/os_desc/interface.rndis/Icons/type
    echo &quot;%SystemRoot%\\system32\\shell32.dll,-233&quot; &gt;$CVI_FUNC/rndis.usb$FUNC_NUM/os_desc/interface.rndis/Icons/data
    #MAKE &quot;Label&quot; EXTENDED PROPERTY
    mkdir $CVI_FUNC/rndis.usb$FUNC_NUM/os_desc/interface.rndis/Label
    echo 1 &gt;$CVI_FUNC/rndis.usb$FUNC_NUM/os_desc/interface.rndis/Label/type
    echo &quot;XYZ Device&quot; &gt;$CVI_FUNC/rndis.usb$FUNC_NUM/os_desc/interface.rndis/Label/data
  fi

}

start() {
  # link this function to the configuration
  calc_func
  if [ $FUNC_NUM -eq 0 ]; then
    echo &quot;Functions Empty!&quot;
    exit 1
  fi
  if [ -d $CVI_GADGET/functions/ffs.adb ]; then
    FUNC_NUM=$(($FUNC_NUM-1))
  fi
  for i in `seq 0 $(($FUNC_NUM-1))`;
  do
    find $CVI_GADGET/functions/ -name &quot;*.usb$i&quot; | xargs -I % ln -s % $CVI_GADGET/configs/c.1
  done
  if [ -d $CVI_GADGET/functions/ffs.adb ]; then
    ln -s $CVI_GADGET/functions/ffs.adb $CVI_GADGET/configs/c.1
    mkdir /dev/usb-ffs/adb -p
    mount -t functionfs adb /dev/usb-ffs/adb
    if [ -f $ADBD_PATH/adbd ]; then
    $ADBD_PATH/adbd &amp;
    fi
  else
    # Start the gadget driver
    UDC=`ls /sys/class/udc/ | awk &#39;{print $1}&#39;`
    echo ${UDC} &gt;$CVI_GADGET/UDC
  fi
}

stop() {
  if [ -d $CVI_GADGET/configs/c.1/ffs.adb ]; then
    pkill adbd
    rm $CVI_GADGET/configs/c.1/ffs.adb
  else
    echo &quot;&quot; &gt;$CVI_GADGET/UDC
  fi
  find $CVI_GADGET/configs/ -name &quot;*.usb*&quot; | xargs rm -f
  rmdir $CVI_GADGET/configs/c.*/strings/0x409/
  tmp_dirs=$(find $CVI_GADGET/os_desc/c.* -type d)
  if [ -n tmp_dirs ]; then
    echo &quot;remove os_desc!&quot;
    rm -rf $CVI_GADGET/os_desc/c.*/
    find $CVI_GADGET/functions/ -name Icons | xargs rmdir
    find $CVI_GADGET/functions/ -name Label | xargs rmdir
  fi
  rmdir $CVI_GADGET/configs/c.*/
  rmdir $CVI_GADGET/functions/*
  rmdir $CVI_GADGET/strings/0x409/
  rmdir $CVI_GADGET
  umount $CVI_DIR
  rmdir $CVI_DIR
}

case &quot;$1&quot; in
  start)
    start
    ;;
  stop)
    stop
    ;;
  probe)
    probe
    ;;
  UDC)
  UDC=`ls /sys/class/udc/ | awk &#39;{print $1}&#39;`
  echo ${UDC} &gt;$CVI_GADGET/UDC
    ;;
  *)
    echo &quot;Usage: $0 probe {acm|msc|cvg|uvc|uac1} {file (msc)}&quot;
    echo &quot;Usage: $0 start&quot;
    echo &quot;Usage: $0 stop&quot;
    exit 1
esac
exit $?
</code></pre>

<ul>
<li>/etc/uhubon.sh    </li>
</ul>

<pre><code class="lang-bash">GPIO_HUBPORT_EN=449
GPIO_ROLESEL=450
GPIO_HUBRST=451
SYS_GPIO=/sys/class/gpio

hub_on() {
  echo &quot;turn on usb hub&quot;
  if [ ! -d $SYS_GPIO/gpio$GPIO_HUBPORT_EN ]; then
      echo $GPIO_HUBPORT_EN &gt;/sys/class/gpio/export
  fi

  if [ ! -d $SYS_GPIO/gpio$GPIO_ROLESEL ]; then
      echo $GPIO_ROLESEL &gt;/sys/class/gpio/export
  fi

  if [ ! -d $SYS_GPIO/gpio$GPIO_HUBRST ]; then
      echo $GPIO_HUBRST &gt;/sys/class/gpio/export
  fi

  echo &quot;out&quot; &gt;/sys/class/gpio/gpio$GPIO_HUBPORT_EN/direction
  echo &quot;out&quot; &gt;/sys/class/gpio/gpio$GPIO_ROLESEL/direction
  echo &quot;out&quot; &gt;/sys/class/gpio/gpio$GPIO_HUBRST/direction

  echo 1 &gt;/sys/class/gpio/gpio$GPIO_HUBPORT_EN/value
  echo 0 &gt;/sys/class/gpio/gpio$GPIO_ROLESEL/value
  echo 0 &gt;/sys/class/gpio/gpio$GPIO_HUBRST/value
}

hub_off() {
  echo &quot;turn off usb hub&quot;
  if [ ! -d $SYS_GPIO/gpio$GPIO_HUBPORT_EN ]; then
      echo $GPIO_HUBPORT_EN &gt;/sys/class/gpio/export
  fi

  if [ ! -d $SYS_GPIO/gpio$GPIO_ROLESEL ]; then
      echo $GPIO_ROLESEL &gt;/sys/class/gpio/export
  fi

  if [ ! -d $SYS_GPIO/gpio$GPIO_HUBRST ]; then
      echo $GPIO_HUBRST &gt;/sys/class/gpio/export
  fi

  echo &quot;out&quot; &gt;/sys/class/gpio/gpio$GPIO_HUBPORT_EN/direction
  echo &quot;out&quot; &gt;/sys/class/gpio/gpio$GPIO_ROLESEL/direction
  echo &quot;out&quot; &gt;/sys/class/gpio/gpio$GPIO_HUBRST/direction

  echo 0 &gt;/sys/class/gpio/gpio$GPIO_HUBPORT_EN/value
  echo 1 &gt;/sys/class/gpio/gpio$GPIO_ROLESEL/value
  echo 1 &gt;/sys/class/gpio/gpio$GPIO_HUBRST/value
}

inst_mod() {
  insmod /mnt/system/ko/configfs.ko
  insmod /mnt/system/ko/libcomposite.ko
  insmod /mnt/system/ko/u_serial.ko
  insmod /mnt/system/ko/usb_f_acm.ko
  insmod /mnt/system/ko/cvi_usb_f_cvg.ko
  insmod /mnt/system/ko/usb_f_uvc.ko
  insmod /mnt/system/ko/usb_f_fs.ko
  insmod /mnt/system/ko/u_audio.ko
  insmod /mnt/system/ko/usb_f_uac1.ko
  insmod /mnt/system/ko/usb_f_serial.ko
  insmod /mnt/system/ko/usb_f_mass_storage.ko
  insmod /mnt/system/ko/u_ether.ko
  insmod /mnt/system/ko/usb_f_ecm.ko
  insmod /mnt/system/ko/usb_f_eem.ko
  insmod /mnt/system/ko/usb_f_rndis.ko
}

case &quot;$1&quot; in
  host)
    insmod /mnt/system/ko/dwc2.ko
    hub_on
    ;;
  device)
    hub_off
    inst_mod
    echo device &gt; /proc/cviusb/otg_role
    ;;
  *)
    echo &quot;Usage: $0 host&quot;
    echo &quot;Usage: $0 device&quot;
    exit 1
esac
exit $?
</code></pre>

<ul>
<li>/etc/usb-rndis.sh</li>
</ul>

<pre><code class="lang-bash">#!/usr/bin/sh

/etc/uhubon.sh device &gt;&gt; /tmp/rndis.log 2&gt;&amp;1
/etc/run_usb.sh probe rndis &gt;&gt; /tmp/rndis.log 2&gt;&amp;1
/etc/run_usb.sh start rndis &gt;&gt; /tmp/rndis.log 2&gt;&amp;1

sleep 0.5
ip link set dev usb0 up
ip a add 192.168.42.1/24 dev usb0
</code></pre>
<p>éšåæ–°å¢ä¸€ä¸ªsystemd service</p>

<pre><code class="lang-bash">nano /mnt/lichee/etc/systemd/system/rndis.service
</code></pre>
<p>å†…å®¹   </p>

<pre><code>[Unit]
Description=RNDIS

[Service]
User=root
WorkingDirectory=/etc/
ExecStart=/etc/usb-rndis.sh

[Install]
WantedBy=multi-user.target
</code></pre>
<p>å†™å…¥ååšé“¾æ¥å³å¯</p>

<pre><code class="lang-bash">cd /mnt/lichee/etc/systemd/system/multi-user.target.wants/
ln -s ../rndis.service rndis.service
</code></pre>
<p>å¯åŠ¨åå¯ä»¥ä½¿ç”¨rndisé…ç½®aptä»£ç†åˆ°æœ¬æœºï¼Œéšåä½¿ç”¨aptä¸‹è½½ç¦»çº¿åŒ…ï¼Œæ–¹ä¾¿ä»¥ååˆ¶ä½œæ–°çš„é•œåƒ   </p>

<pre><code class="lang-bash">export PKG=network-manager
apt-get download $PKG &amp;&amp; apt-cache depends -i $PKG | awk &#39;/Depends:/ {print $2}&#39; | xargs apt-get download
</code></pre>
<h2 id="-ko">åŠ è½½ko</h2>
<p>åˆ›å»ºæ–‡ä»¶<code>/mnt/lichee/etc/lichee.sh</code> ä¸”<code>chmod +x</code></p>

<pre><code class="lang-bash">#!/usr/bin/sh
/mnt/init.d/S00kmod start
/mnt/init.d/S01fs start
/mnt/init.d/S25wifimod start
</code></pre>
<p>éšååˆ›å»ºæ–‡ä»¶   </p>

<pre><code>sudo vim /mnt/lichee/etc/systemd/system/lichee.service
</code></pre>
<p>å†…å®¹   </p>

<pre><code>[Unit]
Description=Load LicheeRVNano Init Scripts

[Service]
Type=oneshot
ExecStart=/etc/lichee.sh
RemainAfterExit=yes

[Install]
WantedBy=multi-user.target
</code></pre>
<p>å†™å…¥ååšé“¾æ¥å³å¯</p>

<pre><code class="lang-bash">cd /mnt/lichee/etc/systemd/system/multi-user.target.wants/
ln -s ../lichee.service lichee.service
</code></pre>
<h2 id="-">éŸ³é¢‘è®¾å¤‡</h2>
<p>è”ææ´¾ RV nano æœ‰æ¿è½½çš„éº¦å…‹é£ï¼Œåœ¨åŠ è½½é©±åŠ¨çš„æ—¶å€™å·²ç»å‡†å¤‡å¥½modï¼Œä½¿ç”¨æ–¹å¼å¦‚ä¸‹</p>

<pre><code class="lang-bash">apt install alsa-oss alsa-tools alsa-utils # å®‰è£…alsa
arecord -d 5 output.wav # å½•åˆ¶5ç§’çš„éŸ³é¢‘æ–‡ä»¶
</code></pre>
<h2 id="-">å‚è€ƒ</h2>

<ul>
<li><a href="https://wiki.sipeed.com/hardware/zh/lichee/RV_Nano/1_intro.html">Sipeed è”ææ´¾RV nano å®˜æ–¹æ–‡æ¡£</a>   </li>
<li><a href="https://zhuanlan.zhihu.com/p/593627641">ã€AXPIã€‘å¦‚ä½•åœ¨ M1/M2 Macä¸Šä½¿ç”¨ Rndis</a>   </li>
<li><a href="https://www.taterli.com/9532/">Milkv Duo çš„ Debian ç§»æ¤ç¬”è®°</a>   </li>
<li><a href="https://community.milkv.io/t/arch-linux-on-milkv-duo-milkv-duo-arch-linux/329">ã€Arch Linux On Milkv-duoã€‘Milkv-duo è¿è¡Œ Arch Linux ç³»ç»Ÿ</a></li>
<li><a href="https://community.milkv.io/t/debian-arch-linux-on-milkv-duo-256m-milkv-duo-256m-debian-arch-linux/1110">ã€Debian &amp; Arch Linux On Milkv-duo 256Mã€‘Milkv-duo 256M è¿è¡Œ Debian &amp; Arch Linux ç³»ç»Ÿ è§†é¢‘æ•™ç¨‹</a></li>
</ul>
]]></description><link>https://vaala.cat/posts/lichee-rv-nano-memos</link><guid isPermaLink="true">https://vaala.cat/posts/lichee-rv-nano-memos</guid><pubDate>Fri, 31 May 2024 22:50:19 GMT</pubDate></item><item><title><![CDATA[frp-panelå¼€å‘ç¬”è®°åŠä½¿ç”¨è¯´æ˜]]></title><description><![CDATA[<blockquote>
<p>é¡¹ç›®åœ°å€: <a href="https://github.com/VaalaCat/frp-panel">https://github.com/VaalaCat/frp-panel</a>
æœ¬æ–‡æ˜¯ä½¿ç”¨è¯´æ˜å…¼å¼€å‘ç¬”è®°ï¼Œæƒ³çœ‹éƒ¨ç½²è¯´æ˜çš„ç›´æ¥è·³åˆ°æœ€åå§</p>
</blockquote>
<h2 id="-">èƒŒæ™¯</h2>
<p>åœ¨è·³ä¸åŠ¨å¹²äº†ä¸å°‘æ—¶é—´äº†ï¼Œå‘ç°å¯¹å¼€æºè¿˜æ˜¯æœ‰çƒ­æƒ…çš„ï¼ˆè™½ç„¶ä¹Ÿåªæœ‰çƒ­æƒ…äº†ï¼‰ï¼Œç¤¾ç•œæ˜¯çœŸçš„ğŸ®ğŸã€‚æ—¶é—´æ˜¯çœŸçš„ä¸å¤Ÿç”¨ï¼Œè¿™ä¸ªé¡¹ç›®æˆ‘ä»å¤§ä¸€å¼€å§‹å°±æƒ³è¦å¯åŠ¨ï¼Œä¸€ç›´æ²¡æœ‰æ‰¾åˆ°å¥‘æœºã€‚è¿™æ¬¡æ‰¾äº†ä¸ªå‘¨æœ«æŠŠå®ƒå¯åŠ¨ä¸ŠåŸºæœ¬åŠŸèƒ½å†™å®Œã€‚   </p>
<p>é‚£ä¹ˆæ¥ä¸‹æ¥è¯´è¯´è¿™æ¬¡å¼€å‘çš„ä¸œè¥¿å§ã€‚æˆ‘è¿™æ¬¡è¦åšçš„æ˜¯frpçš„ä¸­å¿ƒåŒ–æ§åˆ¶ç‰ˆæœ¬ã€‚   </p>
<p><del>çŸ¥é“çš„å¥½å…„å¼Ÿå¯èƒ½çŸ¥é“</del>ï¼Œ<a href="https://github.com/fatedier/frp">frp</a>çš„è¿è¡Œæ˜¯ç”±ã€Œä½¿ç”¨è€…ã€åˆ†åˆ«ç»™ã€Œå®¢æˆ·ç«¯ã€å³frpcå’Œã€ŒæœåŠ¡ç«¯ã€frpså†™å¥½é…ç½®æ–‡ä»¶ï¼Œç„¶ååœ¨æœ‰å…¬ç½‘æœåŠ¡å™¨çš„åœ°æ–¹è¿è¡Œfrpsï¼Œåœ¨æ²¡æœ‰å…¬ç½‘æœåŠ¡å™¨çš„åœ°æ–¹è¿è¡Œfrpcã€‚è€Œä¸”è¿™ç§æ¨¡å¼è¿è¡Œçš„å¾ˆå¥½ï¼Œfrpå‡ ä¹æ˜¯ç¤¾åŒºä¸Šå¥½è¯„ç¨‹åº¦æœ€é«˜çš„å†…ç½‘ç©¿é€å·¥å…·ã€‚   </p>
<p>é‚£ä¹ˆæˆ‘ä¸ºä»€ä¹ˆè¦è¿˜è¦å†™ä¸€ä¸ªè¿™ä¸ªç©æ„å„¿å‘¢ï¼Ÿæ›¾ç»æˆ‘ä½¿ç”¨è¿‡å¦ä¸€ä¸ªå·¥å…·ï¼š<a href="https://github.com/ehang-io/nps">nps</a>ï¼Œè¿™ä¸ªå·¥å…·å·²ç»å‡ å¹´æ²¡æœ‰commitäº†ï¼Œä½†æ˜¯ä¾æ—§æœ‰ä¸å°‘äººè¿˜æƒ³ä½¿ç”¨å®ƒï¼Œå°¤å…¶æ˜¯çº¢é˜Ÿçš„ä¸€äº›å“¥ä»¬ã€‚è¿™ä¸ªå«npsçš„ä¸œè¥¿ä¼˜ç‚¹åœ¨äºå®ƒæœ‰ä¸­å¿ƒåŒ–çš„webç®¡ç†ï¼Œç”¨æˆ·æ­å»ºå¥½æœåŠ¡ç«¯è¿‡åï¼Œå®¢æˆ·ç«¯åªéœ€è¦ä¸€è¡Œå‘½ä»¤å°±å¯ä»¥è¿è¡Œèµ·æ¥ï¼Œå„ç§é…ç½®éƒ½åœ¨æœåŠ¡ç«¯è¿›è¡Œã€‚   </p>
<p>è€Œä¸”å¤§å‚çš„ä¸€äº›äº§å“ï¼Œæ¯”å¦‚Cloudflare Argo Tunnel / Tailscale Funneléƒ½æ”¯æŒä¸­å¿ƒåŒ–é…ç½®ï¼Œ<del>é‚£æˆ‘ä»¬ä¹Ÿå¾—ç´§è·Ÿå‹å•†ã€‚</del>   </p>
<p>æˆ‘è®¤ä¸ºè¿™æ ·çš„æ“ä½œé€»è¾‘æ˜æ˜¾æ›´ç¬¦åˆâ€œå†…ç½‘ç©¿é€å·¥å…·â€çš„ä½¿ç”¨åœºæ™¯ã€‚å› ä¸ºæœåŠ¡ç«¯å®šä¹‰ä¸Šå°±æ˜¯å¤–éƒ¨å¯è®¿é—®ï¼Œå®¢æˆ·ç«¯å°±æ˜¯å¤–éƒ¨ä¸å¯è®¿é—®ã€‚å½“ç”¨æˆ·éƒ½æ²¡åŠæ³•ä»å¤–éƒ¨è®¿é—®å®¢æˆ·ç«¯ï¼Œé‚£ä¹ˆè¦å¦‚ä½•è¿œç¨‹çš„ä¿®æ”¹é…ç½®å‘¢ï¼Ÿæ‰€ä»¥æˆ‘è®¤ä¸ºå®¢æˆ·ç«¯çš„é…ç½®æ˜¯ä¸€å®šè¦åœ¨æœåŠ¡ç«¯webé¡µé¢ä¸Šåšçš„ã€‚   </p>
<p>å¦å¤–ï¼Œæ—¢ç„¶æˆ‘ä»¬è¦åšçš„æ˜¯ä¸€ä¸ªå¹³å°ï¼Œé‚£ä¹ˆæ”¯æŒå¤šæœåŠ¡ç«¯çš„ç®¡ç†æ˜¯å¿…ç„¶çš„ã€‚   </p>
<p>å¾—å‡ºäº†è¿™æ ·ä¸€ä¸ªç»“è®ºï¼Œé‚£ä¹ˆå°±å¾—æ’¸èµ·è¢–å­å¼€å¹²äº†ã€‚   </p>
<p>æˆ‘ä»¬çš„ç›®æ ‡å°±æ˜¯åšä¸€ä¸ªï¼š   </p>

<ul>
<li>å®¢æˆ·ç«¯é…ç½®å¯ä¸­å¿ƒåŒ–ç®¡ç†   </li>
<li>å¤šæœåŠ¡ç«¯é…ç½®ç®¡ç†   </li>
<li>å¯è§†åŒ–é…ç½®ç•Œé¢   </li>
<li>ç®€åŒ–è¿è¡Œæ‰€éœ€è¦çš„é…ç½®   </li>
</ul>
<p>çš„æ›´å¼ºæ›´å®Œå–„çš„frpï¼   </p>
<p>DEMO:</p>
<p><img src="/images/frp-panel/frp-panel-demo.gif" alt="demo"></p>
<h2 id="-">æŠ€æœ¯è·¯çº¿</h2>
<h3 id="-">æŠ€æœ¯æ ˆ</h3>
<p>frpé¡¹ç›®æœ¬èº«æ˜¯ä½¿ç”¨çš„Goè¯­è¨€ï¼Œé‚£ä¹ˆè‡ªç„¶æˆ‘ä¹Ÿç”¨Goæ˜¯æœ€ä¼˜é€‰æ‹©ã€‚   </p>
<p>rpcé€‰æ‹©äº†protobuf+grpcï¼Œhttpæ¡†æ¶ä½¿ç”¨äº†Ginã€‚   </p>
<p>å‰ç«¯çš„è¯å€’ç”¨å•¥å†™éƒ½è¡Œï¼Œæ—¢ç„¶è¦å†™å°±è¦å†™æœ€æ–°çš„ï¼Œæ‰€ä»¥é€‰äº†<a href="https://react.dev/">react</a>/<a href="https://nextjs.org/">nextjs</a>å’Œ<a href="https://ui.shadcn.com/">shadcn-ui</a>/<a href="https://tailwindcss.com/">tailwindcss</a></p>
<h3 id="-">å¹³å°æ¶æ„è®¾è®¡</h3>
<p>æŠ€æœ¯æ ˆé€‰å¥½äº†ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯è¦è®¾è®¡ç¨‹åºçš„æ¶æ„ã€‚åœ¨åˆšåˆšèƒŒæ™¯é‡Œè¯´çš„é‚£æ ·ï¼Œfrpæœ¬èº«æœ‰frpcå’Œfrpsï¼ˆå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ï¼‰ï¼Œè¿™ä¸¤ä¸ªè§’è‰²è‚¯å®šæ˜¯å¿…ä¸å¯å°‘äº†ã€‚ç„¶åæˆ‘ä»¬è¿˜è¦æ–°å¢ä¸€ä¸ªä¸œè¥¿å»ç®¡ç†å®ƒä»¬ï¼Œæ‰€ä»¥frp-panelæ–°å¢äº†ä¸€ä¸ªmasterè§’è‰²ã€‚masterä¼šè´Ÿè´£ç®¡ç†å„ç§frpcå’Œfrpsï¼Œä¸­å¿ƒåŒ–çš„å­˜å‚¨é…ç½®æ–‡ä»¶å’Œè¿æ¥ä¿¡æ¯ã€‚   </p>
<p>ç„¶åæ˜¯frpcå’Œfrpsã€‚åŸç‰ˆæ˜¯éœ€è¦åœ¨ä¸¤è¾¹åˆ†åˆ«å†™é…ç½®æ–‡ä»¶çš„ã€‚é‚£ä¹ˆæ—¢ç„¶åŸç‰ˆå·²ç»æ”¯æŒäº†ï¼Œå°±ä¸ç”¨åœ¨èµ°åŸç‰ˆçš„è·¯å­ï¼Œæˆ‘ä»¬ç›´æ¥ä¸æ”¯æŒé…ç½®æ–‡ä»¶ï¼Œæ‰€æœ‰çš„é…ç½®éƒ½å¿…é¡»ä»masterè·å–ã€‚   </p>
<p>å…¶æ¬¡è¿˜è¦è€ƒè™‘åˆ°ä¸åŸç‰ˆçš„å…¼å®¹é—®é¢˜ï¼Œfrp-panelçš„å®¢æˆ·ç«¯/æœåŠ¡ç«¯éƒ½å¿…é¡»è¦èƒ½è¿ä¸Šå®˜æ–¹frpc/frpsæœåŠ¡ã€‚è¿™æ ·çš„è¯å°±å¯ä»¥åšåˆ°é…ç½®æ–‡ä»¶/ä¸è¦é…ç½®æ–‡ä»¶éƒ½èƒ½å®Œç¾å·¥ä½œäº†ã€‚<br>æ€»çš„è¯´æ¥æ¶æ„è¿˜æ˜¯å¾ˆç®€å•çš„ã€‚</p>
<p><img src="/images/frp-panel/arch.png" alt="arch"></p>
<h2 id="-">å¼€å‘</h2>
<p>é¡¹ç›®åŒ…å«ä¸‰ä¸ªè§’è‰²   </p>

<ol>
<li>Master: æ§åˆ¶èŠ‚ç‚¹ï¼Œæ¥å—æ¥è‡ªå‰ç«¯çš„è¯·æ±‚å¹¶è´Ÿè´£ç®¡ç†Clientå’ŒServer   </li>
<li>Server: æœåŠ¡ç«¯ï¼Œå—æ§åˆ¶èŠ‚ç‚¹æ§åˆ¶ï¼Œè´Ÿè´£å¯¹å®¢æˆ·ç«¯æä¾›æœåŠ¡ï¼ŒåŒ…å«frpså’Œrpc(ç”¨äºè¿æ¥Master)æœåŠ¡   </li>
<li>Client: å®¢æˆ·ç«¯ï¼Œå—æ§åˆ¶èŠ‚ç‚¹æ§åˆ¶ï¼ŒåŒ…å«frpcå’Œrpc(ç”¨äºè¿æ¥Master)æœåŠ¡   </li>
</ol>
<p>æ¥ä¸‹æ¥ç»™å‡ºä¸€ä¸ªé¡¹ç›®ä¸­å„ä¸ªåŒ…çš„åŠŸèƒ½   </p>

<pre><code>.
|-- biz                 # ä¸»è¦ä¸šåŠ¡é€»è¾‘
|   |-- client          # å®¢æˆ·ç«¯é€»è¾‘ï¼ˆè¿™é‡ŒæŒ‡çš„æ˜¯frp-panelçš„å®¢æˆ·ç«¯ï¼‰
|   |-- master          # frp-panel æ§åˆ¶å¹³é¢ï¼Œè´Ÿè´£å¤„ç†å‰ç«¯è¯·æ±‚ï¼Œå¹¶ä¸”ä½¿ç”¨rpcç®¡ç†frp-panelçš„serverå’Œclient
|   |   |-- auth        # è®¤è¯æ¨¡å—ï¼ŒåŒ…å«ç”¨æˆ·è®¤è¯å’Œå®¢æˆ·ç«¯è®¤è¯
|   |   |-- client      # å®¢æˆ·ç«¯æ¨¡å—ï¼ŒåŒ…å«å‰ç«¯ç®¡ç†å®¢æˆ·ç«¯çš„å„ç§API
|   |   |-- server      # æœåŠ¡ç«¯æ¨¡å—ï¼ŒåŒ…å«å‰ç«¯ç®¡ç†æœåŠ¡ç«¯çš„å„ç§API
|   |   `-- user        # ç”¨æˆ·æ¨¡å—ï¼ŒåŒ…å«ç”¨æˆ·ç®¡ç†ã€ç”¨æˆ·ä¿¡æ¯è·å–ç­‰
|   `-- server          # æœåŠ¡ç«¯é€»è¾‘ï¼ˆè¿™é‡ŒæŒ‡çš„æ˜¯frp-panelçš„æœåŠ¡ç«¯ï¼‰
|-- cache               # ç¼“å­˜ï¼Œç”¨äºå­˜å‚¨frpsçš„è®¤è¯token
|-- cmd                 # å‘½ä»¤è¡Œå…¥å£ï¼Œmainå‡½æ•°çš„æ‰€åœ¨åœ°ï¼Œè´Ÿè´£æŒ‰éœ€å¯åŠ¨å„ä¸ªæ¨¡å—
|-- common
|-- conf
|-- dao                 # data access objectï¼Œä»»ä½•å’Œæ•°æ®åº“ç›¸å…³çš„æ“ä½œä¼šè°ƒç”¨è¿™ä¸ªåº“
|-- doc                 # æ–‡æ¡£
|-- idl                 # idlå®šä¹‰
|-- middleware          # apiçš„ä¸­é—´ä»¶ï¼ŒåŒ…å«JWTå’Œcontextç›¸å…³ï¼Œç”¨äºå¤„ç†apiè¯·æ±‚ï¼Œé‰´æƒé€šè¿‡åä¼šæŠŠç”¨æˆ·ä¿¡æ¯æ³¨å…¥åˆ°contextï¼Œå¯ä»¥é€šè¿‡commonåŒ…è·å–
|-- models              # æ•°æ®åº“æ¨¡å‹ï¼Œç”¨äºå®šä¹‰æ•°æ®åº“è¡¨ã€‚åŒæ—¶åŒ…å«å®ä½“å®šä¹‰
|-- pb                  # protobufç”Ÿæˆçš„pbæ–‡ä»¶
|-- rpc                 # å„ç§rpcçš„æ‰€åœ¨åœ°ï¼ŒåŒ…å«Client/Serverè°ƒç”¨Masterçš„é€»è¾‘ï¼Œä¹ŸåŒ…å«Masterä½¿ç”¨Streamè°ƒç”¨Clientå’ŒServerçš„é€»è¾‘
|-- services            # å„ç§éœ€è¦åœ¨å†…å­˜ä¸­æŒä¹…è¿è¡Œçš„æ¨¡å—ï¼Œè¿™ä¸ªåŒ…å¯ä»¥ç®¡ç†å„ä¸ªæœåŠ¡çš„è¿è¡Œ/åœæ­¢
|   |-- api             # apiæœåŠ¡ï¼Œè¿è¡Œéœ€è¦å¤–éƒ¨ä¼ å…¥ä¸€ä¸ªginRouter
|   |-- client          # frpçš„å®¢æˆ·ç«¯ï¼Œå³frpcï¼Œå¯ä»¥æ§åˆ¶frpcçš„å„ç§é…ç½®/å¼€å§‹ä¸åœæ­¢
|   |-- master          # masteræœåŠ¡ï¼ŒåŒ…å«rpcçš„æœåŠ¡ç«¯å®šä¹‰ï¼Œæ¥æ”¶åˆ°rpcè¯·æ±‚åä¼šè°ƒç”¨bizåŒ…å¤„ç†é€»è¾‘
|   |-- rpcclient       # æœ‰çŠ¶æ€çš„rpcå®¢æˆ·ç«¯ï¼Œå› ä¸ºrpcçš„clientéƒ½æ²¡æœ‰å…¬ç½‘ipï¼Œå› æ­¤åœ¨rpc clientå¯åŠ¨æ—¶ä¼šè°ƒç”¨masterçš„streamé•¿è¿æ¥rpcï¼Œå»ºç«‹è¿æ¥åMasterå’ŒClienté€šè¿‡è¿™ä¸ªåŒ…é€šä¿¡
|   `-- server          # frpçš„æœåŠ¡ç«¯ï¼Œå³frpsï¼Œå¯ä»¥æ§åˆ¶frpsçš„å„ç§é…ç½®/å¼€å§‹ä¸åœæ­¢
|-- tunnel              # tunnelæ¨¡å—ï¼Œç”¨äºç®¡ç†tunnelï¼Œä¹Ÿå°±æ˜¯ç®¡ç†frpcå’ŒfrpsæœåŠ¡
|-- utils
|-- watcher             # å®šæ—¶è¿è¡Œçš„ä»»åŠ¡ï¼Œæ¯”å¦‚æ¯30ç§’æ›´æ–°ä¸€æ¬¡é…ç½®æ–‡ä»¶
`-- www
    |-- api
    |-- components # è¿™é‡Œé¢æœ‰ä¸€ä¸ªapitestç»„ä»¶ç”¨äºæµ‹è¯•
    |   `-- ui
    |-- lib
    |   `-- pb
    |-- pages
    |-- public
    |-- store
    |-- styles
    `-- types
</code></pre>
<h3 id="-">è°ƒè¯•å¯åŠ¨æ–¹å¼ï¼š</h3>

<ul>
<li>master: <code>go run cmd/*.go master</code><blockquote>
<p>client å’Œ server çš„å…·ä½“å‚æ•°è¯·å¤åˆ¶ master webui ä¸­çš„å†…å®¹</p>
</blockquote>
</li>
<li>client: <code>go run cmd/*.go client -i &lt;clientID&gt; -s &lt;clientSecret&gt;</code></li>
<li>server: <code>go run cmd/*.go server -i &lt;serverID&gt; -s &lt;serverSecret&gt;</code></li>
</ul>
<p>é¡¹ç›®é…ç½®æ–‡ä»¶ä¼šé»˜è®¤è¯»å–å½“å‰æ–‡ä»¶å¤¹ä¸‹çš„.envæ–‡ä»¶ï¼Œé¡¹ç›®å†…ç½®äº†æ ·ä¾‹é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥æŒ‰ç…§è‡ªå·±çš„éœ€æ±‚è¿›è¡Œä¿®æ”¹</p>
<p>è¯¦ç»†æ¶æ„è°ƒç”¨å›¾</p>
<p><img src="/images/frp-panel/callvis.svg" alt="structure"></p>
<h2 id="-">é¡¹ç›®ä½¿ç”¨è¯´æ˜</h2>
<p>frp-panelå¯é€‰dockerå’Œç›´æ¥è¿è¡Œæ¨¡å¼éƒ¨ç½²ï¼Œç›´æ¥éƒ¨ç½²è¯·åˆ°releaseä¸‹è½½æ–‡ä»¶ï¼š<a href="https://github.com/VaalaCat/frp-panel/releases">release</a></p>
<p>å¯åŠ¨è¿‡åé»˜è®¤è®¿é—®åœ°å€ä¸º <a href="http://IP:9000">http://IP:9000</a></p>
<h3 id="docker">docker</h3>
<p>æ³¨æ„âš ï¸ï¼šclient å’Œ server çš„å¯åŠ¨æŒ‡ä»¤å¯èƒ½ä¼šéšç€é¡¹ç›®æ›´æ–°è€Œæ”¹å˜ï¼Œè™½ç„¶åœ¨é¡¹ç›®è¿­ä»£æ—¶ä¼šæ³¨æ„å‰åå…¼å®¹ï¼Œä½†ä»éš¾ä»¥å®Œå…¨é€‚é…ï¼Œå› æ­¤ client å’Œ server çš„å¯åŠ¨æŒ‡ä»¤ä»¥ master ç”Ÿæˆä¸ºå‡†</p>

<ul>
<li>master   </li>
</ul>

<pre><code class="lang-bash">docker run -d -p 9000:9000 \
    -p 9001:9001 \
    -v /opt/frp-panel:/data \
    -e APP_GLOBAL_SECRET=your_secret \ # Masterçš„secretæ³¨æ„ä¸è¦æ³„æ¼ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„æ˜¯é€šè¿‡Masterç”Ÿæˆçš„
    -e MASTER_RPC_HOST=0.0.0.0 \
    vaalacat/frp-panel
</code></pre>

<ul>
<li>client   </li>
</ul>

<pre><code class="lang-bash">docker run -d -p your_port:your_port \
    vaalacat/frp-panel client -s xxx -i xxx # åœ¨master WebUIå¤åˆ¶çš„å‚æ•°
</code></pre>

<ul>
<li>server   </li>
</ul>

<pre><code class="lang-bash">docker run -d -p your_port:your_port \
    -p æœåŠ¡å™¨å¼€æ”¾ç«¯å£70011:æœåŠ¡å™¨å¼€æ”¾ç«¯å£7001 \
    -p æœåŠ¡å™¨å¼€æ”¾ç«¯å£8000-8100:æœåŠ¡å™¨å¼€æ”¾ç«¯å£8000-8100 \
    vaalacat/frp-panel server -s xxx -i xxx # åœ¨master WebUIå¤åˆ¶çš„å‚æ•°
</code></pre>
<h3 id="-linux-">ç›´æ¥è¿è¡Œ(Linux)</h3>

<ul>
<li>master   </li>
</ul>

<pre><code>APP_GLOBAL_SECRET=your_secret MASTER_RPC_HOST=0.0.0.0 frp-panel master
</code></pre>

<ul>
<li>client   </li>
</ul>

<pre><code>frp-panel client -s xxx -i xxx # åœ¨master WebUIå¤åˆ¶çš„å‚æ•°
</code></pre>

<ul>
<li>server</li>
</ul>

<pre><code>frp-panel server -s xxx -i xxx # åœ¨master WebUIå¤åˆ¶çš„å‚æ•°
</code></pre>
<h3 id="-windows-">ç›´æ¥è¿è¡Œ(Windows)</h3>
<p>åœ¨ä¸‹è½½çš„å¯æ‰§è¡Œæ–‡ä»¶åŒåæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ª <code>.env</code> æ–‡ä»¶(æ³¨æ„ä¸è¦æœ‰åç¼€å)ï¼Œç„¶åè¾“å…¥ä»¥ä¸‹å†…å®¹ä¿å­˜åè¿è¡Œå¯¹åº”å‘½ä»¤ï¼Œæ³¨æ„ï¼Œclientå’Œserverçš„å¯¹åº”å‚æ•°éœ€è¦åœ¨webé¡µé¢å¤åˆ¶</p>

<ul>
<li>master: <code>frp-panel-amd64.exe master</code>
<pre><code>APP_GLOBAL_SECRET=your_secret
MASTER_RPC_HOST=IP
DB_DSN=data.db
</code></pre>
</li>
</ul>
<p>client å’Œ server è¦ä½¿ç”¨åœ¨ master WebUIå¤åˆ¶çš„å‚æ•°</p>

<ul>
<li><p>client: <code>frp-panel-amd64.exe client -s xxx -i xxx</code></p>
</li>
<li><p>server: <code>frp-panel-amd64.exe server -s xxx -i xxx</code></p>
</li>
</ul>
<h3 id="-">é…ç½®è¯´æ˜</h3>
<p><a href="https://github.com/VaalaCat/frp-panel/blob/main/conf/settings.go">settings.go</a> æ–‡ä»¶
è¿™é‡Œæœ‰è¯¦ç»†çš„é…ç½®å‚æ•°è§£é‡Šï¼Œéœ€è¦è¿›ä¸€æ­¥ä¿®æ”¹é…ç½®è¯·å‚è€ƒè¯¥æ–‡ä»¶</p>
<h3 id="-">ä¸€äº›å›¾ç‰‡</h3>
<p><img src="/images/frp-panel/platform_info.png" alt="">
<img src="/images/frp-panel/login.png" alt="">
<img src="/images/frp-panel/register.png" alt="">
<img src="/images/frp-panel/clients_menu.png" alt="">
<img src="/images/frp-panel/server_menu.png" alt="">
<img src="/images/frp-panel/create_client.png" alt="">
<img src="/images/frp-panel/create_server.png" alt="">
<img src="/images/frp-panel/edit_client.png" alt="">
<img src="/images/frp-panel/edit_client_adv.png" alt="">
<img src="/images/frp-panel/edit_server.png" alt="">
<img src="/images/frp-panel/edit_server_adv.png" alt=""></p>
<h2 id="-">æœ€å</h2>
<p>å¼€å‘è¿™ä¸ªé¡¹ç›®èŠ±äº†ä¸€æ•´ä¸ªå‘¨æœ«ï¼Œå®åœ¨æ˜¯æœ‰ç‚¹çƒ§æ—¶é—´ï¼Œä¸è¿‡ç›®å‰è¿˜æœ‰å¾ˆå¤šåŠŸèƒ½ï¼Œä¾‹å¦‚å¤šç”¨æˆ·ç®¡ç†ç­‰è¿˜æ²¡æœ‰å®Œå–„ï¼Œåé¢çœ‹é¡¹ç›®æœ‰æ²¡æœ‰äººç”¨å†æ…¢æ…¢æå§ï½</p>
]]></description><link>https://vaala.cat/posts/frp-panel-doc</link><guid isPermaLink="true">https://vaala.cat/posts/frp-panel-doc</guid><pubDate>Sun, 14 Jan 2024 13:57:19 GMT</pubDate></item><item><title><![CDATA[Vorkerå¼€å‘ç¬”è®°-è‡ªå»ºçš„äº‘å‡½æ•°å¹³å°]]></title><description><![CDATA[<p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/VaalaCat/vorker">https://github.com/VaalaCat/vorker</a></p>
<h2 id="-">å¼•è¨€</h2>
<p>åšå®¢çœ‹èµ·æ¥æœ‰ä¸€å¹´æ²¡æ›´æ–°å•¦ï¼ŒåŠ å…¥è·³ä¸åŠ¨å…¬å¸è¿‡åçœŸçš„è·³ä¸åŠ¨äº†QwQã€‚æœ€è¿‘ç¢ç£¨ç€è¿˜æ˜¯è¯¥å†™ç‚¹ä»€ä¹ˆå…å¾—è®©å¤§å®¶ä»¥ä¸ºæˆ‘èµ›åšå¤±è¸ªï¼Œè¿™æ¬¡çš„é¡¹ç›®æˆ‘ç»™å®ƒå–åä¸ºVokerã€‚å…¶åŸºäºCloudflareå…¬å¸å¼€æºçš„<a href="https://github.com/cloudflare/workerd">Workerd</a>ï¼Œè¿™ä¸ªWorkerdå°±æ˜¯CFçŸ¥åäº§å“<a href="https://workers.cloudflare.com/">Cloudflare Worker</a>çš„å¼•æ“ã€‚ä½†CFä»…å¼€æºäº†å¼•æ“ï¼Œå¦å¤–çš„èƒ½åŠ›å¦‚è¿è¡Œç¼–æ’ã€KVå­˜å‚¨ã€æ§åˆ¶é¢æ¿ã€ç‰ˆæœ¬æ§åˆ¶ã€æ—¥å¿—ç»Ÿè®¡æ”¶é›†ã€ç”¨æˆ·æƒé™ç­‰åŠŸèƒ½å¹¶æ²¡æœ‰å…¬å¼€ï¼Œæ‰€ä»¥éœ€è¦è‡ªå·±å®Œå–„è¿™æ–¹é¢çš„èƒ½åŠ›ã€‚</p>
<p>ä»£ç å’Œä½¿ç”¨è¯´æ˜å‚è€ƒGithubï¼š<a href="https://github.com/VaalaCat/vorker">Vorker</a></p>
<p>è¿™æ¬¡è¦åšçš„å°±æ˜¯Cloudflare Workerçš„è‡ªæ‰˜ç®¡(Self Hosting)ç‰ˆæœ¬ï¼Œä»£ç æ‰§è¡Œèƒ½åŠ›ç”±CFå¼€æºworkerdç»„ä»¶æä¾›ï¼Œå…¶ä½™èƒ½åŠ›è‡ªè¡Œå¼€å‘å®Œæˆ</p>
<blockquote>
<p>ä¹‹æ‰€ä»¥å«Vokerï¼Œå› ä¸ºåšå‡ºæ¥çš„ä¸œè¥¿ç›¸æ¯”Workerä¸å®Œå–„ï¼Œæ‰€ä»¥æŠŠWç ä¸€åŠå°±å˜æˆVäº†ï¼Œ<del>åŒæ—¶åšçš„æ—¶å€™äººå¿«æ²¡äº†ï¼Œæ‰€ä»¥å°‘äº†ä¸ªrï¼ˆqqqq</del>ä»¥å‰å«vokerï¼Œç°åœ¨æ‹‰äº†ä¸€ä¸ªsemså’Œæˆ‘ä¸€èµ·ï¼Œäººè¿˜æ˜¯åœ¨çš„</p>
</blockquote>
<h2 id="-">éœ€æ±‚ä»‹ç»</h2>
<p>æ­¤æ¬¡çš„éœ€æ±‚æ˜¯å®Œæˆä¸€ä¸ªè‡ªæ‰˜ç®¡ç‰ˆæœ¬çš„Workerï¼Œä¸»è¦åŸå› æ˜¯ï¼š</p>

<ol>
<li>CFçš„workeråŸŸåè¢«å¢™ï¼Œè™½ç„¶å¯ä»¥ç”¨è‡ªå·±çš„åŸŸåï¼Œä½†æ€»ä½“æ¥è¯´å›½å†…ä½¿ç”¨ä½“éªŒå¹¶ä¸å¥½</li>
<li>Free Planæœ‰é™é¢ï¼Œè™½ç„¶æˆ‘ç”¨ä¸å®Œï¼Œä½†æ˜¯çœ‹ç€è¿˜æ˜¯ä¸çˆ½ï¼Œæ¯•ç«Ÿè‡ªå·±æœ‰æœºå™¨å¯ä»¥ä¸é™é¢çš„å‘¢</li>
<li>å¯å®šåˆ¶èƒ½åŠ›ç¼ºå¤±ï¼ŒCFæ¯•ç«Ÿæ˜¯CFï¼Œä¸ªäººç”¨æˆ·çš„ä¸€äº›featureè¿˜æ˜¯è€ƒè™‘ä¸å¤ªå®Œå–„ï¼Œç”¨ç€æœ‰ç‚¹æ†‹å±ˆï¼Œè‡ªå·±å†™å°±èƒ½å¾ˆè½»æ¾çš„å’ŒGitä»“åº“é…åˆä¸ŠCI/CD</li>
<li>æˆ‘è‡ªå·±å¼€æ–°é¡¹ç›®çš„æ—¶å€™ä¸ç”¨å†™ä¸€å¤§å †çš„ç¯å¢ƒé…ç½®è„šæœ¬å’ŒCICDé…ç½®ï¼Œæå¤§æå‡äº†æˆ‘å¼€å‘æ•ˆç‡å’Œä½“éªŒï¼Œå¯¹äºä¸€äº›å°é¡¹ç›®ï¼Œæ— éœ€å†é…ç½®åå‘ä»£ç†ã€è·¯ç”±è§„åˆ™ã€è¿è¡Œçš„èŠ‚ç‚¹ä¿¡æ¯ã€SSLã€ç‹¬ç«‹æ•°æ®åº“è¡¨ç­‰ï¼ŒåŒæ—¶Debugä¹Ÿæ–¹ä¾¿å¾—å¤šï¼Œä¸ç”¨åœ¨ç¼–è¯‘ã€ä¸Šçº¿ç­‰ç­‰ç­‰</li>
</ol>
<h2 id="-">æ˜ç¡®ç›®æ ‡</h2>
<p>å¯¹äºä»¥ä¸Šéœ€æ±‚ï¼Œéœ€è¦è¾¾åˆ°çš„ä¸€äº›ç›®æ ‡å¦‚ä¸‹</p>

<ol>
<li>éœ€è¦ä¸€ä¸ªæ§åˆ¶é¢çš„APIï¼Œèƒ½å¤Ÿè½»æ¾æ§åˆ¶æ¯å¥—ä»£ç çš„éƒ¨ç½²æƒ…å†µ</li>
<li>éœ€è¦åœ¨æ§åˆ¶é¢åšåå‘ä»£ç†ï¼Œå°†Workerdçš„æ¯ä¸€ä¸ªworkeræ˜ å°„åˆ°å¯¹åº”çš„åŸŸå</li>
<li>éœ€è¦ä¸€ä¸ªWebUIï¼Œæ–¹ä¾¿éšæ—¶æ›´æ–°ä»£ç ï¼ˆæ‰‹æœºç­‰</li>
<li>éœ€è¦HA ï¼ˆHigh Availabilityï¼‰éƒ¨ç½²ï¼Œä¸ç„¶ä¸€å°æœºå™¨åäº†æ‰€æœ‰ä»£ç éƒ½å¯„äº†</li>
<li>éœ€è¦æ”¯æŒå¤–éƒ¨åå‘ä»£ç†ï¼Œæ¯•ç«Ÿè‡ªå·±å†™çš„è‚¯å®šæ²¡æœ‰Traefik Nginxç­‰èƒ½åŠ›å¼º</li>
</ol>
<h2 id="-">æ¶æ„è®¾è®¡</h2>
<p>å¯¹äºä»¥ä¸Šç›®æ ‡ï¼Œè®¾è®¡å¦‚ä¸‹æ¶æ„ï¼š</p>
<p><img src="/images/vorker/vorkerarch.svg" alt=""></p>
<h2 id="-">å®ç°</h2>
<h3 id="-">åç«¯</h3>
<p>å‰ç«¯é‡‡ç”¨Next.js/React/TailwindCSS/semi.desginï¼Œåç«¯Gin/Golang/Workerdã€‚</p>
<p>æœ€å¼€å§‹è¿˜åœ¨æ€è€ƒå¦‚ä½•å»æ§åˆ¶workerdæƒ³äº†å¾ˆé•¿æ—¶é—´ï¼ŒæŸä¸€å¤©çœ‹åˆ°Giteaé‡Œæ“ä½œgitæ˜¯ç›´æ¥cmd.runï¼Œæˆ‘ç›´æ¥å°±æ˜¯éœ‡æƒŠğŸ¤¯ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿç›´æ¥å¼€æŠ„ğŸ˜ï¼Œæ‰€ä»¥workerçš„å¯åŠ¨å‚æ•°æ˜¯åœ¨Vorkeré‡Œæ‹¼èµ·æ¥çš„ã€‚</p>
<p>Workerdè¿è¡Œé…ç½®æ–‡ä»¶åŸºäº<a href="https://capnproto.org/">capnp</a>ï¼Œè¿™ä¸ªIDLè¶…çº§å¿«ï¼Œå› ä¸ºä»–çš„ç»“æ„å®Œå…¨å’Œå†…å­˜å¸ƒå±€ä¸€è‡´ã€‚ä»–æœ‰ä¸€ä¸ª<a href="https://github.com/capnproto/go-capnp">Goå®ç°</a>ï¼Œæœ¬æ¥æ‰“ç®—æ˜¯ç”¨è¿™ä¸ªåº“æŒ‰ç…§<a href="https://github.com/cloudflare/workerd/blob/main/src/workerd/server/workerd.capnp">Workerdçš„Schema</a>å»ç”ŸæˆWorkerdçš„é…ç½®æ–‡ä»¶ï¼Œä½†æ˜¯çœ‹äº†ä¸€çœ¼å‘ç°Workerdçš„é…ç½®å¹¶æ²¡æœ‰å›ºå®šä¸‹æ¥ï¼Œæ‰€ä»¥æš‚æ—¶å…ˆå†™ä¸ªç®€å•çš„templateç”Ÿæˆé…ç½®æ–‡ä»¶ã€‚</p>
<p>å¯¹äºapiéƒ¨åˆ†æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œå°±æ˜¯CRUDï¼Œè¦æ³¨æ„ä¸€ç‚¹æ˜¯Vorkerå°†Workerdçš„æ¯ä¸€ä¸ªWorkeræ‰€æœ‰ä¿¡æ¯éƒ½å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œç„¶åé€šè¿‡æ•°æ®åº“é‡Œçš„ä¿¡æ¯ç”Ÿæˆé…ç½®æ–‡ä»¶ç»™Workerdä½¿ç”¨ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­å¯èƒ½ä¼šå‡ºç°ä¸ä¸€è‡´ï¼ŒVorkerè®¾è®¡ä¸Šæ˜¯ä»¥æ•°æ®åº“ä¸ºå”¯ä¸€å¯ä¿¡æ•°æ®æºï¼Œå¯¹æ–‡ä»¶åªæœ‰å†™å…¥æ“ä½œï¼Œæ²¡æœ‰è¯»å–ï¼Œå› æ­¤å®šæ—¶è°ƒç”¨æ¥å£åˆ·æ–°æ–‡ä»¶å³å¯ã€‚</p>
<p>Workerdçš„å®šä¹‰ç”¨protobufï¼Œå®šä¹‰å¦‚ä¸‹</p>

<pre><code>syntax = &quot;proto3&quot;;
package defs;
option go_package = &quot;../entities&quot;;

message Worker {
    string UID = 1; // Unique id of the worker
    string ExternalPath = 2; // External path of the worker, default is &#39;/&#39;
    string HostName = 3; // the workerd runner host name, default is &#39;localhost&#39;
    string NodeName = 4; // for future HA feature, default is &#39;default&#39;
    int32 Port = 5; // worker&#39;s port, platfrom will obtain free port while init worker
    string Entry = 6; // worker&#39;s entry file, default is &#39;entry.js&#39;
    bytes Code = 7; // worker&#39;s code
    string Name = 8; // worker&#39;s name, also use at worker routing, must be unique, default is UID
}

// one WorkerList for one workerd instance
message WorkerList { 
    string ConfName = 1; // the name of the workerd instance
    repeated Worker Workers = 2;
    string NodeName = 3; // workerd runner host name, for HA
}
</code></pre>
<p>è·¯ç”±éƒ¨åˆ†åç»­éœ€è¦æ”¯æŒå¤–éƒ¨åå‘ä»£ç†ï¼Œåœ¨Traefikä¸­æ³¨å†Œè·¯ç”±å®ç°æ›´å¤šåŠŸèƒ½ã€‚ä¹Ÿéœ€è¦æ”¯æŒå†…éƒ¨åå‘ä»£ç†ï¼Œå®ç°å¦‚ä¸‹</p>

<pre><code class="lang-go">package proxy

import (
    &quot;fmt&quot;
    &quot;net/http/httputil&quot;
    &quot;net/url&quot;
    &quot;strings&quot;
    &quot;voker/entities&quot;
    &quot;voker/models&quot;

    &quot;github.com/gin-gonic/gin&quot;
    &quot;github.com/sirupsen/logrus&quot;
)

func init() {
    proxy := entities.GetProxy()
    workerRecords, err := models.AdminGetAllWorkers()
    if err != nil {
        logrus.Errorf(&quot;failed to get all workers, err: %v&quot;, err)
    }
    workerList := &amp;entities.WorkerList{
        Workers: models.Trans2Entities(workerRecords),
    }
    proxy.InitProxyMap(workerList)
}

func Endpoint(c *gin.Context) {
    host := c.Request.Host
    name := strings.Split(host, &quot;.&quot;)[0]
    port := entities.GetProxy().GetProxyPort(name)
    if port == 0 {
        c.JSON(404, gin.H{&quot;code&quot;: 1, &quot;error&quot;: &quot;not found&quot;})
        return
    }

    remote, err := url.Parse(fmt.Sprintf(&quot;http://localhost:%v&quot;, port))
    if err != nil {
        logrus.Panic(err)
    }

    c.Request.URL.Path = c.Copy().Param(&quot;name&quot;)
    proxy := httputil.NewSingleHostReverseProxy(remote)
    proxy.ServeHTTP(c.Writer, c.Request)
}
</code></pre>
<p>åœ¨å¯åŠ¨æ—¶å°±å°†è·¯ç”±æ•°æ®å†™åˆ°å†…å­˜é‡Œã€‚</p>
<h3 id="-">å‰ç«¯</h3>
<p>å‰ç«¯ç”±@semsæ¨èä½¿ç”¨äº†semidesignï¼Œæ˜¯å­—èŠ‚æ–°å¼€æºçš„ç»„ä»¶åº“ï¼Œä¸å¾—ä¸è¯´ç¡®å®å¥½çœ‹ï¼Œè¿˜èƒ½ç”¨è®¾è®¡ç¨¿å…ˆå‡ºä¸€ä¸ªä»£ç åˆç¨¿ï¼Œå±äºæ˜¯åç«¯ç¦éŸ³ã€‚</p>
<p>æ“äº†å››ä¸ªé¡µé¢ï¼Œä½¿ç”¨å¸¸è§çš„ä¾§è¾¹æ +header+å†…å®¹å¸ƒå±€</p>

<ul>
<li>adminï¼Œä¸»è¦ç”¨äºworkeråˆ—è¡¨ã€ç”¨æˆ·è®¾ç½®ç­‰</li>
<li>registerï¼Œç”¨æˆ·æ³¨å†Œ</li>
<li>loginï¼Œç”¨æˆ·ç™»å½•</li>
<li>editorï¼Œç¼–è¾‘ä»£ç ã€è®¾ç½®worker</li>
</ul>
<p>ä»£ç ç¼–è¾‘å™¨ç”¨äº†vscodeåŒæ¬¾çš„monacoï¼Œå¼„ä¸Šäº†jsçš„ä»£ç è¡¥å…¨ï¼Œå†™èµ·æ¥æ„Ÿè§‰è¿˜æ˜¯ä¸é”™çš„ã€‚</p>
<h2 id="-">è¿è¡Œ</h2>

<ol>
<li><p>é¦–å…ˆè¦ä¸‹è½½Workerdçš„binary</p>
</li>
<li><p>docker</p>

<pre><code class="lang-bash">docker run -dit --name=vorker \
    -e DB_PATH=/path/to/workerd/db.sqlite \
    -e WORKERD_DIR=/path/to/workerd \
    -e WORKERD_BIN_PATH=/bin/workerd \
    -e DB_TYPE=sqlite \
    -e WORKER_LIMIT=10000 \
    -e WORKER_PORT=8080 \
    -e API_PORT=8888 \
    -e LISTEN_ADDR=0.0.0.0 \
    -e WORKER_DOMAIN_SUFFIX=example.com \ # concat with worker name and scheme
    -e SCHEME=http \ # external scheme
    -e ENABLE_REGISTER=false \
    -e COOKIE_NAME=authorization \
    -e COOKIE_AGE=21600 \
    -e COOKIE_DOMAIN=localhost # change it to your domain \
    -e JWT_SECRET=xxxxxxx \
    -e JWT_EXPIRETIME=6 \
    -p 8080:8080 \
    -p 8888:8888 \
    -v $PWD/workerd:/path/to/workerd \
    -v $PWD/workerd-linux-64:/bin/workerd \
    vaalacat/vorker:latest
</code></pre>
</li>
<li><p>è®¿é—®<code>http://localhost:8888</code>è¿›å…¥æ§åˆ¶å°ï¼Œåœ¨headeré‡Œçš„Hostå¸¦ä¸Šworkerçš„åå­—å³å¯</p>
</li>
</ol>
<h3 id="-">è¿è¡Œæˆªå›¾</h3>
<p>ç®¡ç†ç•Œé¢</p>
<p><img src="/images/vorker/vorkeradmin.png" alt=""></p>
<p>Workerç¼–è¾‘ç•Œé¢</p>
<p><img src="/images/vorker/vorkeredit.png" alt=""></p>
<p>Workerè¿è¡Œç•Œé¢</p>
<p><img src="/images/vorker/vorkerexec.png" alt=""></p>
<h2 id="-">æ€»ç»“</h2>
<p>å¿™æ¯•è®¾å¿™äº†ä¸€é˜µï¼Œåœ¨è¿™ä¸ªé¡¹ç›®ä¸Šå¹¶æ²¡æœ‰æŠ•å…¥å¾ˆå¤šçš„æ—¶é—´ï¼Œè¯•ç”¨äº†æœ€æ–°çš„ç”¨äºç”Ÿäº§çš„å‰ç«¯æŠ€æœ¯æ ˆï¼Œè‡³ä»Šè¿˜æœ‰HAã€Logã€Metricsã€å¤–éƒ¨åå‘ä»£ç†ç­‰æœªå®Œå…¨å®Œæˆï¼Œä½†æ˜¯è¿™ä¸œè¥¿åœ¨æœªå®Œæˆçš„çŠ¶æ€å°±å¾ˆå¥½ç”¨äº†ï¼Œçœ‹èµ·æ¥æœªæ¥çš„Serverless+WASMè¿˜ä¼šå¤§æ”¾å¼‚å½©ã€‚é¡ºä¾¿åœ¨è¿™æ®µæ—¶é—´è¿˜çœ‹äº†<a href="https://github.com/lagonapp/lagon">lagon</a>ã€<a href="https://github.com/windmill-labs/windmill">Windmill</a>ã€<a href="https://github.com/labring/laf">laf</a>ç­‰serverless functionå¹³å°ï¼Œä¼¼ä¹å¯¹Serverlessæœ‰äº†ä»€ä¹ˆå¥‡å¦™çš„æ„Ÿè§‰ğŸ˜³ï¼Œå¸Œæœ›ä»¥åVorkerä¹Ÿèƒ½å’ŒçŸ¥åå¼€æºäº§å“ä¸€æ ·å‘å±•ä¸‹å»ï½ï½ï½</p>
<p>Vorkerå·²ç»æˆä¸ºäº†Vaalaâ˜ï¸çš„APIå±‚çš„é‡è¦éƒ¨åˆ†ï¼Œåç»­æˆ‘ä¹Ÿä¼šé™†ç»­å†™ä¸€äº›å…³äºå¦‚ä½•ä»è£¸é‡‘å±æœºå™¨æ„å»ºä¸€ä¸ªä¼ä¸šçº§çš„äº‘å¹³å°çš„æ–‡ç« ï¼Œä¾‹å¦‚ç”¨æˆ–è€…ä¸ç”¨K8Sçš„ç»Ÿä¸€ç½‘å…³ã€SCMã€é…ç½®ä¸­å¿ƒã€å®¹å™¨è°ƒåº¦ã€ServiceMeshç­‰ï¼Œå°½è¯·æœŸå¾…ï¼</p>
<h2 id="-">å‚è€ƒ</h2>

<ul>
<li><a href="https://github.com/hisorange/opwork">https://github.com/hisorange/opwork</a></li>
<li><a href="https://gobyexample.com/writing-files">https://gobyexample.com/writing-files</a></li>
<li><a href="https://colobu.com/2020/12/27/go-with-os-exec/#%E5%B7%A5%E4%BD%9C%E8%B7%AF%E5%BE%84">https://colobu.com/2020/12/27/go-with-os-exec/#%E5%B7%A5%E4%BD%9C%E8%B7%AF%E5%BE%84</a></li>
<li><a href="https://ijayer.github.io/post/tech/code/golang/20171010-go-template/#%E9%81%8D%E5%8E%86slice-1">https://ijayer.github.io/post/tech/code/golang/20171010-go-template/#%E9%81%8D%E5%8E%86slice-1</a></li>
<li><a href="https://github.com/cloudflare/workerd">https://github.com/cloudflare/workerd</a></li>
<li><a href="https://github.com/gin-gonic/gin/issues/1143">https://github.com/gin-gonic/gin/issues/1143</a></li>
</ul>
]]></description><link>https://vaala.cat/posts/Vorkerå¼€å‘ç¬”è®°-è‡ªå»ºçš„äº‘å‡½æ•°å¹³å°</link><guid isPermaLink="true">https://vaala.cat/posts/Vorkerå¼€å‘ç¬”è®°-è‡ªå»ºçš„äº‘å‡½æ•°å¹³å°</guid><pubDate>Sat, 03 Jun 2023 22:58:48 GMT</pubDate></item><item><title><![CDATA[å¼‚åœ°å¤šäººåœ¨çº¿ç”µå½±é™¢]]></title><description><![CDATA[<h2 id="-">å¼•è¨€</h2>
<p>æœ€è¿‘ä¸€æ®µæ—¶é—´å’Œnpyå¼‚åœ°ï¼Œç»å¸¸å°±ä¼šæœ‰ä¸€äº›ä¸€èµ·çœ‹è§†é¢‘çš„éœ€æ±‚ï¼Œç„¶é¹…å¸‚é¢ä¸Šè§†é¢‘å…±äº«çš„äº§å“è¦ä¹ˆæ˜¯å› ä¸ºç‰ˆæƒçš„åŸå› èµ„æºä¸è¶³ï¼Œè¦ä¹ˆæ˜¯å› ä¸ºäº§å“å®šä½æ²¡æœ‰åŠæ³•é¡¾åŠåˆ°è¿™ç§å°ä¼—å¸‚åœºéœ€æ±‚ã€‚</p>
<p>ä½œä¸ºä¸€ä¸ªå¼€å‘ï¼Œé‡åˆ°è¿™ç§é—®é¢˜å½“ç„¶æ˜¯å†³å®šè¦è‡ªå·±æ•²ä¸€ä¸ªå‡ºæ¥å’¯ã€‚</p>
<h2 id="-">æ¼”ç¤º</h2>
<p>  æ¼”ç¤ºç«™ç‚¹ï¼š<a href="https://movie.vaala.cat/">https://movie.vaala.cat/</a> ä¸ä¿è¯å¯ç”¨æ€§ï¼Œéœ€è¦çš„åŒå­¦è¯·è‡ªè¡Œæ­å»ºã€‚
  æµ‹è¯•ç”¨è§†é¢‘åœ°å€ï¼š<a href="https://media.w3.org/2010/05/sintel/trailer.mp4">https://media.w3.org/2010/05/sintel/trailer.mp4</a></p>
<p> <img src="https://minio.vaala.cloud/vaalacloud/tmp/mac-and-mac.gif" alt="ç”µè„‘å’Œç”µè„‘"></p>
<p> <img src="https://minio.vaala.cloud/vaalacloud/tmp/mac-and-phone.gif" alt="ç”µè„‘å’Œæ‰‹æœº"></p>
<h2 id="-">äº§å“è°ƒç ”</h2>
<p>åœ¨å‡†å¤‡è‡ªå·±åŠ¨æ‰‹ä¹‹å‰ï¼Œé¦–å…ˆè¦åˆ†æå¸‚é¢ä¸Šå·²æœ‰çš„æ–¹æ¡ˆæœ‰å“ªäº›ï¼Œéœ€è¦å¸å–ç»éªŒå’Œåˆ›æ„ä½œä¸ºè‡ªå·±é¡¹ç›®çš„featureã€‚</p>
<p>åœ¨çŸ¥ä¹å’Œv2 reddit ä»¥åŠæ²¹ç®¡ä¸Šè°ƒç ”åå‘ç°ï¼Œå¼‚åœ°æ‹åœ¨çº¿è§†é¢‘åŒæ­¥è¿™ç§éœ€æ±‚ä¸€èˆ¬æœ‰å¦‚ä¸‹å‡ ç§è§£å†³æ–¹æ¡ˆï¼š</p>

<ul>
<li>æ‰“ä¸ªç”µè¯å–Š321ï¼Œæœ€ç®€å•æœ€ç›´æ¥çš„æ–¹æ¡ˆï¼Œä¸è¿‡é‡åˆ°è§†é¢‘å¡é¡¿æˆ–è€…æƒ³è¦æš‚åœå’Œåˆ†äº«ç²¾å½©é•œå¤´å°±æœ‰äº›éº»çƒ¦äº†</li>
</ul>

<ul>
<li>å„ç§<strong>å›½å¤–äº§å“</strong>ï¼Œä¾‹å¦‚<a href="https://sync-tube.de/">syncTube</a>ï¼Œ<a href="https://twoseven.xyz">twoseven</a>ç­‰ï¼Œè¿™ç±»äº§å“èƒ½å¤ŸåŒæ­¥çš„æ˜¯Netflixæˆ–YouTubeä¸Šçš„æµåª’ä½“ï¼Œåœ¨å›½å†…å‡ ä¹æ²¡æœ‰å—ä¼—ï¼Œå¯¹æˆ‘æ¥è¯´ä¹Ÿæ˜¯æ¯«æ— ç”¨å¤„ã€‚</li>
<li>å„ç§<strong>å›½å†…äº§å“</strong>ï¼Œä¾‹å¦‚BiliBiliä¸€èµ·çœ‹ï¼Œå¾®å…‰ç­‰äº§å“ï¼Œè¿™ç±»äº§å“ä¹Ÿå¤§éƒ½å› ä¸ºç‰ˆæƒå’Œäº§å“å®šä½åŸå› ï¼Œå°†è§†é¢‘æºé™åˆ¶åœ¨ç«™å†…ï¼Œæœ‰äº›æœ¬åœ°çš„ç”µå½±æˆ–å…¶å®ƒå°ç«™æ‰¾åˆ°çš„èµ„æºå¹¶ä¸èƒ½åŒæ­¥ã€‚</li>
<li>ç°æœ‰<strong>å›½å†…å¼€æºé¡¹ç›®</strong>ï¼Œå„ä½å¤§ä½¬å¼€å‘çš„<a href="https://github.com/Justineo/coplay">Coplay</a>ï¼Œ<a href="https://github.com/LouisYLWang/Sync-Sofa">SyncSofa</a>ï¼Œå‰è€…è®¸ä¹…æœªç»´æŠ¤çœ‹èµ·æ¥æ˜¯ä¸å¯ç”¨çš„çŠ¶æ€ï¼ˆä½œè€…æ²¡å¼‚åœ°äº†ä¼¼ä¹å°±ä¸ç»´æŠ¤äº†å²‚å¯ä¿®ï¼‰ï¼Œåè€…æ˜¯ä½œä¸ºæµè§ˆå™¨æ’ä»¶è¿è¡Œï¼Œéš¾ä»¥åœ¨æ‰‹æœºä¸Šå®ç°åŠŸèƒ½ï¼ˆå¹¶ä¸”è¿™ä¸ªä½œè€…ä¼¼ä¹ä¹Ÿæ˜¯ç»“æŸå¼‚åœ°äº†å²‚å¯ä¿®ï¼‰å¹¶ä¸”äºŒè€…å¹³å°æ‰€é™ï¼Œä¹Ÿåªèƒ½è§‚çœ‹ç‰¹å®šå¹³å°ç­‰å†…å®¹ã€‚</li>
<li>ç°æœ‰<strong>å›½å¤–å¼€æºé¡¹ç›®</strong>ï¼Œ<a href="https://syncplay.pl/">SyncPlay</a> ï¼Œäº§å“ä¾æ‰˜äºVLCï¼Œä¹Ÿåªèƒ½åœ¨ç”µè„‘ä¸Šè¿è¡Œï¼Œéš¾ä»¥ç§»æ¤åˆ°æ‰‹æœºä¸Šã€‚</li>
<li>å¯¹ç°æœ‰äº§å“çš„é­”æ”¹åˆ©ç”¨ï¼Œä¾‹å¦‚æœ‰äº›åŒå­¦ç”¨TeamViewerï¼Œè…¾è®¯ä¼šè®®ï¼ŒZoomç­‰è§†é¢‘ä¼šè®®å’Œè¿œç¨‹åä½œäº§å“æ¥å®ç°ä¸€èµ·è§‚çœ‹ï¼Œå°è¯•è¿‡åå‘ç°å› ä¸ºå›½å†…ç½‘ç»œç¯å¢ƒé—®é¢˜ï¼Œä¸Šè¡Œå¸¦å®½ä¸è¶³ï¼Œå¾ˆéš¾è¾¾åˆ°ç†æƒ³çš„æ•ˆæœã€‚</li>
<li>é¢å¤–åˆ†ä¸€ä¸ªç±»ï¼šğŸiOSåœ¨15ä¸­å…¬å¸ƒäº†Universal Controlå’ŒSharePlayï¼Œå…¶ç†å¿µéå¸¸ç¬¦åˆéœ€æ±‚ï¼Œä½†ç°åœ¨å¹¶ä¸èƒ½çœ‹å‡ºå®ƒçš„æ¸¸æˆï¼Œè®¾å¤‡ä¹Ÿæ˜¯é™å®šåœ¨äº†è‹¹æœç”Ÿæ€å†…ï¼Œå¹¶ä¸”ä¹Ÿé™å®šäº†èµ„æºæºå¤´ï¼Œä¹Ÿå¸Œæœ›åº“å…‹èƒ½æŠŠè¿™ä¸ªäº§å“å‘æ‰¬å…‰å¤§å§ã€‚</li>
</ul>
<p>æ‰€ä»¥ä»å·²æœ‰çš„äº§å“å¯ä»¥çœ‹å‡ºï¼Œæˆ‘çš„éœ€æ±‚æ˜¯ï¼š</p>

<ul>
<li>æ“ä½œç®€å•ï¼Œæ— éœ€ç™»é™†æ³¨å†Œï¼Œç‚¹å‡»å³ç”¨ï¼Œæé«˜npyçš„ä½¿ç”¨ä½“éªŒï¼Œäº§å“åŠ›å¼ºã€‚</li>
<li>å¯ä»¥ç›´æ¥è½½å…¥äº’è”ç½‘æµåª’ä½“èµ„æºï¼Œèµ„æºä¸°å¯Œï¼Œè½½å…¥ç®€å•ï¼Œè·¨å¹³å°ï¼Œé€Ÿåº¦å¿«ä½“éªŒè‰¯å¥½ã€‚</li>
<li>è·¨å¹³å°ï¼Œæ— è®ºnpyç”¨çš„æ˜¯ä»€ä¹ˆè®¾å¤‡ï¼Œä¸ç”¨å®‰è£…appå’Œæ’ä»¶ï¼Œå¯ä»¥æ— æ„Ÿæ¥å…¥ï¼Œè¿›åº¦æ¡æ‹–åˆ°å“ªå°±æ˜¯å“ªã€‚</li>
</ul>
<h2 id="-">æŠ€æœ¯é€‰å‹</h2>
<p>ä»ä¸Šé¢çš„éœ€æ±‚æ¥çœ‹ï¼Œæˆ‘æœ€å¼€å§‹æƒ³åˆ°çš„æ˜¯åšä¸€ä¸ªç›´æ’­æ¨æµæ§åˆ¶æœåŠ¡å™¨ï¼Œç”±èµ„æºæœåŠ¡å™¨å°†è§†é¢‘æµé€šè¿‡hlsæˆ–æ˜¯rtmpåè®®ä¼ é€åˆ°æµè§ˆå™¨ç›´æ¥æ’­æ”¾ï¼Œè·¨å¹³å°ï¼Œæ“ä½œç®€å•ï¼ŒæŠ€æœ¯æˆç†Ÿã€‚ä½†æ˜¯å®é™…æµ‹è¯•åå‘ç°è¿™ç§äº§å“æ²¡æœ‰é«˜è´¨é‡CDNå’ŒOSSæ”¯æ’‘éš¾ä»¥è¾¾åˆ°å¥½çš„ä½“éªŒï¼Œå»¶è¿Ÿå·¨å¤§ä¸”ä¸å¯é ï¼Œä½“éªŒéå¸¸ä¸å¥½ã€‚</p>
<p>é‡æ–°æ€è€ƒåæˆ‘é€‰æ‹©ä½¿ç”¨WebæŠ€æœ¯æ ˆï¼Œåšä¸€ä¸ªPWAï¼Œä¸€ä¸ªé“¾æ¥ç‚¹å¼€å°±èƒ½ç”¨ï¼Œèµ„æºé“¾æ¥ç²˜è´´è¿›å»å°±å¯ä»¥å¼€å§‹ã€‚å¹¶ä¸”WebæŠ€æœ¯æ ˆä¸­æœ‰WebRTCå’ŒWebSocketè¿™ç§é•¿é“¾æ¥å’Œæ•°æ®å¯¹ç­‰å…±äº«æŠ€æœ¯ï¼Œéå¸¸ç¬¦åˆæˆ‘ä»¬çš„éœ€æ±‚ã€‚</p>
<p>åŸºäºä¸ªäººæƒ…å†µï¼Œæˆ‘é€‰æ‹©çš„æŠ€æœ¯æ ˆä¸º</p>
<p>å‰ç«¯ï¼š</p>

<ul>
<li>ä½¿ç”¨VideoJSåŠ è½½ç¬¬ä¸‰æ–¹è§†é¢‘ï¼ŒAPIä¸°å¯Œï¼Œæœ‰äº‹ä»¶é©±åŠ¨å¯ä»¥å®ç°è¿œç«¯è§¦å‘æœ¬åœ°å‡½æ•°æ‰§è¡Œã€‚å¯ä»¥åŠ è½½mp4å’Œwebmä»¥åŠoggç¼–ç çš„ç¬¬ä¸‰æ–¹æµåª’ä½“ã€‚</li>
<li>ä½¿ç”¨WebSocketä½œä¸ºå‰åç«¯ä¸šåŠ¡æ•°æ®äº¤æ¢åè®®ï¼Œé•¿è¿æ¥ç¨³å®šå¯é ï¼Œäº‹ä»¶é©±åŠ¨ï¼Œå®¹æ˜“å®ç°å¤šäººæ•°æ®åŒæ­¥ï¼ˆä½†ç›®å‰çœ‹æ¥æœ‰æ•°æ®å†²çªï¼ŒåæœŸå‡†å¤‡æ¢ç”¨CRDTæ•°æ®ç»“æ„ï¼‰ã€‚</li>
<li>ä½¿ç”¨Vueæ„å»ºPWAï¼Œå‰åç«¯åˆ†ç¦»ï¼Œå¿«é€Ÿæ›´æ¢æœåŠ¡ç«¯é™ä½å»¶è¿Ÿæå‡ä½“éªŒã€‚</li>
<li>Vuetifyï¼šMaterial Designï¼ŒåŠ¨ç”»ä¸°å¯Œï¼Œç”¨æˆ·ä½“éªŒå¥½ã€‚</li>
</ul>
<p>åç«¯ï¼š</p>

<ul>
<li>Golangï¼šå¤§é“è‡³ç®€ã€‚</li>
<li>Gin/Socketioï¼šç°æˆçš„ï¼Œå¥½ç”¨ã€‚</li>
</ul>
<p>å¯ä»¥å‘ç°æ´»éƒ½ç”¨åœ¨å‰ç«¯äº†ï¼ˆæ¯•ç«Ÿåç«¯æ˜¯ç»™æˆ‘è‡ªå·±çœ‹ï¼Œå‰ç«¯æ˜¯è¦ç»™npyçš„ï¼Œæ‰“ç®—åšä¸€ä¸ªæ— çŠ¶æ€æœåŠ¡ï¼Œè½»é‡ï¼Œæ‰€ä»¥å°±ä¸ç”¨æ•°æ®åº“äº†ï¼Œå¯åŠ¨ä¸€æ¬¡ç”¨ä¸€æ¬¡ã€‚</p>
<h2 id="-">é€»è¾‘è®¾è®¡</h2>
<p>å¯¹npyæ¥è¯´ï¼Œæƒ³çš„æ˜¯éšæ—¶å¯ä»¥æš‚åœï¼Œéšæ—¶å¯ä»¥æ‹–è¿›åº¦æ¡ï¼Œè€Œä¸”ç”±äºç½‘ç»œç¯å¢ƒï¼Œå¥¹ç½‘ç»œç»å¸¸å¡ï¼Œæ‰€ä»¥è¦åšè‡ªåŠ¨åŒæ­¥å’Œè‡ªåŠ¨é‡è¿ï¼Œç”¨äº‹ä»¶é©±åŠ¨çš„é€»è¾‘æˆ‘ä»¬å¾ˆå¥½å°±èƒ½è®¾è®¡å‡ºåŸå‹ï¼Œæˆ‘ä»¬è®¾è®¡ä»¥ä¸‹äº‹ä»¶å¹¶å®šä¹‰äº‹ä»¶çš„è¡Œä¸ºï¼š</p>

<ul>
<li><code>getUsers</code>ï¼šå®¢æˆ·ç«¯æ¯æ¬¡å‘èµ·è¯¥è¯·æ±‚ï¼ŒæœåŠ¡å™¨ä¾¿å›å¤<code>allUsers</code> äº‹ä»¶å¹¶é™„ä¸Šæ‰€æœ‰ç”¨æˆ·ã€‚</li>
<li><code>allUsers</code>ï¼šå®¢æˆ·ç«¯æ¥æ”¶åˆ°è¯¥äº‹ä»¶ï¼Œéœ€è¦æ›´æ–°æœ¬åœ°æ˜¾ç¤ºçš„ç”¨æˆ·åˆ—è¡¨ã€‚</li>
<li><code>Null</code>ï¼šå®¢æˆ·ç«¯å‘èµ·<code>getUsers</code> è¯·æ±‚ï¼Œå¦‚æœè¯¥æˆ¿é—´æ²¡æœ‰ç”¨æˆ·ï¼Œåˆ™è¿”å›<code>Null</code> ï¼Œå‰ç«¯åˆ‡æ¢åˆ°æˆ¿é—´åˆ›å»ºæ¨¡å¼ã€‚</li>
<li><code>time</code>ï¼šå®¢æˆ·ç«¯å‘èµ·è¯¥è¯·æ±‚ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°æ—¶é—´åå°†æœåŠ¡ç«¯ä¿å­˜çš„è¯¥å®¢æˆ·ç«¯æ—¶é—´è¿›åº¦è®°å½•ï¼Œå¹¶æŸ¥æ‰¾å½“å‰æˆ¿é—´æ‰€æœ‰å®¢æˆ·ç«¯çš„æ—¶é—´è¿›åº¦ï¼Œæ‰¾å‡ºæœ€å¤§å’Œæœ€å°å€¼ï¼Œä½¿ç”¨<code>sync</code> äº‹ä»¶å°†ä¸¤ä¸ªæ—¶é—´å¹¿æ’­åˆ°è¯¥æˆ¿é—´ã€‚</li>
<li><code>sync</code>ï¼šå®¢æˆ·ç«¯æ”¶åˆ°è¯¥äº‹ä»¶ï¼Œéœ€è¦è‡ªè¡Œé€‰æ‹©æ›´æ–°åˆ°æœ€å°è¿˜æ˜¯æœ€å¤§æ—¶é—´ï¼Œå¹¶ä¸”ä¸ºäº†é˜²æ­¢ç½‘ç»œæ³¢åŠ¨é€ æˆçš„å°å»¶è¿Ÿï¼Œåªæœ‰åœ¨å·®è·å¤§äºä¸€å®šå€¼æ—¶æ‰é€‰æ‹©è¿›è¡Œæ›´æ–°ï¼Œè¿™é‡Œæˆ‘é€‰æ‹©åªå‘å‰æ›´æ–°ã€‚</li>
<li><code>setTime</code>ï¼šå®¢æˆ·ç«¯å‘é€è¯¥è¯·æ±‚ï¼Œå®¢æˆ·ç«¯åŒæ—¶æ¥æ”¶è¯¥äº‹ä»¶ï¼Œå½“è¿›åº¦æ¡è¢«æ‹–åŠ¨ï¼Œ<code>VideoJS</code> çš„<code>timeupdate</code> ä¼šè¶…è¿‡250æ¯«ç§’ï¼Œæ¯å½“è¶…è¿‡1ç§’å°±å‘é€è¯¥è¯·æ±‚åˆ°æœåŠ¡ç«¯ï¼Œå¹¶é™„ä¸Šæ–°çš„æ—¶é—´ï¼ŒæœåŠ¡ç«¯å¯¹è¯¥è¯·æ±‚è¿›è¡Œå¹¿æ’­ï¼Œè®©æˆ¿é—´å†…æ‰€æœ‰å®¢æˆ·ç«¯éƒ½è®¾å®šåˆ°è¯¥æ—¶é—´ï¼Œ</li>
<li><code>getTime</code>ï¼šå®¢æˆ·ç«¯å‘é€è¯¥è¯·æ±‚ï¼Œå®¢æˆ·ç«¯åŒæ—¶æ¥æ”¶è¯¥äº‹ä»¶ï¼Œå‘é€æ—¶ä¼šç”±æœåŠ¡ç«¯è¿›è¡Œå¹¿æ’­ï¼Œæ”¶åˆ°è¯¥è¯·æ±‚çš„æ‰€æœ‰å®¢æˆ·ç«¯ä¼šå›å¤<code>time</code> äº‹ä»¶ï¼Œè§¦å‘æœåŠ¡ç«¯å¹¿æ’­çš„<code>sync</code>ï¼Œä»è€Œå®ç°æˆ¿é—´è¿›åº¦åŒæ­¥ã€‚</li>
</ul>
<p>çœ‹èµ·æ¥ç•¥æœ‰æ··ä¹±ï¼Œæˆ‘ç”šè‡³ä¸çŸ¥é“èƒ½ä¸èƒ½è·‘èµ·æ¥ï¼ˆæœ€åç¡®å®æ˜¯è·‘èµ·æ¥äº†ç”šè‡³è·‘çš„ä¸é”™ã€‚</p>
<p>ä¸è¿‡è¿™åªæ˜¯ä¸€ä¸ªåŸå‹ï¼ŒåæœŸæ‰“ç®—ä½¿ç”¨CRDTè¿›è¡Œé‡æ„ã€‚</p>
<h2 id="-">ä»£ç å®ç°</h2>
<p>è¿™é‡Œä¸å¯¹ä»£ç åšè¯¦ç»†ä»‹ç»ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥ç›´æ¥æŸ¥çœ‹ä»“åº“ï¼Œå‰ç«¯å°±å‡ ç™¾è¡Œï¼Œåç«¯ä¹Ÿå¾ˆçŸ­ï¼Œåªæœ‰ä¸¤ç™¾å¤šè¡Œã€‚</p>
<h2 id="-">ä½¿ç”¨å¸®åŠ©</h2>
<p>å¤§å®¶æœ€å…³å¿ƒçš„ä¹Ÿè®¸æ˜¯è¿™ä¸ªå§ï¼Œå› ä¸ºæ˜¯ä¸€ä¸ªWebé¡¹ç›®ï¼Œæ‰€ä»¥éœ€è¦ä¸€å°æœåŠ¡å™¨ï¼Œè¿™æ˜¯è‚¯å®šçš„å§ï¼Œå¹¶ä¸”èµ„æºçš„æ¥æºæ˜¯ç¬¬ä¸‰æ–¹æµåª’ä½“ï¼Œæ‰€ä»¥æµç•…ç¨‹åº¦å¹¶ä¸å–å†³äºæœåŠ¡å™¨çš„å¸¦å®½ï¼ŒæœåŠ¡å™¨åªç”¨æ¥åšè¿›åº¦æ¡æ•°æ®çš„åŒæ­¥ï¼Œå¯ä»¥è¯´è´Ÿè½½éå¸¸çš„ä½ï¼Œ10Kbç½‘ç»œéƒ½ä¸ä¼šæœ‰é—®é¢˜ï¼Œä¹Ÿå¯ä»¥å®ç°æ¯«ç§’çº§çš„åŒæ­¥ã€‚ä¸ºäº†æ–¹ä¾¿éƒ¨ç½²ï¼Œæˆ‘å°†é¡¹ç›®ç¼–è¯‘åˆ°äº†Releaseï¼Œéœ€è¦çš„åŒå­¦å¯ä»¥è‡ªè¡Œä¸‹è½½ï¼Œï¼ˆè¿™é‡Œå¯ä»¥å¼€å¼€è„‘æ´ä½¿ç”¨æ ‘è“æ´¾æˆ–è€…è½¯è·¯ç”±åšDDNSæˆ–è€…å†…ç½‘ç©¿é€è¿è¡Œèµ·æ¥ï¼Œå¦‚æœå®åœ¨å¤ªæ‡’ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ç»™å‡ºçš„æµ‹è¯•url</p>
<p>éƒ¨ç½²æ–¹å¼æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯ä½¿ç”¨Dockerï¼Œå¦ä¸€ç§æ˜¯æ‰‹åŠ¨éƒ¨ç½²ï¼Œå»ºè®®ä½¿ç”¨Dockeréƒ¨ç½²</p>
<h3 id="docker-">Dockeré¢„ç¼–è¯‘é•œåƒ</h3>

<pre><code class="lang-bash">docker run -d -p 9999:9999 -e PORT=9999 -e ALLOW_ORIGIN=http://localhost:9999 --name=test vaalacat/movie-sync
</code></pre>
<p>ä¸€å…±æœ‰ä¸¤ä¸ªç¯å¢ƒå˜é‡ï¼Œ<code>PORT</code> æ˜¯æœåŠ¡ç«¯å£ï¼Œ<code>ALLOW_ORIGIN</code> æ˜¯æµè§ˆå™¨ä¸­è®¿é—®çš„é“¾æ¥(ç”±äºåå‘ä»£ç†ï¼Œå¯èƒ½å’Œç«¯å£ä¸ä¸€è‡´ï¼Œå¦‚æœä¸ç†è§£ï¼Œé‚£å°±ç›´æ¥ç”¨<code>http://ip:ç«¯å£</code>)ã€‚</p>
<h3 id="-">æ‰‹åŠ¨éƒ¨ç½²</h3>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦åˆ†åˆ«ä¸‹è½½å‰ç«¯å’Œåç«¯æ–‡ä»¶ï¼Œ</p>

<ul>
<li>å‰ç«¯ï¼š<a href="https://github.com/VaalaCat/movie-sync">https://github.com/VaalaCat/movie-sync</a></li>
<li>åç«¯ï¼š<a href="https://github.com/VaalaCat/movie-sync-server">https://github.com/VaalaCat/movie-sync-server</a></li>
</ul>
<p>ä¸‹è½½å®Œæˆååœ¨æœåŠ¡ç«¯åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç»“æ„ä¸ºï¼š</p>

<pre><code>ProjectDir
â”œâ”€â”€ asset # ä¸‹è½½å¥½çš„å‰ç«¯æ–‡ä»¶æ”¾åœ¨è¿™é‡Œå—
â”‚   â”œâ”€â”€ css
â”‚   â”œâ”€â”€ favicon.ico
â”‚   â”œâ”€â”€ fonts
â”‚   â”œâ”€â”€ index.html
â”‚   â””â”€â”€ js
â””â”€â”€ movie-sync-server # åç«¯æ–‡ä»¶æ”¾åœ¨è¿™é‡Œ
    â”œâ”€â”€ .env # è¯¥æ–‡ä»¶éœ€è¦æ‰‹åŠ¨åˆ›å»º
    â””â”€â”€ movie-sync-server
</code></pre>
<p>ç„¶åæˆ‘ä»¬ç¼–è¾‘åç«¯æ–‡ä»¶å¤¹ä¸­çš„<code>.env</code> æ–‡ä»¶ï¼Œå†…å®¹ä¸ºï¼š</p>

<pre><code>PORT=8000
ALLOW_ORIGIN=http://localhost:8000
</code></pre>
<p>è¿™é‡Œçš„ç«¯å£å°±æ˜¯ç¨‹åºå°†ç›‘å¬çš„ç«¯å£ï¼Œåé¢çš„<code>ALLOW_ORIGIN</code>è¦æ”¹ä¸º<strong>å®¢æˆ·ç«¯æµè§ˆå™¨ä¸­è®¿é—®æ—¶æ˜¾ç¤ºçš„åœ°å€</strong>ï¼Œä¸ç”¨æ·»åŠ åé¢çš„è·¯å¾„ï¼Œå› ä¸ºæœ‰äº›æ—¶å€™ä¼šç»è¿‡Nginxä¹‹ç±»çš„åå‘ä»£ç†ï¼Œæ‰€ä»¥é“¾æ¥å¯èƒ½ä¼šå˜æˆå…¶ä»–æ ·å­ã€‚ä¿®æ”¹å®Œæˆåä¿å­˜æ–‡ä»¶ï¼Œç„¶åå°±å¯ä»¥ç›´æ¥è¿è¡Œäº†ï¼Œåˆ‡æ¢åˆ°åç«¯æ–‡ä»¶å¤¹ï¼š</p>

<pre><code class="lang-bash">cd ProjectDir/movie-sync-server
chmod +x movie-sync-server &amp;&amp; ./movie-sync-server
</code></pre>
<p>å¦‚æœä½ çœ‹åˆ°äº†è¿™æ ·çš„ä¸œè¥¿ï¼Œè¯´æ˜å·²ç»æˆåŠŸè¿è¡Œ</p>

<pre><code>[GIN-debug] [WARNING] Running in &quot;debug&quot; mode. Switch to &quot;release&quot; mode in production.
 - using env:   export GIN_MODE=release
 - using code:  gin.SetMode(gin.ReleaseMode)

[GIN-debug] GET    /socket.io/*any           --&gt; github.com/gin-gonic/gin.WrapH.func1 (2 handlers)
[GIN-debug] POST   /socket.io/*any           --&gt; github.com/gin-gonic/gin.WrapH.func1 (2 handlers)
[GIN-debug] GET    /                         --&gt; main.main.func12 (2 handlers)
[GIN-debug] GET    /movie                    --&gt; github.com/gin-gonic/gin.(*RouterGroup).StaticFile.func1 (2 handlers)
[GIN-debug] HEAD   /movie                    --&gt; github.com/gin-gonic/gin.(*RouterGroup).StaticFile.func1 (2 handlers)
[GIN-debug] GET    /movie/login              --&gt; github.com/gin-gonic/gin.(*RouterGroup).StaticFile.func1 (2 handlers)
[GIN-debug] HEAD   /movie/login              --&gt; github.com/gin-gonic/gin.(*RouterGroup).StaticFile.func1 (2 handlers)
[GIN-debug] GET    /movie/css/*filepath      --&gt; github.com/gin-gonic/gin.(*RouterGroup).createStaticHandler.func1 (2 handlers)
[GIN-debug] HEAD   /movie/css/*filepath      --&gt; github.com/gin-gonic/gin.(*RouterGroup).createStaticHandler.func1 (2 handlers)
[GIN-debug] GET    /movie/js/*filepath       --&gt; github.com/gin-gonic/gin.(*RouterGroup).createStaticHandler.func1 (2 handlers)
[GIN-debug] HEAD   /movie/js/*filepath       --&gt; github.com/gin-gonic/gin.(*RouterGroup).createStaticHandler.func1 (2 handlers)
[GIN-debug] GET    /movie/room/*any          --&gt; main.main.func13 (2 handlers)
[GIN-debug] [WARNING] You trusted all proxies, this is NOT safe. We recommend you to set a value.
Please check https://pkg.go.dev/github.com/gin-gonic/gin#readme-don-t-trust-all-proxies for details.
[GIN-debug] Listening and serving HTTP on :8000
</code></pre>
<p>ç°åœ¨è®¿é—®é“¾æ¥<code>http://localhost:8000</code> å³å¯å¼€å§‹ä½¿ç”¨</p>
]]></description><link>https://vaala.cat/posts/å¼‚åœ°å¤šäººåœ¨çº¿ç”µå½±é™¢</link><guid isPermaLink="true">https://vaala.cat/posts/å¼‚åœ°å¤šäººåœ¨çº¿ç”µå½±é™¢</guid><pubDate>Sun, 17 Apr 2022 17:30:52 GMT</pubDate></item><item><title><![CDATA[åœ¨Alfredä¸­ä¸æ»‘çš„æœç´¢ç¾¤æ™–NASä¸­çš„æ–‡ä»¶]]></title><description><![CDATA[<h2 id="-">å¼•è¨€</h2>
<p>é¦–å…ˆç»™å‡ºä»“åº“åœ°å€</p>

<ul>
<li><a href="https://github.com/VaalaCat/synology-alfred">synology-alfred</a></li>
</ul>
<p>åœ¨ä½¿ç”¨äº†ä¸€æ®µæ—¶é—´çš„ MacOS Spotlight æœç´¢è¿‡åè¢«å…¶ä¸æ»‘çš„ä½“éªŒä¿˜è·ï¼Œå¹¶ä¸”ä½œä¸ºä¸€ä¸ªå¤šå¹´çš„ç¾¤æ™– Synology NAS ç”¨æˆ·ï¼Œå…¶å†…ç½®çš„ Universal Search åŠŸèƒ½æ›´æ˜¯åŠå…¶å¼ºå¤§ï¼Œè¿™ä¸ªåŠŸèƒ½ä½¿ç”¨ ElasticSearch æä¾›æœç´¢æœåŠ¡ï¼Œä½¿ç”¨ Apache Tika è¿›è¡Œæ•°æ®æå–ï¼Œå¯ä»¥å¯¹ NAS ä¸­çš„æ‰€æœ‰æ–‡ä»¶å†…å®¹<strong>æ³¨æ„æ˜¯å†…å®¹</strong>è¿›è¡Œæ£€ç´¢ï¼ŒåŠŸèƒ½æ˜¯éå¸¸çš„å¼ºå¤§ã€‚</p>
<p>æ‰€ä»¥æˆ‘èŒç”Ÿäº†å°† Universal Search æ¬åˆ°ç”µè„‘ä¸Šçš„æƒ³æ³•ï¼Œç»è¿‡è°ƒç ”å‘ç°éå¸¸çš„å›°éš¾<del>å…¶å®æ˜¯æˆ‘å¤ªèœ</del>ï¼Œå°†è¿™ä¹ˆé‡å‹çš„æœåŠ¡è¿è¡Œåœ¨ç¬”è®°æœ¬ç”µè„‘ä¸Šå¸¸é©»æ˜¯ä¸ç°å®çš„ï¼Œç»è¿‡ä¸€ç•ªæŸ¥æ‰¾å‘ç°äº†å¾ˆå¤šèµ„æ–™ï¼Œæœ€åå†³å®šä½¿ç”¨ Alfred ä¸ NAS è¿›è¡Œäº¤äº’ä»è€Œå¿«é€Ÿæ£€ç´¢æ–‡ä»¶ã€‚</p>
<h2 id="-">ä¸»è¦æµç¨‹</h2>
<p>ç”±äºä»¥å‰æ²¡æœ‰æ¥è§¦è¿‡ Workflow å¼€å‘ï¼Œæ‰€ä»¥è¿™æ¬¡æ˜¯è·Ÿç€å®˜æ–¹çš„ Example èµ°äº†ä¸€éï¼Œç»“æœå‘ç°å®˜æ–¹çš„ workflow-python ç«Ÿç„¶ä¸æ”¯æŒ Python3ï¼ˆå®˜æ–¹æ–‡æ¡£è¯´é©¬ä¸Šå°±è¦å¼€å‘æ–°ç‰ˆæœ¬ Workflowï¼‰ï¼Œå¹¶ä¸”æˆ‘æ‰¾åˆ°çš„ Synology API åªæ”¯æŒ Python3 ï¼Œçœ‹èµ·æ¥æ˜¯æˆ‘å’Œ Python äº”è¡Œä¸åˆ ğŸ˜‡ğŸ˜‡ğŸ˜‡</p>
<p>åœ¨ä¸€ç•ªè°·æ­Œåæ‰¾åˆ°äº†ç¬¬ä¸‰æ–¹å¼€å‘è€…ç»´æŠ¤çš„æ”¯æŒ Python3 çš„ç‰ˆæœ¬ï¼ŒæˆåŠŸçš„è·‘èµ·æ¥äº†ï½ï½</p>
<h3 id="-api">å…¨å±€æœç´¢API</h3>
<p>æ‰¾åˆ°çš„ API ä¸­å¹¶æ²¡æœ‰å®ç°å…¨å±€æœç´¢çš„ APIï¼Œå¼€å§‹ä»¥ä¸ºæ˜¯ FileStation ä¸­çš„æœç´¢ğŸ”ï¼Œå°è¯•äº†ä¸€ç•ªå‘ç°æ²¡æœ‰ä½œç”¨ğŸ˜ƒã€‚</p>
<p>ä½œä¸ºä¸€ä¸ªå¼€æºçš„å…±äº§ä¸»ä¹‰è€…ï¼Œåœ¨åŸå§‹ä»“åº“ä¸­å®ç°äº†è®¤è¯æµç¨‹ï¼Œé‚£æˆ‘ä»¬ç›´æ¥ç³Šä¸€ä¸ªå°±è¡Œï¼Œé¦–å…ˆæˆ‘ä»¬è¿›è¡Œä¸€ä¸ªåŒ…çš„æŠ“ï¼Œçœ‹çœ‹æœç´¢æ—¶è°ƒç”¨çš„åˆ°åº•æ˜¯å“ªä¸ªAPI</p>
<p> <img src="https://img.vaala.cloud/images/2022/01/29/sourcebb830e8d0bc52e37.jpg" alt=""></p>
<p>å‘ç° API åç§°æ˜¯ <code>SYNO.Finder.FileIndexing.Search</code>ç„¶åæŠ„ä¸€ä¸ªç™»é™†æµç¨‹</p>

<pre><code class="lang-python">def __init__(self, ip_address, port, username, password, secure=False, cert_verify=False, dsm_version=7, debug=True, otp_code=None):
    self.session = auth.Authentication(ip_address, port, username, password, secure, cert_verify, dsm_version, debug, otp_code)
    self.session.login(&#39;Finder&#39;)
    self.session.get_api_list(&#39;Finder&#39;)
    self.request_data = self.session.request_data
    self.finder_list = self.session.app_api_list
    self._sid = self.session.sid
    self.base_url = self.session.base_url
    if debug is True:
        print(&#39;You are now logged in!&#39;)
</code></pre>
<p>å¯ä»¥åœ¨ <code>finder_list</code> ä¸­çœ‹åˆ°æ‰€æœ‰çš„ APIï¼Œå¯ä»¥å‘ç°å¯¹æˆ‘ä»¬æœ‰ç”¨çš„å°±ä¸€ä¸ª <code>SYNO.Finder.FileIndexing.Search</code> ï¼Œç„¶åæŠŠå‰é¢æŠ“åˆ°çš„åŒ…è¿›è¡Œä¸€ä¸ªæŠ„</p>

<pre><code class="lang-javascript">def search(self, keyword):
    api_name = &#39;SYNO.Finder.FileIndexing.Search&#39;
    info=self.finder_list[api_name]
    api_path = info[&#39;path&#39;]

    req_param={
        &quot;query_serial&quot;:1,
        &quot;indice&quot;:&#39;[]&#39;,
        &quot;keyword&quot;:keyword,
        &quot;orig_keyword&quot;:keyword,
        &quot;criteria_list&quot;:&#39;[]&#39;,
        &quot;from&quot;:0,
        &quot;size&quot;:10,
        &quot;fields&quot;:&#39;[&quot;SYNOMDAcquisitionMake&quot;,&quot;SYNOMDAcquisitionModel&quot;,&quot;SYNOMDAlbum&quot;,&quot;SYNOMDAperture&quot;,&quot;SYNOMDAudioBitRate&quot;,&quot;SYNOMDAudioTrackNumber&quot;,&quot;SYNOMDAuthors&quot;,&quot;SYNOMDCodecs&quot;,&quot;SYNOMDContentCreationDate&quot;,&quot;SYNOMDContentModificationDate&quot;,&quot;SYNOMDCreator&quot;,&quot;SYNOMDDurationSecond&quot;,&quot;SYNOMDExposureTimeString&quot;,&quot;SYNOMDExtension&quot;,&quot;SYNOMDFSCreationDate&quot;,&quot;SYNOMDFSName&quot;,&quot;SYNOMDFSSize&quot;,&quot;SYNOMDISOSpeed&quot;,&quot;SYNOMDLastUsedDate&quot;,&quot;SYNOMDMediaTypes&quot;,&quot;SYNOMDMusicalGenre&quot;,&quot;SYNOMDOwnerUserID&quot;,&quot;SYNOMDOwnerUserName&quot;,&quot;SYNOMDRecordingYear&quot;,&quot;SYNOMDResolutionHeightDPI&quot;,&quot;SYNOMDResolutionWidthDPI&quot;,&quot;SYNOMDTitle&quot;,&quot;SYNOMDVideoBitRate&quot;,&quot;SYNOMDIsEncrypted&quot;]&#39;,
        &quot;file_type&quot;:&quot;&quot;,
        &quot;search_weight_list&quot;:&#39;[{&quot;field&quot;:&quot;SYNOMDWildcard&quot;,&quot;weight&quot;:1},{&quot;field&quot;:&quot;SYNOMDTextContent&quot;,&quot;weight&quot;:1},{&quot;field&quot;:&quot;SYNOMDSearchFileName&quot;,&quot;weight&quot;:8.5,&quot;trailing_wildcard&quot;:&quot;true&quot;}]&#39;,
        &quot;sorter_field&quot;:&quot;relevance&quot;,
        &quot;sorter_direction&quot;:&quot;asc&quot;,
        &quot;sorter_use_nature_sort&quot;:&quot;false&quot;,
        &quot;sorter_show_directory_first&quot;:&quot;true&quot;,
        &quot;api&quot;:&quot;SYNO.Finder.FileIndexing.Search&quot;,
        &quot;method&quot;:&quot;search&quot;,
        &quot;version&quot;:1
    }

    return self.request_data(api_name, api_path, req_param)
</code></pre>
<p>è¿™æ ·æˆ‘ä»¬çš„æœç´¢åŠŸèƒ½å°±æ˜¯å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯æŠŠè¾“å‡ºä¸¢åˆ° Alfred ä¸­ã€‚</p>
<h3 id="workflow-">Workflowä¸‹æ‹‰èœå•</h3>
<p>ä½†ä¼¼ä¹è¿™ä½å¼€å‘è€…ç»´æŠ¤çš„åŒ… <code>workflow.add_item</code> ä¸èµ·ä½œç”¨ï¼Ÿé‚£å°±æ¢ä¸ªæ–¹æ³•ï¼Œè™½ç„¶åœ¨ add åå¹¶æ²¡æœ‰å‡ºç°æ–°çš„å†…å®¹ï¼Œä½† Alfred ä¼šæ¥å—ç¬¦åˆè§„èŒƒçš„ xml æˆ– json æ ¼å¼çš„è¾“å‡ºä½œä¸ºä¸‹æ‹‰èœå•çš„é€‰é¡¹ã€‚</p>

<pre><code class="lang-python">for item in res:
        t=&quot;&quot;
        if item[&#39;SYNOMDIsDir&#39;] != &#39;y&#39;:
            t=&quot;/&quot;+item[&quot;SYNOMDFSName&quot;]
        result = {
            &quot;title&quot;: item[&quot;SYNOMDFSName&quot;],
            &quot;subtitle&quot;: item[&quot;SYNOMDSharePath&quot;],
            &quot;arg&quot;: item[&quot;SYNOMDSharePath&quot;].replace(t,&quot;&quot;),
            &quot;autocomplete&quot;: &quot;&quot;,
            &quot;icon&quot;: {
                &quot;path&quot;: &quot;./icon.png&quot;
            }
        }
        dat.append(result)
    response = json.dumps({
        &quot;items&quot;: dat
    })
    sys.stdout.write(response)
</code></pre>
<p>è¿™æ ·å°±å¯ä»¥å°†æ ‡å‡†è¾“å‡ºä½œä¸ºä¸‹æ‹‰èœå•äº†ï¼Œæœ€åçœ‹çœ‹æ•ˆæœ</p>
<p> <img src="https://img.vaala.cloud/images/2022/01/29/source6694c0fb5b17946b.jpg" alt=""></p>
<p>å¯ä»¥çœ‹åˆ°3ï¼Œ4ï¼Œ5æ–‡ä»¶åå¹¶æ²¡æœ‰å‡ºç°ä¿¡æ¯è®ºï¼Œä½†å·²ç»åŒ¹é…åˆ°æ–‡ä»¶å†…å®¹äº†ï¼Œç„¶åæœ€ç»ˆæƒ³å®ç°çš„æ•ˆæœæ˜¯æŒ‰ä¸‹å›è½¦æ‰“å¼€å¯¹åº”æ–‡ä»¶ï¼Œä¸è¿‡è¿™é‡Œä¸å¤ªæ¸…æ¥šè¯¥ä½¿ç”¨ webAPI ä¸‹è½½æ–‡ä»¶å®ç°è¿˜æ˜¯ç›´æ¥åœ¨æŒ‚è½½åˆ°æœ¬åœ°çš„ç½‘ç»œç£ç›˜ä¸­æ‰“å¼€ï¼Œå°±æš‚æ—¶ä½¿ç”¨å›è½¦å¤åˆ¶ NAS ä¸­çš„æ–‡ä»¶è·¯å¾„ï¼Œé¡ºä¾¿æ‰“å¼€ FileStationï¼Œç›´æ¥ç²˜è´´è·¯å¾„å°±èƒ½è®¿é—®åˆ°æ–‡ä»¶äº†ï¼Œä¸ºäº†é˜²æ­¢è¯¯ä¸‹è½½ï¼Œå¦‚æœæœç´¢åˆ°çš„è·¯å¾„æ˜¯ä¸€ä¸ªæ–‡ä»¶çš„è¯ï¼Œè¿˜è¦åˆ é™¤æ‰æœ€åçš„æ–‡ä»¶åï¼Œä»¥å… FileStation è®¿é—®å‡ºé”™</p>
<h2 id="-">å‚è€ƒ</h2>

<ul>
<li><a href="https://github.com/N4S4/synology-api">synology-api</a></li>
<li><a href="https://github.com/NorthIsUp/alfred-workflow-py3">alfred-workflow-py3</a></li>
<li><a href="https://www.kaper.com/software/synology-universal-search-cli/">Synology Universal Search CLI</a></li>
<li><a href="https://stackoverflow.com/questions/62696185/python-download-file-from-synology-filestation-api">python download file from Synology FileStation API</a></li>
</ul>
]]></description><link>https://vaala.cat/posts/åœ¨Alfredä¸­ä¸æ»‘çš„æœç´¢ç¾¤æ™–NASä¸­çš„æ–‡ä»¶</link><guid isPermaLink="true">https://vaala.cat/posts/åœ¨Alfredä¸­ä¸æ»‘çš„æœç´¢ç¾¤æ™–NASä¸­çš„æ–‡ä»¶</guid><pubDate>Sat, 29 Jan 2022 17:56:49 GMT</pubDate></item><item><title><![CDATA[ä¿®å¤ MacOS TimeMachine çš„åŒæ­¥é”™è¯¯]]></title><description><![CDATA[<h2 id="-">å¼•è¨€</h2>
<p>ä½œä¸ºä¸€ä¸ªæ–°çš„ç™½ğŸç”¨æˆ·ï¼Œå¯¹äº TimeMachine å±äºåˆçˆ±åˆæ¨ï¼Œå…¶å®˜æ–¹æŒ‡å®šçš„å¤‡ä»½ç›®æ ‡ AirPort Time Capsule å®åœ¨æ˜¯è¿‡äºé«˜è´µï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©ä½¿ç”¨ä¸€ä¸ªæä¾› AFP æœåŠ¡çš„ NAS ä½œä¸ºå¤‡ä»½ç›®æ ‡ç£ç›˜ ï¼ˆSMB åè®®æ®è¯´ä¼šå‡ºç°ç¥ç§˜æ‰ç›˜é—®é¢˜ï¼‰</p>
<p>åœ¨å†…ç½‘ä¸­å¿«ä¹çš„ä½¿ç”¨å‡ å¤©åå‡ºäº†è¶Ÿé—¨ï¼Œæƒ³ç€ä½¿ç”¨ Wireguard è¿å›å†…ç½‘è·¯ç”±æ®µæ¥ç€å¤‡ä»½ã€‚ç†æƒ³éå¸¸çš„ä¸°æ»¡ï¼Œå®è·µå´å‡ºäº†é—®é¢˜ï¼Œåœ¨æŸä¸€æ¬¡å¤‡ä»½æ—¶æ„å¤–æ–­äº†ç½‘ï¼Œå›åˆ°å†…ç½‘ä¸­æŠ¥äº†å¦‚ä¸‹é”™è¯¯</p>

<pre><code>æ— æ³•è®¿é—®å¤‡ä»½ç£ç›˜æ˜ åƒâ€œVaalaçš„MacBook Pro.sparsebundleâ€ï¼ˆé”™è¯¯35ï¼‰ã€‚
</code></pre>
<p>åœ¨ Apple è®ºå›å’Œäº’è”ç½‘ä¸­æ‰¾åˆ°çš„éƒ½æ˜¯è®©æˆ‘æ¸…é™¤å¤‡ä»½é‡æ¥ï¼Œå°±åƒä¸‹é¢è¿™æ ·</p>
<blockquote>
<p><a href="https://discussionschinese.apple.com/thread/86190">https://discussionschinese.apple.com/thread/86190</a></p>
</blockquote>
<p>ä½†å¤‡ä»½ä¸ä¹…æ˜¯ä¸ºäº†é˜²æ­¢å‡ºé”™ï¼Ÿå†æ¥æ¸…ç†å‡ºé”™çš„å¤‡ä»½ä¹Ÿå¤ªæœ¬æœ«å€’ç½®äº†ï¼Œåˆ†æé—®é¢˜å‘ç”Ÿçš„æƒ…å†µåæˆ‘é€‰æ‹©é™ä½å¤‡ä»½é¢‘ç‡ï¼Œä½¿ç”¨ TimeMachineEditor é˜»æ­¢æ—¥é—´å¤‡ä»½ï¼Œå¹¶ä¸”å¤‡ä»½åªèƒ½åœ¨ Mac ä¸æ´»è·ƒæ—¶è¿›è¡Œã€‚ä¸å‡ºæ„å¤–ï¼Œå†æ¬¡è‹Ÿæ´»å‡ å¤©ååˆå‡ºç°äº†ç›¸åŒé”™è¯¯ï¼ŒåŸå› ç«Ÿç„¶æ˜¯ MacOS åœ¨ä¼‘çœ æ—¶ä¼šè‡ªåŠ¨æ–­å¼€ç½‘ç»œè¿æ¥å¯¼è‡´å¤‡ä»½å¤±è´¥ğŸ˜…ğŸ˜…ğŸ˜…ğŸ˜…ï¼Œåœ¨ç»è¿‡ä¸¤æ¬¡æ¸…ç©ºå¤‡ä»½åï¼ŒæŠ½äº†ä¸€ç‚¹æ—¶é—´æŸ¥æ‰¾ç›¸å…³èµ„æ–™ï¼Œå¾—åˆ°äº†æœ€ç»ˆçš„è§£å†³æ–¹æ¡ˆ</p>
<h2 id="-">æ­¥éª¤</h2>

<ol>
<li><p>é¦–å…ˆå…³é—­æ‰ TimeMachine ä¸­çš„è‡ªåŠ¨å¤‡ä»½ï¼Œå…¶å®ƒä¸ TimeMachine ç›¸å…³çš„ç¨‹åºä¾‹å¦‚ TimeMachineEditor ä¹Ÿå°½é‡ç»ˆæ­¢ï¼Œåœ¨ç»ˆæ­¢åå°½é‡é‡å¯ä¸€æ¬¡ä¿è¯æ²¡æœ‰è¿›ç¨‹å ç”¨ç›¸å…³èµ„æºã€‚ </p>
</li>
<li><p>æ‰¾åˆ°å¤‡ä»½ç£ç›˜ä¸­çš„ <code>sparsebundle</code> æ–‡ä»¶ï¼Œå°†ä¸‹é¢å‘½ä»¤çš„è·¯å¾„æ›¿æ¢æ‰ã€‚</p>
</li>
</ol>

<pre><code class="lang-bash">hdiutil attach -nomount /path/to/sparsebundleFile
</code></pre>

<ol>
<li>å¾—åˆ°å¤‡ä»½ç£ç›˜åç§°ï¼Œä¼šæœ‰å¾ˆå¤šä¸ªç£ç›˜ï¼Œæ‰¾åˆ°æ ¼å¼ä¸º <code>/dev/diskNs2</code> çš„ç£ç›˜ï¼Œ<code>N</code> ä¸ºæ•°å­—ï¼Œ<code>s2</code> ä¸ºç¬¬äºŒåˆ†åŒºï¼Œå¤‡æ³¨ä¸º <code>Apple_APFS</code>ï¼Œæˆ‘è¿™é‡Œæ˜¯ <code>/dev/disk4s2</code>ï¼Œæ¥ä¸‹æ¥å¯¹è¯¥åˆ†åŒºçš„å¤‡ä»½è¿›è¡Œæ£€æŸ¥ã€‚</li>
</ol>

<pre><code class="lang-bash"># è¦æ³¨æ„è¿™é‡Œçš„ç£ç›˜å‰é¢åŠ äº†ä¸€ä¸ªrä»£è¡¨rawåŸå§‹ä¸ç¼“å­˜è®¾å¤‡
fsck_hfs -p /dev/rdisk4s2
</code></pre>

<ol>
<li>å¦‚æœå‘½ä»¤å‡ºç°é”™è¯¯ï¼Œå°†å‘½ä»¤ä¸­çš„ p å‚æ•°æ›¿æ¢ä¸º f å†è¯•ä¸€æ¬¡ï¼Œå¦‚æœé”™è¯¯æ— æ³•ä¿®å¤ï¼Œè¿˜æ˜¯è€ƒè™‘æ ¼å¼åŒ–é‡æ¥å§</li>
</ol>
<blockquote>
<p>å¯¹äºé”™è¯¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>diskutil mount diskNs2</code> æŒ‚è½½é•œåƒå¹¶åœ¨ Finder ä¸­æ£€æŸ¥ã€‚</p>
</blockquote>

<ol>
<li>ç„¶åæˆ‘ä»¬ detatch å¤‡ä»½åŒº</li>
</ol>

<pre><code class="lang-bash"># è¿™é‡Œæ²¡æœ‰æŒ‡å®šç¬¬äºŒåˆ†åŒº
hdiutil detach diskN
</code></pre>

<ol>
<li><p>ç¡®å®šæ²¡æœ‰æŠ¥é”™ç„¶ååœ¨ Finder ä¸­æ‰¾åˆ° <code>sparsebundle</code> æ–‡ä»¶ï¼Œç„¶ååœ¨æ–‡ä»¶ä¸Šå³é”®å•å‡»ï¼Œç‚¹å‡»æŸ¥çœ‹åŒ…å†…å®¹ï¼Œæ‰¾åˆ°åä¸º <code>com.apple.TimeMachine.MachineID.plist</code> çš„æ–‡ä»¶ï¼Œä½¿ç”¨ Xcode æ‰“å¼€ç¼–è¾‘ ï¼ˆä¿è¯xmlæ–‡ä»¶æ ¼å¼ä¸ä¼šå‡ºé”™ï¼‰ï¼Œæ‰¾åˆ° <code>VerificationState</code> å°†å€¼ä¿®æ”¹ä¸º 1</p>
</li>
<li><p>å¦‚æœå­˜åœ¨é”® <code>RecoveryBackupDeclinedDate</code> åˆ™å°†å…¶é”®å’Œå€¼éƒ½åˆ é™¤</p>
</li>
<li><p>ä¿å­˜ä¿®æ”¹ï¼Œåœ¨ TimeMachine è®¾ç½®ä¸­ç§»é™¤ç£ç›˜ï¼Œç„¶åå†å°†ç£ç›˜åŠ å…¥å¤‡ä»½ç›®æ ‡ï¼Œç‚¹å‡»ç«‹å³å¤‡ä»½å³å¯</p>
</li>
</ol>
<h2 id="-">å‚è€ƒ</h2>

<ul>
<li><a href="https://apple.stackexchange.com/questions/375894/inheriting-time-machine-backup-invalid-target">Inheriting Time Machine Backup: Invalid Target</a></li>
</ul>
<blockquote>
<p>MacOS ç¡®å®ä¸é”™ï¼Œä¸è¿‡é‡Œé¢åƒäº†ğŸ’©çš„è®¾å®šèƒ½ä¸èƒ½æ”¹æ”¹å•ŠğŸ˜…</p>
</blockquote>
]]></description><link>https://vaala.cat/posts/ä¿®å¤-MacOS-TimeMachine-çš„åŒæ­¥é”™è¯¯</link><guid isPermaLink="true">https://vaala.cat/posts/ä¿®å¤-MacOS-TimeMachine-çš„åŒæ­¥é”™è¯¯</guid><pubDate>Sun, 23 Jan 2022 20:24:11 GMT</pubDate></item><item><title><![CDATA[Mysqlçš„UTF8ä¸UTF8mb4]]></title><description><![CDATA[<p>ç”±äºæŸä¸ªç¥ç§˜é¡¹ç›®çš„éœ€è¦ï¼Œå‡ºç°äº†ä¸€ä¸ªå¯¼å…¥ä¸Šäº¿æ¡ utf8 æ•°æ®åˆ° mysql 5.7 ä¸­çš„éœ€æ±‚ï¼Œåœ¨å®é™…ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç° node åœ¨å‘æ•°æ®åº“ä¸­å†™å…¥ä¸­æ–‡æ•°æ®æ—¶ä¼šå‡ºç°ç±»ä¼¼ä¸‹é¢çš„æŠ¥é”™</p>

<pre><code>failed: Error: Incorrect string value: &#39;\\xC4\\x83ri&#39; for column &#39;name&#39; at row 1
</code></pre>
<p>äºæ˜¯æˆ‘çŒœæµ‹æ˜¯å­—ç¬¦ç¼–ç çš„é—®é¢˜ï¼Œäºæ˜¯å°±å°†ç¼–ç å…¨éƒ½æ”¹æˆäº† utf8ï¼Œä½†å°è¯•è¿‡åè¿˜æ˜¯å­˜åœ¨è¿™ä¸ªæŠ¥é”™ï¼Œé‚ä¸Š stackoverflow å­¦ä¹ äº†ä»¥ä¸‹å‰äººçš„ç»éªŒï¼Œå‘ç°äº†ä¸€ç¯‡æ–‡ç«  <a href="https://mathiasbynens.be/notes/mysql-utf8mb4#utf8-to-utf8mb4">How to support full Unicode in MySQL databases Â· Mathias Bynens</a> è¿™é‡Œè¯¦ç»†è®²è§£äº† mysql ä¸­ utf8 ç¼–ç çš„é—®é¢˜ï¼Œå¹¶ä¸”æŒ‡å‡º mysql ä¸­æ¨èä¸€ç›´ä½¿ç”¨å®Œæ•´çš„ utf8mb4 ç¼–ç ï¼Œè¿™é‡Œå¯¹æ–‡ç« åšäº†ä¸€ä¸ªç¿»è¯‘</p>
<h2 id="-">ä¿®æ”¹åº“ã€è¡¨ã€åˆ—</h2>

<ul>
<li>æ•°æ®åº“å
<pre><code>ALTER DATABASE åº“ CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci;
</code></pre>
</li>
<li>è¡¨å
<pre><code>ALTER TABLE è¡¨ CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
</code></pre>
</li>
<li>åˆ—å
<pre><code>ALTER TABLE è¡¨ CHANGE åˆ—1 åˆ—2 VARCHAR(200) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
</code></pre>
</li>
</ul>
<h2 id="-">ä¿®æ”¹é…ç½®æ–‡ä»¶</h2>

<pre><code>[client]  
default-character-set = utf8mb4  

[mysql]  
default-character-set = utf8mb4  

[mysqld]  
character-set-server = utf8mb4  
collation-server = utf8mb4_unicode_ci
</code></pre>
<p>ç„¶åé‡å¯æœåŠ¡</p>

<pre><code>sudo service mysql restart
</code></pre>
<h2 id="-">æ£€æŸ¥æ›´æ”¹ç»“æœ</h2>
<p>æœ€ç»ˆçš„ä¿®æ”¹ç»“æœåº”è¯¥å¦‚ä¸‹æ‰€ç¤ºï¼Œæ³¨æ„å…¶ä¸­åªæœ‰ç³»ç»Ÿç¼–ç è¿˜æ˜¯ utf8</p>

<pre><code>mysql&gt; SHOW VARIABLES WHERE Variable_name LIKE &#39;character_set_%&#39; OR Variable_name LIKE &#39;collation%&#39;;
+--------------------------+--------------------+
| Variable_name            | Value              |
+--------------------------+--------------------+
| character_set_client     | utf8mb4            |
| character_set_connection | utf8mb4            |
| character_set_database   | utf8mb4            |
| character_set_filesystem | binary             |
| character_set_results    | utf8mb4            |
| character_set_server     | utf8mb4            |
| character_set_system     | utf8               |
| collation_connection     | utf8mb4_unicode_ci |
| collation_database       | utf8mb4_unicode_ci |
| collation_server         | utf8mb4_unicode_ci |
+--------------------------+--------------------+
10 rows in set (0.00 sec)
</code></pre>
<h2 id="-">æ€è€ƒ</h2>
<p>ç”±äº mysql å¹¶æ²¡æœ‰å¯¹ utf8mb4 ç¼–ç è¿›è¡Œå¤§åŠ›æ¨èä½¿ç”¨ï¼Œå¯¼è‡´ç°åœ¨å¾ˆå¤šçš„é¡¹ç›®è¿˜åœ¨ä½¿ç”¨ä¸å®Œæ•´çš„ utf8 ç¼–ç ï¼Œè¿™é‡Œæˆ‘å°±è”æƒ³åˆ°äº† mysql ä¸­ GBK ç¼–ç å­˜åœ¨çš„å®½å­—èŠ‚æ³¨å…¥</p>
<blockquote>
<p>å®½å­—èŠ‚æ³¨å…¥ï¼šå› ä¸ºå­—ç¬¦é›†ä¸åŒ èº²è¿‡ SQL æ³¨å…¥è¿‡æ»¤å‡½æ•° <code>addslashes()</code> ä½¿ <code>addslashes</code> è¿‡æ»¤çš„<span style={{ color: 'red' }}>å•å¼•å·ã€åŒå¼•å·ã€åæ–œæ ã€NULL</span>å¯ä»¥åˆ©ç”¨ï¼Œä»è€Œç»•è¿‡SQLæ³¨å…¥é˜²æŠ¤è¾¾æˆSQLæ³¨å…¥</p>
</blockquote>
<p>ä¹Ÿæ˜¯å› ä¸ºå­—ç¬¦é›†ä¸ç»Ÿä¸€é€ æˆçš„é€ƒé€¸ï¼Œè¿™é‡Œçš„ utf8 è™½ç„¶æˆ‘è¿˜æ²¡æœ‰çœ‹åˆ°ç›¸å…³çš„æ–‡ç« å¯¹å…¶è¿›è¡Œåˆ©ç”¨ï¼Œä¸è¿‡è¿™é‡Œæ˜¾ç„¶æ˜¯å­˜åœ¨å®‰å…¨é£é™©çš„ï¼Œç‰¹åˆ«æ˜¯å¯¹äºä¸­æ–‡ç«™ç‚¹ï¼Œè‡ªæˆ‘æ„Ÿè§‰å®¹æ˜“é€ æˆäºŒæ¬¡æ³¨å…¥ï¼Œæ‰€ä»¥è¦æ³¨æ„ä»¥åä½¿ç”¨ mysql çš„æ—¶å€™ä¸€å®šè¦è§„é¿ utf8 ç¼–ç ï¼Œå…¨éƒ¨æ¢æˆ utf8mb4ï¼Œä¹Ÿä¸å·®é‚£ä¸€å­—èŠ‚çš„ç©ºé—´ã€‚</p>
<h2 id="-">å‚è€ƒ</h2>

<ul>
<li><a href="https://mathiasbynens.be/notes/mysql-utf8mb4#utf8-to-utf8mb4">How to support full Unicode in MySQL databases Â· Mathias Bynens</a></li>
<li><a href="https://stackoverflow.com/questions/30951226/mysql-encoding-error">Mysql encoding error</a></li>
<li><a href="https://lalajun.github.io/2018/05/11/mysql-%E5%AD%97%E7%AC%A6%E9%9B%86%E6%BC%8F%E6%B4%9E/#%E5%AE%BD%E5%AD%97%E8%8A%82%E6%B3%A8%E5%85%A5">Mysql-å­—ç¬¦é›†æ¼æ´åˆ†æ</a></li>
<li><a href="https://www.leavesongs.com/PENETRATION/mysql-charset-trick.html">Mysqlå­—ç¬¦ç¼–ç åˆ©ç”¨æŠ€å·§</a></li>
</ul>
]]></description><link>https://vaala.cat/posts/Mysqlçš„å­—ç¬¦ç¼–ç çš„å¤§å‘</link><guid isPermaLink="true">https://vaala.cat/posts/Mysqlçš„å­—ç¬¦ç¼–ç çš„å¤§å‘</guid><pubDate>Wed, 28 Apr 2021 12:44:38 GMT</pubDate></item><item><title><![CDATA[HDUACM OJ è‡ªåŠ¨ AC æœº]]></title><description><![CDATA[<h2 id="-">èƒŒæ™¯</h2>
<p>å› ä¸ºå­¦æ ¡æ”¿ç­–é—®é¢˜ï¼Œå¤§äºŒæ‰å­¦ä¹  C è¯­è¨€è¯¾ç¨‹ï¼Œè€å¸ˆè¦æ±‚æˆ‘ä»¬åˆ·æ»¡ HDUOJ 60 é“é¢˜ç›®ï¼Œå½“ç„¶åƒæˆ‘è¿™ç§å·²ç» OI é€€å½¹çš„é€‰æ‰‹å¿…ç„¶ä¸æƒ³å†ç¢°ç®—æ³•ï¼Œäºæ˜¯æ‰¾ vy è¦äº†ä¸€ç™¾å¤šé“ AC ä»£ç ï¼Œå†™äº†ä¸ªçˆ¬è™«äº¤äº†ä¸Šå»ã€‚æŠ“åŒ…çœ‹äº†ä¸‹ HDU çš„æäº¤é€»è¾‘ï¼Œå‘ç°å®Œå…¨æ²¡æœ‰å¯¹çˆ¬è™«åšé™åˆ¶ï¼Œç›´æ¥ç”¨ postman ç”Ÿæˆçš„ä»£ç å¸¦ä¸Š session å°±èƒ½æ­£å¸¸å·¥ä½œ</p>
<h2 id="-">ä»£ç </h2>

<pre><code class="lang-python">import os
import urllib
import base64
import requests
import time

path = &quot;C:\\Users\\hahahahaha\\Documents\\Code\\hdu_auto_ac1\\srccode&quot;  # ACä»£ç æ–‡ä»¶å¤¹ç›®å½•
files = os.listdir(path)

codepath = []

src = {}

for root, dirs, files in os.walk(path):
    for file in files:
        if os.path.join(root, file).find(&quot;cpp&quot;) != -1:
            codepath.append(os.path.join(root, file))

for i in codepath:
    f = open(i, mode=&#39;r&#39;, encoding=&#39;UTF-8&#39;)
    code = f.read()
    p = os.path.split(i)
    p1 = os.path.split(p[0])
    code = urllib.parse.quote(code)
    code = bytes(code, encoding=&quot;utf8&quot;)
    code = base64.b64encode(code)
    src[p1[1]] = str(code, encoding=&quot;utf-8&quot;)

url = &quot;http://acm.hdu.edu.cn/submit.php?action=submit&quot;

headers = {
    &#39;accept&#39;: &#39;text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9&#39;,
    &#39;accept-encoding&#39;: &#39;gzip, deflate&#39;,
    &#39;accept-language&#39;: &#39;zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6&#39;,
    &#39;cache-control&#39;: &#39;max-age=0&#39;,
    &#39;content-type&#39;: &#39;application/x-www-form-urlencoded&#39;,
    &#39;cookie&#39;: &#39;PHPSESSID=xxxxxxxxxxxxxxxx; exesubmitlang=0&#39;,
    &#39;host&#39;: &#39;acm.hdu.edu.cn&#39;,
    &#39;origin&#39;: &#39;http://acm.hdu.edu.cn&#39;,
    &#39;proxy-connection&#39;: &#39;keep-alive&#39;,
    &#39;referer&#39;: &#39;http://acm.hdu.edu.cn/submit.php?action=submit&#39;,
    &#39;upgrade-insecure-requests&#39;: &#39;1&#39;,
    &#39;user-agent&#39;: &#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36 Edg/87.0.664.66&#39;
}

for k in src:
    payload = &quot;check=0&amp;_usercode=&quot; + \
        urllib.parse.quote(src[k])+&quot;&amp;problemid=&quot;+k+&quot;&amp;language=0&quot;

    response = requests.request(&quot;POST&quot;, url, headers=headers, data=payload)
    time.sleep(10)
</code></pre>
<p>è¦æ³¨æ„çš„æ˜¯ OJ çš„æäº¤ç¼–ç æ˜¯å…ˆè¿›è¡Œä¸€æ¬¡ urlencodeï¼Œå† base64 ç„¶åå† urlencodeï¼Œç›´æ¥å¸¦ä¸Šæ•°æ® post ä¸Šå»å°±æˆåŠŸäº†</p>
<h2 id="-">é¡¹ç›®åœ°å€</h2>
<p><a href="https://github.com/VaalaCat/hdu-auto-ac">https://github.com/VaalaCat/hdu-auto-ac</a></p>
]]></description><link>https://vaala.cat/posts/HDUACM-OJ-è‡ªåŠ¨-AC-æœº</link><guid isPermaLink="true">https://vaala.cat/posts/HDUACM-OJ-è‡ªåŠ¨-AC-æœº</guid><pubDate>Wed, 30 Dec 2020 14:13:59 GMT</pubDate></item><item><title><![CDATA[ä¿¡æ¯è®ºå¤ä¹ æ€ç»´å¯¼å›¾]]></title><description><![CDATA[<p>æœ‰åˆ°äº†æ¯å¹´æ‡’ç‹—çš„æœ«æ—¥ï¼Œä¸¢ä¸ªå›¾ä¸Šæ¥
<img src="/images/blog/%E4%BF%A1%E6%81%AF%E8%AE%BA.svg" alt=""></p>
]]></description><link>https://vaala.cat/posts/ä¿¡æ¯è®ºå¤ä¹ æ€ç»´å¯¼å›¾</link><guid isPermaLink="true">https://vaala.cat/posts/ä¿¡æ¯è®ºå¤ä¹ æ€ç»´å¯¼å›¾</guid><pubDate>Sun, 22 Nov 2020 18:34:10 GMT</pubDate></item><item><title><![CDATA[é™åˆ¶intelå¤„ç†å™¨ç¿é¢‘æå‡è½»è–„æœ¬ä½¿ç”¨ä½“éªŒ]]></title><description><![CDATA[<p>surface book 2 å·²ç»æœå½¹ä¸¤å¹´å¤šäº†ï¼Œè‡ªä»å‰å‡ ä¸ªæœˆé…ç½®å¥½äº†æœåŠ¡å™¨åå°±å¤§é‡ä½¿ç”¨äº†äº‘æœåŠ¡è¿ç§»äº†è®¡ç®—æœåŠ¡å’Œæ•°æ®ï¼Œå¤§å¤§å‡å°‘äº†å•ç»ˆç«¯çš„è´Ÿè½½å’Œé‡è¦æ€§ï¼Œäºæ˜¯è¶ç€è¿™ä¸ªæœºä¼šé‡è£…äº†ç³»ç»Ÿï¼Œæƒ³ç€æŠŠæœ¬åœ°çš„ç¯å¢ƒå…¨éƒ¨ä½¿ç”¨è™šæ‹ŸåŒ–éƒ¨ç½²ï¼Œå…å¾—é‚®ç®±ä¹‹å‰ä¸€æ ·å°†ç¯å¢ƒæ•´çš„ä¹±ä¸ƒå…«ç³Ÿã€‚<br>ä½†æ˜¯è®©æˆ‘æ²¡æƒ³åˆ°çš„æ˜¯é‡è£…è¿‡åé¼ æ ‡æ‹–åŠ¨çª—å£ç§»åŠ¨ç«Ÿç„¶è¿˜æ˜¯ä¼šå‡ºç°ä¹‹å‰ä¸€æ ·çš„å¡é¡¿ï¼Œä½†æ˜¯ç©æ¸¸æˆåˆä¸ä¼šå¡é¡¿ï¼Œè®©æˆ‘æ„Ÿè§‰åˆ°å¾ˆæ˜¯å¥‡æ€ªã€‚æ‰“å¼€äº†nå¤šç›‘æ§è½¯ä»¶ï¼Œå‘ç°åœ¨é«˜é€Ÿç§»åŠ¨é¼ æ ‡çš„æ—¶å€™ä¼šå‡ºç° cpu é¢‘ç‡æ€¥å‰§å¢åŠ çš„æƒ…å†µï¼Œäºæ˜¯å°è¯•ä½¿ç”¨ç”µæºé…ç½®é™åˆ¶æœ€é«˜é¢‘ç‡ï¼Œåæ­£ä¹Ÿæ²¡æ³•ä¸€ç›´è·‘æ»¡é¢‘ç‡ï¼š</p>

<pre><code>powercfg -SETDCVALUEINDEX SCHEME_BALANCED SUB_PROCESSOR PROCFREQMAX 3800
powercfg -SETACVALUEINDEX SCHEME_BALANCED SUB_PROCESSOR PROCFREQMAX 3800
</code></pre>
<p>ç„¶åé‡å¯ç”Ÿæ•ˆï¼Œé‡å¯è¿‡åå‘ç°å¾ˆå¤šå°é—®é¢˜éƒ½å¾—åˆ°äº†è§£å†³ï¼Œé¼ æ ‡æ‹–åŠ¨ä¹Ÿæ˜¯ä¸èˆ¬é¡ºæ»‘ï¼Œèˆ’æœ</p>
]]></description><link>https://vaala.cat/posts/é™åˆ¶intelå¤„ç†å™¨ç¿é¢‘æå‡è½»è–„æœ¬ä½¿ç”¨ä½“éªŒ</link><guid isPermaLink="true">https://vaala.cat/posts/é™åˆ¶intelå¤„ç†å™¨ç¿é¢‘æå‡è½»è–„æœ¬ä½¿ç”¨ä½“éªŒ</guid><pubDate>Mon, 28 Sep 2020 09:35:18 GMT</pubDate></item><item><title><![CDATA[ctfdä½¿ç”¨ctfd-whaleåŠ¨æ€é¶æœºæ’ä»¶æ­å»ºé¶åœºæŒ‡å—]]></title><description><![CDATA[<h1 id="-">å¼•è¨€</h1>
<p>ç”±äºä¹‹å‰çš„æ–‡ç« ä½¿ç”¨çš„æ˜¯èµµå¸ˆå‚…çš„ä»“åº“ï¼Œé‡Œé¢çš„ ctfd ç‰ˆæœ¬ä¸èƒ½ä¿æŒå®˜ç½‘æœ€æ–°ï¼Œå¾ˆå¤šå¸ˆå‚…éƒ½æåˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œäºæ˜¯é‡æ–°éƒ¨ç½²äº†ä¸€ä¸‹ ctfd å¹¶åšä¸€ä¸‹è®°å½•
é¦–å…ˆè¦æ³¨æ„çš„æ˜¯ç³»ç»Ÿç‰ˆæœ¬ï¼Œç»è¿‡ä¼—å¤šå¸ˆå‚…çš„åé¦ˆå‘ç° Ubuntu 20 ä¼šå‡ºç°ä¸å¯é¢„æµ‹çš„ bugï¼Œè¯·å°½é‡ä½¿ç”¨ Ubuntu 18 éƒ¨ç½²
è¯¥æ–‡ç« å†å²ç‰ˆæœ¬ï¼š<a href="https://raw.githubusercontent.com/VaalaCat/vaalacat.github.io/9837ec2c6c09af3a504d2537db304788cccbf006/2020/09/21/ctfd%E4%BD%BF%E7%94%A8ctfd-whale%E5%8A%A8%E6%80%81%E9%9D%B6%E6%9C%BA%E6%8F%92%E4%BB%B6%E6%90%AD%E5%BB%BA%E9%9D%B6%E5%9C%BA%E6%8C%87%E5%8D%97/index.html">github</a></p>
<h1 id="-">éƒ¨ç½²</h1>
<p>è¿™é‡Œæˆ‘ä½¿ç”¨ <a href="https://github.com/frankli0324/ctfd-whale">frankli0324</a> å¸ˆå‚… fork åä¿®æ”¹çš„èµµå¸ˆå‚… ctfd whale çš„ç‰ˆæœ¬è¿›è¡Œæ­å»ºï¼Œå¹¶å¯¹é…ç½®æ–‡ä»¶å’Œé¡¹ç›®æ–‡ä»¶è¿›è¡Œäº†ä¸€äº›å®šåˆ¶åæ‰“åŒ…åˆ°äº†æˆ‘è‡ªå·±çš„ä»“åº“æ–¹ä¾¿éƒ¨ç½²</p>

<ul>
<li><a href="https://github.com/Un1kTeam/ctfd-whale">VaalaCat/ctfd_whale</a></li>
<li><a href="https://github.com/Un1kTeam/CTFd">VaalaCat/CTFd</a></li>
</ul>
<h2 id="-">å‡†å¤‡</h2>
<h3 id="-">å®‰è£…ç¯å¢ƒ</h3>
<p>ç”±äºåŠ¨æ€é¶æœºæ˜¯ä½¿ç”¨ <code>docker</code> å®ç°çš„ï¼Œæ‰€ä»¥é¦–å…ˆè¦å‡†å¤‡å®‰è£…ä¸€ä¸‹ <code>docker</code></p>

<pre><code>curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun
</code></pre>
<p>ç„¶åè¿˜è¦å‡†å¤‡ <code>docker-compose</code></p>

<pre><code>sudo pip3 install docker-compose -i https://pypi.tuna.tsinghua.edu.cn/simple
</code></pre>
<h3 id="-">é…ç½®ç¯å¢ƒ</h3>
<p>ç”±äºæ’ä»¶ä½¿ç”¨çš„æ˜¯é›†ç¾¤çš„æ¨¡å¼ï¼Œæ‰€ä»¥è¿™é‡Œè¦åˆ›å»ºä¸€ä¸ªå•ä¸ªæœåŠ¡å™¨çš„é›†ç¾¤</p>

<pre><code>docker swarm init
</code></pre>
<p>ç„¶åå°†è¿™ä¸ªæœåŠ¡å™¨åŠ å…¥é›†ç¾¤</p>

<pre><code>docker node update --label-add=&#39;name=linux-1&#39; $(docker node ls -q)
</code></pre>
<p>æœ€åè¦å‡†å¤‡çš„æ˜¯ç»™ <code>docker</code> æ›´æ¢é•œåƒæºï¼Œè¿™é‡Œæ¨èå°† daocloud å’Œ aliyun çš„æºéƒ½æ·»åŠ è¿›å»ï¼Œä¸ç„¶ä¼šå¾ˆé¾Ÿé€Ÿï¼Œä¿®æ”¹æ–‡ä»¶ <code>/etc/docker/daemon.json</code>ï¼Œä¸¤ä¸ªé•œåƒéƒ½éœ€è¦è‡ªå·±å–ç”³è¯·ä¸€ä¸‹ï¼Œæ”¹å®Œåç±»ä¼¼ä¸‹é¢è¿™æ ·</p>

<pre><code>{
    &quot;registry-mirrors&quot;: [&quot;https://233666.mirror.aliyuncs.com&quot;,&quot;http://233666.m.daocloud.io&quot;]
}
</code></pre>
<p>ä¹Ÿå¯ä»¥ç»™ docker è®¾ç½®é•œåƒæºä»£ç†</p>

<pre><code>sudo mkdir -p /etc/systemd/system/docker.service.d
sudo nano /etc/systemd/system/docker.service.d/http-proxy.conf
</code></pre>
<p>ç„¶åæ·»åŠ å†…å®¹ï¼Œè¿™é‡Œæ˜¯æˆ‘è‡ªå·±çš„ä»£ç†</p>

<pre><code>[Service]
Environment=&quot;HTTP_PROXY=http://127.0.0.1:7890&quot;
Environment=&quot;HTTPS_PROXY=http://127.0.0.1:7890&quot;
</code></pre>
<p>é‡å¯ç”Ÿæ•ˆ</p>

<pre><code>sudo systemctl daemon-reload
sudo systemctl restart docker
</code></pre>
<h2 id="-">å®‰è£…</h2>
<h3 id="-">ä¸‹è½½</h3>
<p>é¦–å…ˆä½¿ç”¨æˆ‘ä»“åº“ä¸­çš„ <code>ctfd</code>ï¼Œå·²ç»åšå¥½äº†é•œåƒæ¢æºç­‰å·¥ä½œã€‚</p>

<pre><code>git clone https://github.com/Un1kTeam/CTFd --depth=1
</code></pre>
<h3 id="-">é…ç½®</h3>

<pre><code>cd CTFd
nano conf/frp/frps.ini # token ä¸€å®šè¦éšæœº
nano conf/frp/frpc.ini # token ä¸€å®šè¦éšæœº
</code></pre>
<p>è¿™é‡Œç»™å‡º <code>frp</code> ä¸¤ä¸ªé…ç½®æ–‡ä»¶çš„å†…å®¹ä¾›å‚è€ƒï¼Œå¤§è‡´å°±æ˜¯åªéœ€è¦ä¿®æ”¹ token</p>

<ul>
<li><p><code>frps.ini</code></p>

<pre><code>[common]
bind_port = 7000
vhost_http_port = 9123
token = your_token
subdomain_host = node.vaala.ink
</code></pre>
</li>
<li><p><code>frpc.ini</code></p>

<pre><code>[common]
token = your_token
server_addr = 172.1.0.3
server_port = 7000
admin_addr = 172.1.0.4
admin_port = 7400
</code></pre>
<p>ç„¶åå®‰è£…æ’ä»¶å¹¶å¯åŠ¨</p>

<pre><code>git submodule update --init
docker-compose up -d
</code></pre>
<p>ä¸å‡ºæ„å¤–å°±åº”è¯¥æˆåŠŸäº†ï¼Œä½¿ç”¨</p>

<pre><code>docker ps -a
</code></pre>
<p>æŸ¥çœ‹æ˜¯å¦æœ‰æ²¡æœ‰æ­£ç¡®å¯åŠ¨çš„é•œåƒ</p>
</li>
</ul>
<h3 id="-">å¹³å°è®¾ç½®</h3>
<p>æµè§ˆå™¨è®¿é—® 9124 ç«¯å£è¿›å…¥å¹³å°ï¼Œå®Œæˆå¹³å°åŸºæœ¬é…ç½®ï¼Œç„¶åè¿›å…¥åå°ï¼Œå³ä¸Šè§’çš„æ’ä»¶ä¸­è¿›å…¥ <code>Whale</code> è®¾ç½®ï¼Œå…¶ä¸­ï¼Œå·¦ä¾§ Docker èœå•æ å¦‚æœæ²¡æœ‰ç‰¹æ®Šéœ€æ±‚æ— éœ€æ›´æ”¹ï¼Œåªéœ€æ›´æ”¹å·¦ä¾§ Frp èœå•æ ä¸­çš„å†…å®¹</p>

<table>
<thead>
<tr>
<th>é¡¹</th>
<th>å†…å®¹</th>
</tr>
</thead>
<tbody>
<tr>
<td>Http Domain Suffix</td>
<td><code>node.vaala.ink</code> è¿™é‡Œå¡«å†™ä½¿ç”¨httpæ–¹å¼è®¿é—®é¶æœºçš„æ³›è§£æåŸŸå</td>
</tr>
<tr>
<td>Http Port</td>
<td><code>9123</code>          è¿™é‡Œå¡«å†™frpsä¸­çš„vhost_http_portï¼Œè¯¥ç«¯å£ä¸ºhttpæ–¹å¼é¶æœºè®¿é—®çš„ç«¯å£</td>
</tr>
<tr>
<td>Direct IP Address</td>
<td><code>chive.vaala.cloud</code> è¿™é‡Œå¡«å†™æœåŠ¡å™¨ipï¼Œç”¨äºæ˜¾ç¤ºDirectæ–¹å¼è®¿é—®çš„é¢˜ç›®çš„IP</td>
</tr>
<tr>
<td>Direct Minimum Port</td>
<td><code>9125</code>          è¿™é‡Œå¡«å†™ç”¨äºåŠ¨æ€é¶æœºDirectæ–¹å¼çš„å¼€å§‹ç«¯å£</td>
</tr>
<tr>
<td>Direct Maximum Port</td>
<td><code>9129</code>          è¿™é‡Œå¡«å†™ç»“æŸç«¯å£</td>
</tr>
</tbody>
</table>
<p>æœ€åç‚¹ä¸€ä¸‹æ›´æ–°å°±å¯ä»¥ä¿å­˜é…ç½®äº†ï¼Œå¡«å†™å®Œæˆåæ–°å»ºé¢˜ç›®æµ‹è¯•æ˜¯å¦æˆåŠŸï¼ŒæŒ‰ä¸‹è¡¨æ–°å»ºé¢˜ç›®ï¼Œè¡¨ä¸­æ²¡æœ‰æåˆ°çš„ä¿æŒé»˜è®¤å°±å¥½</p>

<table>
<thead>
<tr>
<th>é¡¹</th>
<th>å†…å®¹</th>
</tr>
</thead>
<tbody>
<tr>
<td>Choose Challenge Type</td>
<td><code>Dynamic docker</code></td>
</tr>
<tr>
<td>Name</td>
<td><code>test</code></td>
</tr>
<tr>
<td>Category</td>
<td><code>test</code></td>
</tr>
<tr>
<td>Docker Image</td>
<td><code>vaalacat/push_f12</code></td>
</tr>
<tr>
<td>Frp Redirect Type</td>
<td><code>Direct</code> æˆ–è€… <code>Http</code></td>
</tr>
<tr>
<td>Frp Redirect Port</td>
<td><code>80</code></td>
</tr>
<tr>
<td>Initial Value</td>
<td><code>1</code></td>
</tr>
<tr>
<td>Decay Limit</td>
<td><code>1</code></td>
</tr>
<tr>
<td>Minimum Value</td>
<td><code>1</code></td>
</tr>
<tr>
<td>Score Type</td>
<td><code>dynamic score</code></td>
</tr>
</tbody>
</table>
<p>æ–°å»ºé¢˜ç›®è¿‡åç‚¹å‡»å¯åŠ¨ï¼Œç„¶åç­‰å¾…é¶æœºåˆ›å»ºï¼Œå¯ä»¥åœ¨æœåŠ¡å™¨ä¸­ <code>docker ps -a</code> æŸ¥çœ‹æ˜¯å¦å¯åŠ¨ï¼Œè‹¥å¯åŠ¨æˆåŠŸåˆ™æ­å»ºå®Œæˆ</p>
<h2 id="-">æ€»ç»“</h2>
<p>æˆ‘çš„ä»“åº“ä¸­æ‰€ä½¿ç”¨çš„ç«¯å£ä¸€å…±æœ‰ä¸‰ç±»ï¼Œéœ€è¦ä¿®æ”¹å¹³å°ä¿¡æ¯è¯·æŒ‰ç…§ä»¥ä¸‹æ–‡ä»¶ä½ç½®ä¿®æ”¹</p>

<ul>
<li>9123:<br>  é»˜è®¤ http æ¨¡å¼é¶æœºè®¿é—®ç«¯å£ï¼Œéœ€è¦ä¿®æ”¹ <code>frps.ini</code>ã€åå°ä¸­çš„ <code>Http Port</code>ã€<code>docker-compose.yml</code></li>
<li>9124:<br>  é»˜è®¤ä¸º ctfd ç«¯å£ï¼Œéœ€è¦ä¿®æ”¹ <code>docker-compose.yml</code></li>
<li>9125-9129:
  åŠ¨æ€é¶æœº Direct æ¨¡å¼ç«¯å£ï¼Œéœ€è¦ä¿®æ”¹ <code>docker-compose.yml</code>ã€åå°ä¸­çš„ç«¯å£èŒƒå›´</li>
</ul>
<p>å®Œæˆä»¥ä¸Šæ–‡ä»¶çš„ä¿®æ”¹å³å¯å®Œæˆå¯¹å¹³å°ç”¨åˆ°ç«¯å£çš„ä¿®æ”¹</p>
<h1 id="-">å‚è€ƒ</h1>

<ul>
<li><a href="https://github.com/frankli0324/ctfd-whale">ctfd_whale</a></li>
<li><a href="https://www.zhaoj.in/read-6333.html">CTFd-Whale æ¨èéƒ¨ç½²å®è·µ</a></li>
</ul>
]]></description><link>https://vaala.cat/posts/ctfdä½¿ç”¨ctfd-whaleåŠ¨æ€é¶æœºæ’ä»¶æ­å»ºé¶åœºæŒ‡å—</link><guid isPermaLink="true">https://vaala.cat/posts/ctfdä½¿ç”¨ctfd-whaleåŠ¨æ€é¶æœºæ’ä»¶æ­å»ºé¶åœºæŒ‡å—</guid><pubDate>Mon, 21 Sep 2020 14:57:19 GMT</pubDate></item><item><title><![CDATA[åœ¨WSL1ä¸­å¿«ä¹çš„ä½¿ç”¨docker]]></title><description><![CDATA[<p>å‘bå¾®è½¯æ­»æ´»ä¸ç»™æˆ‘çš„ surface book2 æ¨é€ win10 2004 ç‰ˆï¼Œè€Œ wsl1 ä¸æ”¯æŒ docker å®ˆæŠ¤è¿›ç¨‹ï¼Œä½†æ˜¯ pwntools åªèƒ½åœ¨ linux ä¸‹å®‰è£…ï¼Œæ¯æ¬¡å¼€ä¸ªè™šæ‹Ÿæœºéº»çƒ¦çš„ä¸€pã€‚æŸå¤©åœ¨ä½¿ç”¨ vscode for wsl æ—¶å‘ç°dockeræ’ä»¶å¯ä»¥å®‰è£…ï¼Œäºæ˜¯å°±è£…èµ·æ¥ç©äº†ä¸€ä¸‹ï¼Œå‘ç°å®‰è£…è¿‡åæ˜¯æ²¡æ³•æ­£å¸¸ä½¿ç”¨çš„ã€‚æ‰“å¼€ docker for windows è®¾ç½®å¼€æ”¾ deamon ç«¯å£å¹¶ä¸”åœ¨ wsl ç¯å¢ƒå˜é‡ä¸­è®¾ç½®</p>

<pre><code>export DOCKER_HOST=tcp://127.0.0.1:2375
</code></pre>
<p>æˆ‘å‘ç° vscode ä¸­å¯ä»¥æ­£å¸¸æ˜¾ç¤º docker for windows çš„å®¹å™¨äº†ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨ wsl ä¸­å®‰è£… docker-cli æ¥å®ç°ä½¿ç”¨ docker è¿™ä¸ªéœ€æ±‚ã€‚é¦–å…ˆè¦å®‰è£… docker-cli</p>

<pre><code>sudo apt-get install docker.io
</code></pre>
<p>æ­£å½“æˆ‘é«˜å…´å®‰è£…æˆåŠŸæ—¶ï¼Œè¾“å…¥ <code>docker</code> å‘ç°äº†è¾“å‡º</p>

<pre><code>The command &#39;docker&#39; could not be found in this WSL 1 distro.
We recommend to convert this distro to WSL 2 and activate
the WSL integration in Docker Desktop settings.

See https://docs.docker.com/docker-for-windows/wsl/ for details.
</code></pre>
<p>çœ‹æ¥æ˜¯å·¨ç¡¬æäº†ä¸€ä¸ªä¹Ÿå«dockerçš„ä¸œè¥¿æ¥æé†’æˆ‘ï¼Œé‚£å°±éœ€è¦æŠŠå®ƒåˆ é™¤</p>

<pre><code>whereis docker
</code></pre>
<p>å¯ä»¥å‘ç°æœ‰ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶</p>

<pre><code>/mnt/c/Program Files/Docker/Docker/resources/bin/docker
</code></pre>
<p>è¿™ä¸ªæ–‡ä»¶å°±æ˜¯ç½ªé­ç¥¸é¦–ï¼Œéœ€è¦åˆ é™¤å®ƒï¼Œä»¥é˜²ä¸‡ä¸€ï¼ŒæŠŠè¿™ä¸ªæ–‡ä»¶é‡å‘½åã€‚ç„¶åå°±å¯ä»¥å¿«ä¹çš„åœ¨ wsl1 ä¸­è¿è¡Œdockeräº†</p>
]]></description><link>https://vaala.cat/posts/åœ¨WSL1ä¸­å¿«ä¹çš„ä½¿ç”¨docker</link><guid isPermaLink="true">https://vaala.cat/posts/åœ¨WSL1ä¸­å¿«ä¹çš„ä½¿ç”¨docker</guid><pubDate>Mon, 31 Aug 2020 10:05:01 GMT</pubDate></item><item><title><![CDATA[ShareX é…ç½® Ubuntu Pastebin å’Œé˜¿é‡Œäº‘ oss åˆ†äº«]]></title><description><![CDATA[<p>ç”¨äº† sharex è¿‡åæ„Ÿè§‰ç»™åˆ«äººåˆ†äº«å›¾ç‰‡å’Œä»£ç æ–‡ä»¶çš„ä½“éªŒå¥½äº†ä¸å°‘ï¼Œä½†æ˜¯ sharex å¹¶æ²¡æœ‰æä¾› Ubuntu Pastebin è¿™ä¸ªçŸ¥åä»£ç åˆ†äº«å¹³å°è®©æˆ‘å¾ˆéš¾å—ï¼Œé˜¿é‡Œäº‘ oss ä¹Ÿå°šæœªæ”¯æŒï¼Œè€Œä¸”åœ¨ç½‘ä¸Šä¹Ÿæ²¡æœ‰æ‰¾åˆ°ç›¸å…³çš„èµ„æ–™ï¼Œä¹‹å‰çš„è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨è‡ªå»ºçš„ hastebin ä»¥åŠ nextcloudï¼Œè™½ç„¶ä½“éªŒä¸é”™ä¸è¿‡æ¯•ç«Ÿæ˜¯è‡ªå»ºçš„ï¼Œæ²¡æœ‰é«˜æ€§èƒ½é«˜å¸¦å®½çš„æœåŠ¡å™¨ä½“éªŒè¿˜æ˜¯ä¼šå¤§æ‰“æŠ˜æ‰£ï¼Œäºæ˜¯åªå¥½è‡ªå·±è§£å†³ç„¶åè®°å½•ä¸€ä¸‹äº†ã€‚</p>
<h2 id="ubuntu-pastebin">Ubuntu Pastebin</h2>
<p>è¿™ä¸ªä»£ç åˆ†äº«å¹³å°çš„æ ¼å¼è¿˜æ˜¯å¾ˆç®€å•çš„ï¼Œå¤§æ¦‚ç»™å‡ºè¡¨æ ¼</p>

<ul>
<li>è¯·æ±‚</li>
</ul>

<table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>URL</th>
<th>è¯·æ±‚ä½“</th>
</tr>
</thead>
<tbody>
<tr>
<td>POST</td>
<td><a href="https://paste.ubuntu.com">https://paste.ubuntu.com</a></td>
<td>Form URL encoded</td>
</tr>
</tbody>
</table>

<table>
<thead>
<tr>
<th>åç§°</th>
<th>å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td>poster</td>
<td>VaalaCat</td>
</tr>
<tr>
<td>syntax</td>
<td>text</td>
</tr>
<tr>
<td>content</td>
<td>\$input\$</td>
</tr>
</tbody>
</table>

<ul>
<li>å“åº”</li>
</ul>

<pre><code>$responseurl$
</code></pre>
<h2 id="aliyun-oss">Aliyun OSS</h2>
<p><del>æ­£åœ¨æµ‹è¯•</del>gugugugugugu</p>
]]></description><link>https://vaala.cat/posts/ShareX-é…ç½®Ubuntu-Pastebin-åˆ†äº«</link><guid isPermaLink="true">https://vaala.cat/posts/ShareX-é…ç½®Ubuntu-Pastebin-åˆ†äº«</guid><pubDate>Tue, 25 Aug 2020 08:30:40 GMT</pubDate></item><item><title><![CDATA[åšå®¢æ¬è¿]]></title><description><![CDATA[<h2 id="hahaha">hahaha</h2>
<p>ç»ˆäºè½¬æˆ˜hexoäº†ï¼Œä¸å¾—ä¸è¯´github pagesçœŸçš„è‰¯å¿ƒï¼Œè‡ªå¸¦cdnè¿˜ä¸è¦é’±ï¼Œä¸è¿‡ä»¥å‰çš„è¯„è®ºæ˜¯æ²¡æ³•å¯¼å‡ºäº†ï¼Œhexoè¿™ä¸ªç›´æ¥æŠŠmdæ‹–è¿›æ¥å°±èƒ½å½“åšå®¢ç®€ç›´æ–¹ä¾¿ï¼Œé¡ºä¾¿å«–äº†é˜¿é‡Œäº‘çš„ossåšå›¾åºŠå’ŒåŠ é€Ÿé™æ€èµ„æºï¼Œå°±ç®—æ˜¯github pagesåŠ é€Ÿè¿‡åè®¿é—®ä½“éªŒä¹Ÿæ˜¯å¯ä»¥æ¥å—çš„ï¼Œä»Šååº”è¯¥ä¸ä¼šå†æ¬è¿åšå®¢äº†ï¼Œä»¥å‰çš„è¯„è®ºä¹Ÿåªèƒ½å°±è¿™ä¹ˆç®—äº†ï¼Œç›¸ä¿¡ä¹‹ååšå®¢ä¼šæ›´é«˜äº§æŠŠhahahahahah</p>
]]></description><link>https://vaala.cat/posts/newblog</link><guid isPermaLink="true">https://vaala.cat/posts/newblog</guid><pubDate>Sun, 23 Aug 2020 15:23:33 GMT</pubDate></item><item><title><![CDATA[OBS Virtual CamæŒ‡åŒ—]]></title><description><![CDATA[<p>obsæ˜¯ä¸€ä¸ªé€šå¸¸ç”¨ä½œç›´æ’­æ¢è„¸è½¯ä»¶ï¼ˆğŸ˜Šï¼Œç”¨é€”å°±æ˜¯å°†æœ¬åœ°çš„åª’ä½“èµ„æºè™šæ‹Ÿä¸ºæ‘„åƒå¤´è¾“å‡ºï¼Œå¯ä»¥èµ·åˆ°æ›´æ”¹è§†é¢‘æµçš„ä½œç”¨ã€‚</p>
<p>é¦–å…ˆè¦å®‰è£…è½¯ä»¶ï¼Œæœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯ä¸»ç¨‹åºï¼Œä¸€ä¸ªæ˜¯æ’ä»¶ã€‚</p>
<p>ç”±äºç½‘ç»œç¯å¢ƒé—®é¢˜ï¼Œæˆ‘å°†è½¯ä»¶ä½¿ç”¨äº†cdnè¿›è¡ŒåŠ é€Ÿï¼š<a href="https://wws.lanzous.com/b01bh2tmd">ä¸‹è½½ç‚¹æˆ‘</a> å¯†ç ï¼š5qb8</p>
<p>å®‰è£…ä¸€è·¯é»˜è®¤å°±å¥½</p>
]]></description><link>https://vaala.cat/posts/obs-virtual-camæŒ‡åŒ—</link><guid isPermaLink="true">https://vaala.cat/posts/obs-virtual-camæŒ‡åŒ—</guid><pubDate>Wed, 10 Jun 2020 18:14:33 GMT</pubDate></item><item><title><![CDATA[ä¸ºIdracé…ç½®é‚®ç®±è­¦æŠ¥]]></title><description><![CDATA[<h2 id="-">æƒ³æ³•</h2>
<p>ç”±äºæœ‰äº†ä¸¤ä¸ªå…¬ç½‘IPï¼Œé‚æ¡äº†ä¸€å°æ´‹åƒåœ¾æœåŠ¡å™¨ä»¥å……åˆ†åˆ©ç”¨èµ„æºï¼ˆå…¶å®å°±æ˜¯æƒ³ç©æœåŠ¡å™¨ï¼‰ã€‚ç”±äºä¸¤ä¸ªIPä¸€ä¸ªæ˜¯ç§»åŠ¨300Mï¼Œä¸€ä¸ªæ˜¯ç”µä¿¡çš„100Mï¼Œäºæ˜¯å°±æŠŠå¸¦å®½è¾ƒå¤§çš„ç§»åŠ¨ä¸“çº¿ç›´æ¥ä»ç½‘å…³è·¯ç”±æ’ä¸Šäº†æœåŠ¡å™¨ï¼Œå¦ä¸€ä¸ªåˆ™ç”¨äºdellçš„idracä»¥ç®¡ç†æœåŠ¡å™¨ï¼Œä»¥å®ç°æœåŠ¡å™¨åœ¨å´©æ‰çš„æƒ…å†µä¸‹è¿˜èƒ½è¿œç¨‹æ“ä½œã€‚(ç°å·²æ›´æ–°ä¸ºåŒç§»åŠ¨IPï¼Œéƒ½æ¥å…¥è·¯ç”±å™¨ï¼Œç”±è·¯ç”±å™¨æ‰¿æ‹…ç«¯å£è½¬å‘çš„å·¥ä½œã€‚</p>
<h2 id="-">å®ç°</h2>
<p>æœåŠ¡å™¨æœ¬èº«çš„ç½‘ç»œé…ç½®ä¸€å¸†é£é¡ºï¼Œç…§ç€Proxmox veç»™çš„æ–‡æ¡£è½»æ¾å°±é…ç½®å¥½äº†ç°å·²æ›´æ–°ä¸ºesxiï¼ˆä¸å¾—ä¸åæ§½ä¸‹ç§»åŠ¨çš„å¢™ä¸­å¢™ï¼Œç½‘ç»œè´¨é‡å®åœ¨å¤ªå·®ï¼Œåœ¨GitHubä¸‹ä¸ªé¡¹ç›®éƒ½èƒ½ä¸‹å‡ºæ¥ä¸€ä¸ªç¼“å­˜çš„è€ç‰ˆæœ¬ã€‚å€’æ˜¯Dellçš„Idracçš„é‚®ç®±é…ç½®æ˜¯ä¸ªå·¨å‘ã€‚</p>
<p>ä¼—æ‰€å‘¨çŸ¥æœåŠ¡å™¨éƒ½ä¼šæœ‰IPMIçš„é…ç½®ï¼Œæ–¹ä¾¿ç½‘ç®¡ç®¡ç†ã€‚ä½†æ˜¯æˆ‘è¿™ä¹Ÿä¸æ˜¯ä¸“ä¸šæœºæˆ¿ï¼Œæ²¡æœ‰äºº24å°æ—¶ç›‘æ§ï¼ˆç°åœ¨æœ‰äº†ï¼‰ï¼Œäºæ˜¯æ‰“ç®—éƒ¨ç½²ä¸€ä¸ªé‚®ç®±æŠ¥è­¦ã€‚ä¸€ç•ªæŸ¥æ‰¾èµ„æ–™åå‘ç°idracé‡Œé¢æ˜¯æœ‰è¿™ä¸ªç›¸å…³çš„è®¾ç½®ï¼Œä½†æ˜¯ä½¿ç”¨ç½‘æ˜“çš„é‚®ç®±ä¸€ç›´éƒ½æ²¡æœ‰é…ç½®æˆåŠŸï¼Œæ¢äº†è…¾è®¯ï¼Œgmailä¹Ÿéƒ½ä¸è¡Œã€‚</p>
<p>æŸ¥æ‰¾èµ„æ–™ååœ¨å®˜æ–¹è®ºå›ä¸­å‘ç°ä¸€ä¸ªå¤§å‘ï¼Œè¯´æ˜¯è¦å°†idracä¸­çš„ç½‘ç»œè®¾ç½®é‡Œé¢ï¼Œå¦‚å›¾é…ç½®ï¼š</p>
<p><img src="/images/upload/2020-05/image-1.png" alt=""></p>
<p>dnsä¸­çš„åç§°è¦ä»¥é‚®ç®±åç§°ä¸ºå‡†ï¼ˆè¿™å°±è¦æ±‚è¦è®¾ç½®å¥½dnsæœåŠ¡å™¨ï¼Œè€Œidracé»˜è®¤æ˜¯ä¸é…ç½®çš„ï¼Œç„¶ååœ¨é‚®ç®±è®¾ç½®é‡Œé¢å¦‚å›¾è®¾ç½®</p>
<p><img src="/images/upload/2020-05/image-2.png" alt=""></p>
<p>ç„¶åæ˜¯è­¦æŠ¥é‚®ç®±å¡«ä¸Šå°±è¡Œï¼Œå¡«å†™å¥½ä»¥åå¯ä»¥æµ‹è¯•ä¸‹æ˜¯å¦è®¾ç½®æˆåŠŸ</p>
<p><img src="/images/upload/2020-05/image-3.png" alt=""></p>
<p>åœ¨å®˜ç½‘æ–‡æ¡£æ‰¾ä¸€ä¸ªè­¦æŠ¥ç­‰çº§é«˜çš„idå¡«ä¸Šå»ç‚¹å‘é€å°±å¯ä»¥äº†</p>
]]></description><link>https://vaala.cat/posts/ä¸ºidracé…ç½®é‚®ç®±è­¦æŠ¥</link><guid isPermaLink="true">https://vaala.cat/posts/ä¸ºidracé…ç½®é‚®ç®±è­¦æŠ¥</guid><pubDate>Tue, 05 May 2020 20:11:23 GMT</pubDate></item><item><title><![CDATA[å·¥ç§‘æ•°å­¦åˆ†ææ•™æ]]></title><description><![CDATA[<p><a href="images/upload/2020-02/å¤§å­¦æ•°å­¦å·¥ç§‘æ•°å­¦åˆ†æä¸Šç¬¬5ç‰ˆ13858731.pdf">å¤§å­¦å·¥ç§‘æ•°å­¦åˆ†æä¸Š</a></p>
<p><a href="images/upload/2020-02/14097849_å¤§å­¦æ•°å­¦å·¥ç§‘æ•°å­¦åˆ†æç¬¬5ç‰ˆä¸‹_p232.pdf">å¤§å­¦å·¥ç§‘æ•°å­¦åˆ†æä¸‹</a></p>
]]></description><link>https://vaala.cat/posts/themathbook</link><guid isPermaLink="true">https://vaala.cat/posts/themathbook</guid><pubDate>Mon, 17 Feb 2020 10:26:26 GMT</pubDate></item><item><title><![CDATA[Robomasteræ ¡èµ›æ™ºèƒ½å°è½¦OpenCVè§†è§‰ä¸ç¥ç»ç½‘ç»œç¯å¢ƒæ­å»º]]></title><description><![CDATA[<p>æœ¬é¡¹ç›®çš„æ‰€æœ‰ä»£ç å‡ä¸Šä¼ è‡³GitHubï¼Œé¡¹ç›®åœ°å€ï¼š<a href="https://github.com/VaalaCat/AI_raspberry_car">https://github.com/VaalaCat/AI_raspberry_car</a></p>
<h2 id="-">ä¸€ã€ç®€ä»‹</h2>
<p>ç”±äºä½œæ­»é€‰æ‹©äº†æ‘„åƒå¤´æ¥åšè¿™ä¸ªé¡¹ç›®ï¼Œé‚£æ˜¾è€Œæ˜“è§çš„éœ€è¦ç”¨åˆ°opencvæ¥å¤„ç†è¿™ä¸ªå›¾åƒã€‚ï¼ˆå…¶å®ä¹‹å‰æ˜¯ç”¨picameraåº“ï¼Œä¸è¿‡ç°åœ¨opencvä¹Ÿä¸ç”¨ç¼–è¯‘äº†ï¼Œè¿˜æ˜¯é€‰opencvå§ï¼‰</p>
<p>é¦–å…ˆè¦ä»‹ç»ä¸€ä¸‹æˆ‘çš„è®¾å¤‡ï¼š</p>
<p><img src="/images/upload/2019-12/img_20191228_1547382525920447325202399-1024x768.jpg" alt=""></p>

<ul>
<li>æ ‘è“æ´¾4ï¼ˆä¿ºçš„pi3çœ‹æ ·å­æ˜¯ä¸­é“å´©æ®‚äº†ï¼‰</li>
<li>picameraæ¨¡å—</li>
</ul>
<p>å°å°çš„åæ§½ä¸€ä¸‹pi4çš„å‘çƒ­é‡ï¼Œç®€ç›´æ¯”810ç«é¾™è¿˜å¼ºï¼Œæ²¡ä¸ªå¼ºç‚¹çš„æ•£çƒ­æ ¹æœ¬è·‘ä¸æ»¡ã€‚</p>
<h2 id="-">äºŒã€ç¯å¢ƒæ­å»º</h2>
<h3 id="1-opencv-">1ã€opencvç¯å¢ƒ</h3>
<p>æ—¢ç„¶è¯´æ˜¯è¦ç”¨åˆ°opencvï¼Œé‚£å°±ä¸å¾—ä¸æåˆ°opencvçš„å®‰è£…ã€‚æ—©åœ¨ä¸€å¹´å‰æˆ‘å°±å¦„å›¾åœ¨æˆ‘çš„pi3ä¸Šå®‰è£…python3çš„opencvï¼Œç»“æœçœ‹åˆ°ç½‘ä¸Šä¸€å¤§å †çš„python2ç›´æ¥pipå®‰è£…çš„æ–¹æ³•ï¼Œåˆæƒ³åˆ°python3ç¼–è¯‘çš„é¾Ÿé€Ÿï¼Œè¿˜å®¹æ˜“å‡ºé”™ï¼Œå¿ƒéƒ½å‡‰äº†åŠæˆªã€‚ä¸è¿‡ä»Šå¹´å†æ¬¡ç¿»èµ„æ–™çš„æ—¶å€™ï¼Œæ‰¾åˆ°äº†pip3å®‰è£…opencvçš„æ–¹æ³•ï¼Œå¹¶ä¸”åœ¨æˆ‘çš„pi3ï¼Œpi4ï¼Œpi zero wä¸Šï¼Œbusterç³»ç»Ÿï¼Œæ— ä¸€å¤±è´¥ã€‚</p>
<p>å®‰è£…opencvæ­¥éª¤å¤§è‡´å¦‚ä¸‹ï¼š</p>

<ol>
<li>å¯åŠ¨æ ‘è“æ´¾é¦–å…ˆè¦æ¢æºï¼Œå¦åˆ™ä¸‹è½½å¯èƒ½ä¼šå¤±è´¥æ•°æ¬¡ä¸”ç›¸å½“é¾Ÿé€Ÿï¼Œè¯¦è§tunaæºï¼š<a href="https://mirror.tuna.tsinghua.edu.cn/help/raspbian/">æ ‘è“æ´¾æ¢æº</a></li>
<li>å®‰è£…ä¾èµ–é¡¹ï¼ˆç”±äºæˆ‘ä¹Ÿä¸çŸ¥é“è¦ç”¨åˆ°äº›å•¥ä¾èµ–ï¼Œå°±çè£…äº†å‡ ä¸ªï¼‰<code>sudo apt-get install libhdf5-dev libhdf5-serial-dev libqtgui4 libqtwebkit4 libqt4-test python3-pyqt5 libatlas-base-dev libjasper-dev</code></li>
<li>å®‰è£…opencvï¼ˆè¿™é‡Œå»ºè®®å¤§å®¶å®‰è£…opencv3è€Œä¸æ˜¯é»˜è®¤çš„opencv4ï¼Œæ¯æ¬¡æˆ‘å®‰è£…opencv4å®Œæˆåéƒ½ä¼šé‡åˆ°ä¸å¯é¢„æ–™çš„é”™è¯¯ï¼‰<code>sudo pip3 install --no-cache-dir opencv-contrib-python==3.4.3.18</code> ï¼ˆç”±äºç½‘ç»œåŸå› ï¼Œä¸‹è½½å¯èƒ½è¾ƒæ…¢ï¼Œè¿™é‡Œæˆ‘å°†whlåŒ…ä¸Šä¼ åˆ°äº†æˆ‘çš„æœåŠ¡å™¨ä»¥ä¾›å¿«é€Ÿä¸‹è½½å®‰è£…ï¼š<a href="images/upload/2019-12/opencv_contrib_python-3.4.3.18-cp37-cp37m-linux_armv7l.whl">opencv3</a></li>
</ol>
<p>å®‰è£…å®Œæˆåï¼Œè¾“å…¥<code>python3</code> ç„¶å<code>import cv2</code> å¦‚æœæ²¡æœ‰å‡ºé”™åˆ™è¯´æ˜å®‰è£…æˆåŠŸã€‚</p>
<p>å®‰è£…ä¸­çš„é—®é¢˜è¯¦è§ï¼š<a href="https://zhuanlan.zhihu.com/p/92184435">Opencvçš„å®‰è£…</a></p>
<h3 id="2-tf-">2ã€tfç¥ç»ç½‘ç»œç¯å¢ƒ</h3>
<p>åœ¨å®‰è£…å®Œæˆåï¼Œå½“ç„¶è¦å‡†å¤‡è¯†åˆ«è·¯çº¿äº†ï¼Œç„¶è€Œï¼Œè·¯çº¿è¯†åˆ«ç®€ç›´æ˜¯å¤ªå›°éš¾äº†ï¼Œæ‰€ä»¥å¯¹äºå²”è·¯å£åˆ†ç±»ï¼Œæˆ‘é€‰æ‹©äº†ç”¨tensorflowæ­å»ºä¸€ä¸ªç®€å•çš„åˆ†ç±»å™¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ¯•ç«Ÿï¼Œèƒ½è®©ç”µè„‘ç´¯çš„å°±ä¸èƒ½è®©è‡ªå·±ç´¯ç€äº†æ˜¯å§ã€‚</p>
<p>è¿™é‡Œå› ä¸ºtf2æ–°å¢äº†kerasï¼Œå¼€å‘å’Œè°ƒè¯•æ•ˆç‡è¾ƒé«˜ï¼Œæ‰€ä»¥é€‰æ‹©é€»è¾‘ç®€æ´çš„tf2ä½œä¸ºå¼€å‘ç¯å¢ƒã€‚</p>
<p>å®‰è£…tensorflow 2æ­¥éª¤å¤§è‡´å¦‚ä¸‹ï¼ˆæˆ‘å½“ç„¶æ˜¯é€‰æ‹©ä¸ŠGitHubç™½å«–ï¼Œäº¤å‰ç¼–è¯‘ç®€ç›´éš¾é¡¶ã€‚ä»…pi3ï¼Œ4ï¼Œç›´æ¥ä¸Šå‘½ä»¤å§ï¼‰ï¼š</p>

<pre><code>sudo pip3 install --upgrade setuptools
sudo apt-get install -y libhdf5-dev libc-ares-dev libeigen3-dev
sudo pip3 install keras_applications==1.0.8 --no-deps
sudo pip3 install keras_preprocessing==1.1.0 --no-deps
sudo pip3 install h5py==2.9.0
sudo apt-get install -y openmpi-bin libopenmpi-dev
sudo apt-get install -y libatlas-base-dev
pip3 install -U --user six wheel mock
wget images/upload/2020-01/Tensorflow-bin-master/tensorflow-2.1.0-cp37-cp37m-linux_armv7l.whl
sudo pip3 uninstall tensorflow
sudo -H pip3 install tensorflow-2.1.0-cp37-cp37m-linux_armv7l.whl
</code></pre>
<p>tfå®‰è£…çš„å…¶ä»–é—®é¢˜è¯¦è§ï¼š<a href="https://github.com/PINTO0309/Tensorflow-bin">Tensorflow-Biné¢„ç¼–è¯‘åŒ…</a>ï¼Œ<a href="https://www.tensorflow.org/install/source_rpi">TFå®˜ç½‘å¸®åŠ©</a></p>
<p>å®‰è£…å®Œæˆåè¿›å…¥python3ä½¿ç”¨importæ£€æŸ¥æ˜¯å¦å¯ä»¥æˆåŠŸå¼•ç”¨ã€‚</p>
<p>ä»¥ä¸Šæ­¥éª¤é¡ºåˆ©æ‰§è¡Œå®Œï¼Œå°±å¯ä»¥å¼€å§‹æˆ‘ä»¬çš„å¼€å‘äº†ï¼Œ<del>è¯¦è§ä¸‹ä¸€ç¯‡æ–‡ç« </del>å’•å’•å’•å’•å’•å’•å’•ã€‚</p>
]]></description><link>https://vaala.cat/posts/robomaster-opencv-and-tensorflow-car-environment-preparation</link><guid isPermaLink="true">https://vaala.cat/posts/robomaster-opencv-and-tensorflow-car-environment-preparation</guid><pubDate>Tue, 10 Dec 2019 22:55:35 GMT</pubDate></item><item><title><![CDATA[åœ¨æ ‘è“æ´¾3bä¸Šæ¥æ”¶xbox one è“ç‰™æ‰‹æŸ„æ•°æ®]]></title><description><![CDATA[<p>â€”â€”æ™ºèƒ½å°è½¦</p>
<p>å› ä¸ºæ ¡èµ›è¦æ±‚è¦åˆ¶ä½œä¸€ä¸ªæ™ºèƒ½å°è½¦ï¼Œå¾—æœ‰é¥æ§åŠŸèƒ½ï¼Œç»¼åˆæƒè¡¡äº†å„ç§é¥æ§æ–¹å¼ï¼Œå¦‚webç«¯ï¼Œappï¼Œå‘ç°æŒç»­æ€§å’Œæ“ä½œç»´åº¦å¾ˆå°‘ï¼Œäºæ˜¯é€‰æ‹©äº†æˆ‘çš„xboxè“ç‰™æ‰‹æŸ„ï¼ˆåœ¨æŸ¥èµ„æ–™çš„æ—¶å€™è¿˜å‘ç°æ ‘è“æ´¾å°†GPIOçš„ä¸²å£åˆ†é…ç»™äº†è“ç‰™ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸èƒ½å…¬ç”¨GPIOä¸²å£å’Œè“ç‰™ï¼Œäºæ˜¯é€‰æ‹©äº†ä½¿ç”¨usbçº¿è¿æ¥arduinoï¼‰</p>
<hr>
<p>åœ¨Googleä½¿ç”¨ä¸­æ–‡å…³é”®è¯æœç´¢äº†næ¬¡æ²¡æœ‰å‘ç°ä»€ä¹ˆæœ‰ç”¨çš„æ•°æ®ï¼Œäºæ˜¯ä½¿ç”¨è‹±æ–‡å…³é”®è¯æ£€ç´¢åˆ°äº†å¤§é‡å¯ç”¨æ•°æ®ï¼ˆè¿˜æ˜¯å¥½å¥½å­¦è‹±æ–‡å§ï¼‰ï¼Œåœ¨GitHubä¸Šä¹Ÿæ‰¾åˆ°äº†ä¸å°‘è½®å­å¯ä»¥ç›´æ¥ç”¨çš„</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯æ ‘è“æ´¾ç›´æ¥è¿æ¥è“ç‰™æ˜¯ä¸å¯è¡Œçš„ï¼Œä¼šæç¤ºæ— å¯ç”¨æœåŠ¡ï¼Œåœ¨æŸ¥åˆ°çš„èµ„æ–™çœ‹æ¥ï¼Œéœ€è¦è¿™æ ·æ“ä½œ<a href="https://github.com/erviveksoni/xbox-raspberrypi-rover">https://github.com/erviveksoni/xbox-raspberrypi-rover</a>è¿˜æœ‰è¿™ä¸ª<a href="https://github.com/atar-axis/xpadneo/tree/master/docs">https://github.com/atar-axis/xpadneo/tree/master/docs</a></p>
<p>æŒ‰xpadneoçš„readmeè¿æ¥æˆåŠŸåæ‰‹æŸ„ä¼šéœ‡åŠ¨æç¤º</p>
<p>è¿æ¥æˆåŠŸåå°±åœ¨Pythonä¸­å¯ä»¥ä½¿ç”¨pygameåŒ…é‡Œé¢çš„joysitckè¯»å–æ‰‹æŸ„æ•°æ®äº†ï¼ˆæœ‰ç‚¹å¥‡æ€ªçš„å°±æ˜¯é‚£ä¸ªğŸ®çš„æ–¹å‘æŒ‰é”®æ²¡æœ‰è¢«è¯»å–åˆ°QAQï¼‰</p>
<p>è¿˜è¦åæ§½ä¸€ä¸‹æ‰‹æŸ„çš„æ•°æ®ï¼Œè¿™ä¸ªæé™å€¼æœ‰ç‚¹ä¸å¯¹åŠ²å•Šï¼Œæ‘‡æ†å‘å·¦æé™æ˜¯-1ï¼Œå‘å³å´åªæœ‰0.998xxxxxxï¼Œæ›´å¥‡æ€ªçš„æ˜¯å¥½å‡ ä¸ªè½´çš„æé™å€¼éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä¸çŸ¥é“å·¨ç¡¬æ˜¯æ€ä¹ˆæƒ³çš„</p>
<p>è¿™é‡Œè¿˜è´´å‡ ä¸ªå¼€å‘ä¸­é‡åˆ°çš„å°å‘ï¼Œç”±äºä¸Šä½æœºæ ‘è“æ´¾æ¥æ”¶é¥æ§æ•°æ®ç„¶åé€šè¿‡USBä¸²å£ä¼ ç»™ä¸‹ä½æœºArduinoï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­æœ‰ä¸‰ä¸ªé—®é¢˜</p>
<p>ä¸€ä¸ªæ˜¯æˆ‘åœ¨Arduino IDEå‘æ•°æ®æ˜¯å®Œå…¨æ²¡æœ‰é—®é¢˜çš„ï¼Œç”¨pyserialç»™Arduinoå‘æ•°æ®å´å‡ºç°äº†ä¸è¯†åˆ«çš„æƒ…å†µï¼Œå¤šæ¬¡è¯•éªŒåå‘ç°è¿™æ˜¯å› ä¸ºpyserialå‘é€é€Ÿåº¦è¿‡å¿«ï¼Œå‘é€çš„å¤šä¸ªå­—ç¬¦ä¸²è¢«å½“æˆä¸€ä¸ªä¸²å¤„ç†ï¼Œè§£å†³æ–¹æ³•æ˜¯åŠ ä¸€ä¸ªå‘é€å»¶æ—¶</p>
<p>å¦ä¸€ä¸ªå°±æ˜¯å‘é€æ•°æ®çš„ç¼–ç é—®é¢˜ï¼ŒPythonä¸­ä¸€èˆ¬æ˜¯utf8ç¼–ç ï¼Œè€ŒArduinoå´æ˜¯ASCIIï¼Œæ‰€ä»¥å‘é€çš„ç±»å‹åº”è¯¥æ˜¯ASCIIçš„bytesæ•°æ®</p>
<p>è¿˜æœ‰ä¸€ä¸ªæ˜¯æˆ‘åœ¨æœ€åé¥æ§çš„æ—¶å€™å‘ç°ï¼Œæ¯å½“é¥æ§æ­£å¸¸æ“ä½œä¸€æ®µæ—¶é—´ï¼Œéƒ½ä¼šå‡ºç°å¡é¡¿ï¼ŒåŸå› æ˜¯serialçš„printé€Ÿåº¦å¤ªæ…¢ï¼Œå¤§é‡æ•°æ®å¡åœ¨ç¼“å­˜å¯¼è‡´Arduinoè¿è¡Œæ…¢ï¼Œåˆ æ‰serial.printå³å¯</p>
<p>æœ‰æ—¶é—´ä¼ ä¸€æ³¢æ•´è½¦å›¾ç‰‡å­ï¼ˆé¥æ§æ‰‹æ„ŸçœŸå¿ƒä¸é”™</p>
]]></description><link>https://vaala.cat/posts/åœ¨æ ‘è“æ´¾3bä¸Šæ¥æ”¶xbox-one-è“ç‰™æ‰‹æŸ„æ•°æ®</link><guid isPermaLink="true">https://vaala.cat/posts/åœ¨æ ‘è“æ´¾3bä¸Šæ¥æ”¶xbox-one-è“ç‰™æ‰‹æŸ„æ•°æ®</guid><pubDate>Thu, 07 Nov 2019 14:03:09 GMT</pubDate></item><item><title><![CDATA[Surface book 2 ç»´ä¿®æ‚è®°]]></title><description><![CDATA[<p>ç”¨äº†ä¸€å¹´çš„SB2å–äº†æ¯æ°´ï¼Œè‡ªå·±ç”¨å¹é£å¤„ç†åå¹¶æ— åµç”¨ï¼Œå½“å¤©æ™šä¸Šé£æ‰‡å…³æœºåç»§ç»­è½¬åŠ¨ï¼Œæ‰˜äººæ‹¿ç»™å”®åï¼Œå”®åè¡¨ç¤ºäººä¸ºæŸåå¹¶ä¸æƒ³ç»´ä¿®ã€‚ æ‰¾åˆ°ç¬¬ä¸‰æ–¹ç»´ä¿®ï¼ŒèŠ±äº†3kå¤§æ´‹è¿‡æ›´æ¢äº†ä¸»æ¿å’Œé”®ç›˜ï¼ˆé”®ç›˜ä¼¼ä¹å¹¶æœªæ›´æ¢ï¼Œé‚£ä¸ªè¢«æˆ‘ç”¨å¹é£æœºçƒ­é£å¹å˜å½¢çš„é”®å¸½è¿˜åœ¨é‚£é‡Œã€‚ã€‚ã€‚ï¼‰ è¿™é‡Œè¦åæ§½ä¸€ä¸‹ç¬¬ä¸‰æ–¹ç»´ä¿®çš„ä¸“ä¸šç¨‹åº¦ï¼Œç«Ÿç„¶ç”¨åŒé¢èƒ¶ç²˜è´´Dé¢é¢æ¿ï¼Ÿï¼Ÿï¼Ÿ å¹¶ä¸”ç•™ä¸‹äº†åé—ç—‡ï¼šé”®ç›˜éƒ¨åˆ†å……ç”µåªèƒ½å……åˆ°65%ï¼Œè€Œä¸”å‡ºç°äº†åˆ†ç¦»åé”®ç›˜èƒŒå…‰ç¯ä»ç„¶äº®èµ·ï¼ˆä»¥å‰å¹¶ä¸ä¼šï¼‰ï¼Œæ—¢ç„¶ç¬¬ä¸‰æ–¹å·²ç»å¤„ç†å®Œè¿›æ°´ï¼Œæˆ‘å°±æ‰“ç®—å»å¾®è½¯å®˜æ–¹å”®åç¢°ç¢°è¿æ°”ã€‚ åœ¨<a href="https://support.microsoft.com/zh-cn/devices/">å¾®è½¯å”®åé¡µé¢</a>ä¸‹ç»´ä¿®è®¢å•ï¼Œç»´ä¿®ç±»å‹é€‰æ‹©ï¼šç¡¬ä»¶é—®é¢˜-åº•åº§è¿æ¥é—®é¢˜ <img src="/images/upload/2019-07/Screenshot_20190709-074420.jpg" alt=""> <img src="/images/upload/2019-07/Screenshot_20190709-074524.jpg" alt=""> ä¸‹å•åå¾®è½¯å‘æ¥ä¸€å°é‚®ä»¶ï¼Œè¡¨ç¤ºFedExä¼šæ¥æ”¶ä»¶ <img src="/images/upload/2019-07/Screenshot_20190709-074710.jpg" alt=""> ç„¶è€Œæˆ‘è¿™ç§ä¸‰çº¿å°åŸå¹¶æ— FedExç½‘ç‚¹ï¼Œä¸è¿‡è¿‡äº†ä¸¤å¤©ï¼Œæœ‰ä¸ªéå¸¸ä¸“ä¸šçš„FedExå®¢æœæ‰“ç”µè¯å’Œæˆ‘ç¡®è®¤å–ä»¶æ—¶é—´ï¼Œæˆ‘å‘ç°æ˜¯å¦å¤–ä¸€ä¸ªå•¥æ²¡å¬è¿‡çš„å¿«é€’å…¬å¸ï¼ŒæŒ‰å•å·æŸ¥è¯¢å¾—çŸ¥ï¼Œè¿™ä¸ªå¿«é€’å…¬å¸æ˜¯å°†æœºå™¨è¿é€åˆ°FedExç½‘ç‚¹ï¼Œå†ç”±FedExé€è‡³å¾®è½¯ã€‚ <img src="/images/upload/2019-07/Screenshot_20190709-075045.jpg" alt=""> åˆè¿‡äº†nå¤©æ”¶åˆ°äº†å¦ä¸€å°é‚®ä»¶ <img src="/images/upload/2019-07/Screenshot_20190709-075140.jpg" alt=""> ä¸€å¤©ååˆæ”¶åˆ°å¦ä¸€å°é‚®ä»¶ æ­¤æ—¶æŸ¥çœ‹å”®åé¡µé¢ <img src="/images/upload/2019-07/Screenshot_20190709-075258.jpg" alt=""> å‘ç°å·²ç»å‘è´§ï¼Œé‚®ä»¶ä¼¼ä¹å­˜åœ¨æ•°æ®å»¶è¿Ÿï¼Œæ—¶é—´ä¼šæ™šä¸Šä¸€å¤©ï¼Œå¯èƒ½æ˜¯æˆ‘ç”¨äº†VPNå¯¼è‡´æ˜¯ç¾å›½æ—¶é—´ã€‚</p>
<hr>
<p>2019.07.18 æ”¶åˆ°ç¬”è®°æœ¬6å¤©ï¼Œä¸å¾—ä¸è¯´å®˜æ–¹ç»´ä¿®çš„æ•ˆæœä¸é”™ï¼Œä¸è¿‡æŠŠæˆ‘æœºå™¨Dé¢æ–°å¢äº†å‡ æ¡åˆ’ç—•ï¼Œè¿˜æŠŠæˆ‘è†œå…¨éƒ¨æ’•æ‰WTFï¼Œä¸è¿‡ä¹Ÿæ— ä¼¤å¤§é›…ï¼Œæ¯•ç«Ÿæ²¡ç»™é’±æ˜¯æŠŠï¼Œå†ä¹°å¼ è´´ä¸Šå°±å¥½äº†</p>
]]></description><link>https://vaala.cat/posts/surface-book-2-ç»´ä¿®æ‚è®°</link><guid isPermaLink="true">https://vaala.cat/posts/surface-book-2-ç»´ä¿®æ‚è®°</guid><pubDate>Tue, 09 Jul 2019 07:41:33 GMT</pubDate></item><item><title><![CDATA[è„‘æ´ï¼šæ¯æ—¥çŸ¥ä¹]]></title><description><![CDATA[<p>æ¯å¤©åœ¨æ•™å®¤æ— èŠå•Šï¼Œåªæœ‰é€›é€›çŸ¥ä¹æ‰æœ‰è¶£ã€‚ åˆä¸èƒ½æ˜ç›®å¼ èƒ†çš„å¼€æ‰‹æœºï¼Œé‚æ‰“ç®—åšä¸€ä¸ªæ‰“å°çŸ¥ä¹æ–‡ç« çš„å°å·¥å…· å®ƒéœ€è¦ä»¥ä¸‹åŠŸèƒ½ï¼š</p>

<ol>
<li>æ¥å—å‘é€çš„çŸ¥ä¹é“¾æ¥</li>
<li>ä¿å­˜é“¾æ¥å¯¹åº”æ ‡é¢˜ï¼Œç­”æ¡ˆçš„æ–‡å­—å’Œä½œè€…</li>
<li>è‡ªåŠ¨æ’ç‰ˆ</li>
<li>pdfæˆ–ç›´æ¥æ‰“å°è¾“å‡º</li>
</ol>
<p>å‘å·²æŒ–ï¼Œå¾…å¡«</p>
]]></description><link>https://vaala.cat/posts/è„‘æ´ï¼šæ¯æ—¥çŸ¥ä¹</link><guid isPermaLink="true">https://vaala.cat/posts/è„‘æ´ï¼šæ¯æ—¥çŸ¥ä¹</guid><pubDate>Wed, 08 May 2019 01:19:27 GMT</pubDate></item><item><title><![CDATA[æ–°è„‘æ´ï¼šNFC+WiFi direct]]></title><description><![CDATA[<p>çœ‹äº†åä¸ºæœ€è¿‘å¹å¾—å¾ˆå‰å®³çš„Huawei share3.0ï¼ˆå°±æ˜¯æ‰‹æœºä¸€ç¢°ç”µè„‘å°±è‡ªåŠ¨ä¼ æ–‡ä»¶é‚£ä¸ªï¼‰ï¼Œæ„Ÿè§‰æ˜¯éå¸¸çš„æ–¹ä¾¿ï¼Œç„¶è€Œæˆ‘å¹¶ä¸æƒ³ç”¨åä¸ºçš„æ‰‹æœºï¼ˆå…¶å®æ˜¯æˆ‘æ²¡é’±ï¼‰ æœ¬æ¥å·²ç»æ”¾å¼ƒè¿™ä¸œè¥¿ï¼Œä½†æ˜¯çœ‹åˆ°è¯´åªè¦æ˜¯åä¸ºç¬”è®°æœ¬ï¼Œä¸ç®¡æ˜¯æ–°æ¬¾è¿˜æ˜¯æ—§æ¬¾ï¼Œæ‹¿åˆ°ä¸“å–åº—å°±èƒ½å‡çº§è¿™ç©æ„å„¿ï¼Œæˆ‘å°±å¯»æ€æ—§æ¬¾çš„ç¬”è®°æœ¬ä¹Ÿæ²¡NFCè¿™ç©æ„å„¿å•Šï¼Œæ€ä¹ˆå®ç°ä¸€ç¢°ä¼ çš„ã€‚ æŸ¥è¯¢ç›¸å…³èµ„æ–™åå‘ç°è¿™ä¸œè¥¿å°±æ˜¯ä¸ªNFC tagè´´åœ¨ç”µè„‘ä¸Šã€‚ã€‚ã€‚ã€‚ ä¸å¾—ä¸è¯´çš„ç¡®å¾ˆæœºæ™º <img src="/images/upload/2019-04/s6dd94b82-26ea-4d53-a0c3-42ec3ff533833266178627231986992.jpg" alt=""> åˆ†æåæˆ‘è®¤ä¸ºè¿™ä¸ªä¸œè¥¿æ˜¯é€šè¿‡æ‰‹æœºåˆ·NFCè¿ä¸Šç”µè„‘çƒ­ç‚¹ç„¶åä¼ è¾“æ–‡ä»¶ï¼Œä½†æ˜¯çœ‹åˆ°è§†é¢‘æ¼”ç¤ºé‡Œé¢ä¼ æ–‡ä»¶å¹¶æ²¡æœ‰å½±å“åˆ°è¿æ¥ï¼Œåˆæ‰¾äº†ä¸€å¤§å †èµ„æ–™åå‘ç°è¿˜æœ‰ä¸ªWiFi directè¿™ç©æ„å„¿ï¼Œå¯ä»¥å®ç°è®¾å¤‡ç«¯åˆ°ç«¯çš„è¿æ¥ï¼Œé€Ÿåº¦è¿˜æ¯”è¾ƒå¿« è¿™æ ·çš„è¯è½¯ä»¶çš„æ¶æ„å°±å·²ç»æˆå‹äº†ï¼š ï¼ˆå¾…æ›´æ–°ï¼‰</p>
]]></description><link>https://vaala.cat/posts/æ–°è„‘æ´ï¼šnfcwifi-direct</link><guid isPermaLink="true">https://vaala.cat/posts/æ–°è„‘æ´ï¼šnfcwifi-direct</guid><pubDate>Wed, 08 May 2019 01:15:34 GMT</pubDate></item><item><title><![CDATA[åœ¨windows10ä¸‹è½¬æ¢mbrç£ç›˜ä¸ºgptçš„å¤§å‘]]></title><description><![CDATA[<p>ä»Šå¤©æƒ³è¯•è¯•1809çš„äº‘å‰ªè´´æ¿åŠŸèƒ½ï¼Œç»“æœå‘ç°å°å¼ç”µè„‘è¿˜å¤„äº1803ï¼Œé‚åŠ å…¥é¢„è§ˆè®¡åˆ’ï¼Œä¸‹è½½å‡çº§åŒ…åå‘ç°ç«Ÿç„¶ä¸æ”¯æŒmbræ ¼å¼ç£ç›˜ï¼Œæ‰¾äº†ä¸€å¤§å †èµ„æ–™åå‘ç°å·¨ç¡¬åœ¨è‡ªå®¶1703åå°±è‡ªå¸¦äº†mbr2gpt.exeã€‚</p>

<pre><code>mbr2gpt /validate /allowfullos
mbr2gpt /convert /disk:0 /allowfullos
</code></pre>
<p>éªŒè¯å¹¶è½¬æ¢ç£ç›˜ï¼Œç¬¬ä¸€æ¬¡ç«Ÿç„¶å¤±è´¥äº†ï¼Œæˆ‘å†å°è¯•ä¸€æ¬¡åå‘ç°è½¬æ¢æˆåŠŸï¼Œå°±é‡å¯ç”µè„‘ï¼Œç»“æœå°±å‡ºç°äº†ä¸‹é¢è¿™ç§æƒ…å†µ</p>
<p><img src="/images/upload/2019-03/WIN_20190324_14_40_05_Pro-1024x576.jpg" alt=""></p>
<blockquote>
<p><br>0xC000000Eæˆ–STATUS_NO_SUCH_DEVICEè¡¨ç¤ºç¡¬ä»¶æ•…éšœæˆ–é©±åŠ¨å™¨é…ç½®ä¸æ­£ç¡®ã€‚ æ£€æŸ¥ç”µç¼†å¹¶ä½¿ç”¨é©±åŠ¨å™¨åˆ¶é€ å•†æä¾›çš„è¯Šæ–­å®ç”¨ç¨‹åºæ£€æŸ¥é©±åŠ¨å™¨ã€‚ å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯è¾ƒæ—§çš„PATAï¼ˆIDEï¼‰é©±åŠ¨å™¨ï¼Œåˆ™æ­¤çŠ¶æ€ä»£ç å¯èƒ½è¡¨ç¤ºä¸»/ä»å±é©±åŠ¨å™¨é…ç½®ä¸æ­£ç¡®ã€‚<br>å¯¼è‡´è¿™äº›é”™è¯¯çš„åŸå› å¯èƒ½æ˜¯winload.exeæ–‡ä»¶æ— æ³•è®¿é—®æˆ–æŸåï¼Œæˆ–è€…æ— æ³•æ‰¾åˆ°æ“ä½œç³»ç»Ÿçš„å¼•å¯¼ä½ç½®ã€‚</p>
<p>å°è¯•ä½¿ç”¨ä¸‹åˆ—æ–¹æ³•ä¿®å¤ä½ çš„è®¾å¤‡<br>--é‡å»ºBCDã€‚<br>--ä½¿ç”¨è‡ªåŠ¨ä¿®å¤å·¥å…·ã€‚<br>--æ£€æŸ¥ç‰©ç†è®¾å¤‡è¿æ¥ã€‚<br>--é‡ç½®BIOS / UEFIé…ç½®ã€‚<br>--å°†æ‚¨çš„ç£ç›˜æ ‡è®°ä¸ºåœ¨çº¿ã€‚</p>
<p>å¾®è½¯å®˜æ–¹å›å¤  </p>
</blockquote>
<p>åˆæ­¥åˆ¤æ–­ä¸ºå¼•å¯¼æ–‡ä»¶æŒ‚æ‰ï¼Œäºæ˜¯åŠ è½½peä¿®å¤å¼•å¯¼ï¼Œç”¨å¾®peè‡ªå¸¦çš„å¼•å¯¼ä¿®å¤å·¥å…·ä¿®å¤</p>
<p><img src="/images/upload/2019-03/WIN_20190324_14_53_26_Pro-1024x576.jpg" alt=""></p>
<p>å‘ç°å¹¶æ²¡æœ‰ä»€ä¹ˆåµç”¨ã€‚ã€‚ã€‚é‚å†æ¬¡å°è¯•ï¼Œé‡å¯åå‘ç°è¿˜æ˜¯æ²¡æœ‰ä»€ä¹ˆåµç”¨</p>
<p>é‚ä½¿ç”¨bcdä¿®å¤</p>

<pre><code>cd c:/windows/system32 
bcdedit /set {default} osdevice boot 
bcdedit /set {default} device boot 
bcdedit /set {default} detecthal 1
</code></pre>
<p>æ›´æ–°ï¼š4æœˆ15æ—¥ï¼Œé‡è£…ç³»ç»Ÿï¼ŒçœŸé¦™</p>
]]></description><link>https://vaala.cat/posts/åœ¨windows10ä¸‹è½¬æ¢mbrç£ç›˜ä¸ºgptçš„å¤§å‘</link><guid isPermaLink="true">https://vaala.cat/posts/åœ¨windows10ä¸‹è½¬æ¢mbrç£ç›˜ä¸ºgptçš„å¤§å‘</guid><pubDate>Mon, 15 Apr 2019 23:40:53 GMT</pubDate></item><item><title><![CDATA[åœ¨wpä¾§è¾¹æ ä¸­æ·»åŠ svgæŒ‰é’®å¹¶æ·»åŠ åŠ¨ç”»]]></title><description><![CDATA[<p>çœ‹äº†<a href="https://moy.cat">moycat</a>ä¸»é¡µçš„ä¸ªäººä»‹ç»æ é‚£å‡ ä¸ªæŒ‰é’®åŠ¨ç”»æ¼‚äº®å¾—ä¸è¡Œï¼ˆæ•ˆæœå›¾å¦‚å³ä¸‹ï¼‰ï¼Œæ‰“ç®—åœ¨Wordpressä¸­åšä¸€ä¸ªé•¿å¾—å·®ä¸å¤šçš„æŒ‰é’®</p>
<p>å‚è€ƒ<a href="https://codepen.io/luiscarvalho/pen/hJFrxl">https://codepen.io/luiscarvalho/pen/hJFrxl</a>é‡Œé¢çš„å†…å®¹ï¼Œå¼€å§‹æ“ä½œ</p>
<p><img src="/images/upload/2018-08/image-1.png" alt=""></p>
<p>moyä¸ªäººä»‹ç»  </p>
<p>æŒ‰é’®çš„æ ·å¼å°±ç”¨svgæ¥ç”»äº†ï¼Œæˆ‘ä»¬æ˜¾ç„¶ä¸å¯èƒ½ç”¨pathä¸€ä¸ªç‚¹ä¸€ä¸ªç‚¹çš„æï¼Œæ‰€å¹¸Adobe illstrator å¯ä»¥ç›´æ¥å¯¼å‡ºsvgèµ„æº</p>
<p>åœ¨AIä¸­ç”»å¥½æŒ‰é’®å›¾ï¼Œå³é”®å¯¼å‡ºåˆ°èµ„æºé€‰æ‹©svgæ ¼å¼ï¼ˆå»ºè®®å°ä¸€ç‚¹ï¼ŒçŸ¢é‡å›¾æ”¾å¤§å¹¶ä¸ä¼šå‡ºç°è¾¹ç¼˜é”¯é½¿ï¼‰ï¼Œç”¨ç¼–è¾‘å™¨æ‰“å¼€ä¿å­˜çš„æ–‡ä»¶ï¼Œåˆ æ‰ä¸éœ€è¦çš„ä¸œè¥¿</p>
<p>å¤åˆ¶æ–‡ä»¶å†…å®¹ï¼Œè¿›å…¥Wordpressçš„è‡ªå®šä¹‰ï¼Œåœ¨å°å·¥å…·é‡Œé¢æ·»åŠ ä¸€ä¸ªè‡ªå®šä¹‰HTMLï¼Œè®²å¤åˆ¶çš„svgæ–‡ä»¶å†…å®¹ç²˜è´´åˆ°å†…å®¹é‡Œé¢ï¼Œç»™svgæ·»åŠ ä¸€ä¸ªé“¾æ¥</p>

<pre><code>&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; viewBox=&quot;0 0 30 30&quot; width=&quot;30px&quot; height=&quot;30px&quot; &gt;
&lt;defs&gt;&lt;style&gt;.cls-1{fill:#1088ea;}&lt;/style&gt;&lt;/defs&gt;
&lt;title&gt;zhihu 30px&lt;/title&gt;
&lt;g id=&quot;zhihu&quot; data-name=&quot;zhihu&quot;&gt;
&lt;path class=&quot;cls-1&quot; d=&quot;M9,20.88a13.25,13.25,0,0,0,1.25-1c.15-.12.22-.11.35,0,1.24,1.35,2.41,2.75,3.58,4.16a2.27,2.27,0,0,1,.44,1.23,8.16,8.16,0,0,1-.28,3L8.83,21.52c-.17.55-.32,1.07-.49,1.58A17.56,17.56,0,0,1,5.84,28,4.91,4.91,0,0,1,2.61,29.9,5.63,5.63,0,0,1,0,29.78c0-.12.11-.15.18-.2a19.68,19.68,0,0,0,4.76-5.51,17.33,17.33,0,0,0,2.18-6.65,4.1,4.1,0,0,1,.06-.49c0-.2,0-.23-.21-.23H.77c-.3,0-.3,0-.23-.3a4.83,4.83,0,0,1,.58-1.52,1.27,1.27,0,0,1,1.17-.65c1.63,0,3.26,0,4.9,0,.18,0,.24,0,.25-.24.09-2.4.13-4.81.16-7.22,0-.18-.06-.22-.22-.22H4.84c-.15,0-.21.06-.27.2a7.26,7.26,0,0,1-.64,1.64,4.19,4.19,0,0,1-3.35,2c-.13,0-.25,0-.14-.18a58,58,0,0,0,3-7.68,3.47,3.47,0,0,1,3-2.48s.09,0,.11,0h.25a.6.6,0,0,1-.08.35C6.24,1.55,5.86,2.76,5.52,4c-.06.23,0,.28.2.27h8.64a.77.77,0,0,1,.89.64,4.48,4.48,0,0,1,.17,1.55c0,.12-.08.13-.17.13H10.41c-.2,0-.26,0-.26.25q0,2.82-.12,5.64c0,.5,0,1-.09,1.5,0,.25.05.29.27.29,1.64,0,3.28,0,4.92,0a.6.6,0,0,1,.62.4,6.13,6.13,0,0,1,.33,1.94c0,.12-.06.13-.15.13H10c-.16,0-.25,0-.26.22a17.87,17.87,0,0,1-.68,3.7.36.36,0,0,0,0,.25s0,0,0,0,0,0,0,0Z&quot;/&gt;
&lt;path class=&quot;cls-1&quot; d=&quot;M30,15.21c0,3.68,0,7.37,0,11.06,0,.23,0,.31-.29.3-1.52,0-3,0-4.56,0a.74.74,0,0,0-.43.12q-1.92,1.24-3.86,2.47c-.24.16-.24.16-.33-.13-.21-.75-.43-1.5-.64-2.25-.05-.16-.11-.22-.28-.22h-2c-.19,0-.22-.06-.22-.23V4.11c0-.19,0-.25.23-.25h12.1c.24,0,.25.1.25.29C30,7.83,30,11.52,30,15.21Zm-10,0v8.68c0,.18,0,.25.22.24s.49,0,.74,0a.27.27,0,0,1,.33.25c.11.45.26.88.37,1.33.06.21.12.24.3.12l2.45-1.58a.7.7,0,0,1,.4-.12h2.39c.23,0,.27-.07.27-.29V6.6c0-.23-.06-.28-.28-.28H20.25c-.23,0-.28.06-.27.29Z&quot;/&gt;
&lt;path class=&quot;cls-1&quot; d=&quot;M9,20.88l0,0s0,0,0,0,0,0,0,0Z&quot;/&gt;
&lt;/g&gt;
&lt;/svg&gt;
</code></pre>
<p><img src="/images/upload/2018-08/image-4.png" alt=""></p>
<p>ç²˜è´´åˆ°å†…å®¹</p>
<p>ç²˜è´´åä¸å¯¹å•Šã€‚ã€‚ã€‚æ€ä¹ˆæœ‰é”™è¯¯ã€‚ã€‚ã€‚æˆ‘æ€ä¹ˆä¹Ÿä¸çŸ¥é“ã€‚ã€‚</p>
<p>æœç´¢åå‘ç°ã€‚ã€‚ã€‚<a href="https://github.com/yaniswang/HTMLHint/wiki/Attr-lowercase">https://github.com/yaniswang/HTMLHint/wiki/Attr-lowercasezhzhi</a> åªéœ€è¦æŠŠviewBoxé‡Œé¢çš„Bæ”¹æˆbå°±è¡Œäº†</p>
<p>åœ¨æœ€åçš„ä»£ç ä¸Šæ·»åŠ è¿™æ®µä»£ç ï¼ˆhoveræ˜¯æŒ‡å®šé€‰æ‹©é¼ æ ‡æŒ‡é’ˆæµ®åŠ¨åœ¨å…¶ä¸Šçš„å…ƒç´ ï¼Œå¹¶è®¾ç½®å…¶æ ·å¼ï¼‰è¿™é‡Œæ˜¯é¼ æ ‡æµ®åŠ¨åœ¨çŸ¥ä¹å›¾æ ‡ä¸Šå¹¶ä¸”å°†é¢œè‰²æ”¹ä¸ºçŸ¥ä¹è“ï¼Œè¿˜è¦å°†ä»¥å‰çš„fillä½ç½®æ”¹åˆ°gæ ‡ç­¾å†…ï¼Œå¦‚æœä¸ä¿®æ”¹ä½ç½®ï¼Œå°±æ— æ³•ä½¿ç”¨åŠ¨ç”»ï¼ˆè¯´å¤šäº†éƒ½æ˜¯æ³ªï¼‰ï¼Œfill=#808080æ·±ç°è‰²</p>

<pre><code>&lt;a href=&quot;https://www.zhihu.com/people/huidcs176&quot;&gt;
&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; viewbox=&quot;0 0 30 30&quot; width=&quot;30px&quot; height=&quot;30px&quot; attr-lowercase = true&gt;
&lt;style&gt;
a svg:hover #zhihu
    {
        fill:#1088ea;
    }
a svg #zhihu { 
  transition: 200ms;
  transition-timing-function: ease-in-out;
  -webkit-transition: 200ms;
  -webkit-transition-timing-function: ease-in-out;
}
&lt;/style&gt;
&lt;title&gt;zhihu&lt;/title&gt;
&lt;g id=&quot;zhihu&quot; data-name=&quot;zhihu&quot; fill=#808080&gt;
&lt;path class=&quot;cls-1&quot; d=&quot;M9,20.88a13.25,13.25,0,0,0,1.25-1c.15-.12.22-.11.35,0,1.24,1.35,2.41,2.75,3.58,4.16a2.27,2.27,0,0,1,.44,1.23,8.16,8.16,0,0,1-.28,3L8.83,21.52c-.17.55-.32,1.07-.49,1.58A17.56,17.56,0,0,1,5.84,28,4.91,4.91,0,0,1,2.61,29.9,5.63,5.63,0,0,1,0,29.78c0-.12.11-.15.18-.2a19.68,19.68,0,0,0,4.76-5.51,17.33,17.33,0,0,0,2.18-6.65,4.1,4.1,0,0,1,.06-.49c0-.2,0-.23-.21-.23H.77c-.3,0-.3,0-.23-.3a4.83,4.83,0,0,1,.58-1.52,1.27,1.27,0,0,1,1.17-.65c1.63,0,3.26,0,4.9,0,.18,0,.24,0,.25-.24.09-2.4.13-4.81.16-7.22,0-.18-.06-.22-.22-.22H4.84c-.15,0-.21.06-.27.2a7.26,7.26,0,0,1-.64,1.64,4.19,4.19,0,0,1-3.35,2c-.13,0-.25,0-.14-.18a58,58,0,0,0,3-7.68,3.47,3.47,0,0,1,3-2.48s.09,0,.11,0h.25a.6.6,0,0,1-.08.35C6.24,1.55,5.86,2.76,5.52,4c-.06.23,0,.28.2.27h8.64a.77.77,0,0,1,.89.64,4.48,4.48,0,0,1,.17,1.55c0,.12-.08.13-.17.13H10.41c-.2,0-.26,0-.26.25q0,2.82-.12,5.64c0,.5,0,1-.09,1.5,0,.25.05.29.27.29,1.64,0,3.28,0,4.92,0a.6.6,0,0,1,.62.4,6.13,6.13,0,0,1,.33,1.94c0,.12-.06.13-.15.13H10c-.16,0-.25,0-.26.22a17.87,17.87,0,0,1-.68,3.7.36.36,0,0,0,0,.25s0,0,0,0,0,0,0,0Z&quot;/&gt;
&lt;path class=&quot;cls-1&quot; d=&quot;M30,15.21c0,3.68,0,7.37,0,11.06,0,.23,0,.31-.29.3-1.52,0-3,0-4.56,0a.74.74,0,0,0-.43.12q-1.92,1.24-3.86,2.47c-.24.16-.24.16-.33-.13-.21-.75-.43-1.5-.64-2.25-.05-.16-.11-.22-.28-.22h-2c-.19,0-.22-.06-.22-.23V4.11c0-.19,0-.25.23-.25h12.1c.24,0,.25.1.25.29C30,7.83,30,11.52,30,15.21Zm-10,0v8.68c0,.18,0,.25.22.24s.49,0,.74,0a.27.27,0,0,1,.33.25c.11.45.26.88.37,1.33.06.21.12.24.3.12l2.45-1.58a.7.7,0,0,1,.4-.12h2.39c.23,0,.27-.07.27-.29V6.6c0-.23-.06-.28-.28-.28H20.25c-.23,0-.28.06-.27.29Z&quot;/&gt;
&lt;path class=&quot;cls-1&quot; d=&quot;M9,20.88l0,0s0,0,0,0,0,0,0,0Z&quot;/&gt;
&lt;/g&gt;
&lt;/svg&gt;
&lt;/a&gt;
</code></pre>
<p>è‡³æ­¤æŒ‰é’®åˆ¶ä½œå®Œæˆï¼Œä½†æ˜¯æˆ‘ä»¬å‘ç°è¿™ä¸ªæŒ‰é’®ä¸‹é¢æœ‰ä¸€æ¡å·¨ä¸‘çš„ä¸‹åˆ’çº¿ï¼Œï¼Œmoyçš„blogé‡Œé¢æ˜¯æ²¡æœ‰è¿™æ¡çº¿çš„ï¼Œè¿™ä¸ªå½“ç„¶æ˜¯aæ ‡ç­¾è‡ªå¸¦çš„ï¼Œå¯ä»¥åœ¨styleæ ‡ç­¾ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç æ¶ˆé™¤ä¸‹åˆ’çº¿</p>

<pre><code>a{text-decoration:none}
</code></pre>
<p>ä½ è¯´å•¥ï¼Œæ²¡ç”¨ï¼Ÿè¿™ä¸ªä½ å°±åˆ«é—®æˆ‘äº†ã€‚ã€‚å› ä¸ºæˆ‘ä¹Ÿä¸çŸ¥é“ä¸ºå•¥ã€‚ã€‚ã€‚</p>
<p>ä½ ä¹Ÿè®¸éœ€è¦ç¼–è¾‘ä¸»é¢˜çš„cssæ ·å¼è¡¨ï¼ˆstyle.cssï¼‰ï¼Œæˆ‘åœ¨æ›´æ¢ä¸»é¢˜åä¸‹åˆ’çº¿æ¶ˆå¤±ï¼ŒçŒœæµ‹æ˜¯å› ä¸ºstyle.cssä¸­çš„è®¾ç½®è¦†ç›–äº†å½“å‰è®¾ç½®</p>
]]></description><link>https://vaala.cat/posts/åœ¨wpä¾§è¾¹æ ä¸­æ·»åŠ svgæŒ‰é’®å¹¶æ·»åŠ åŠ¨ç”»</link><guid isPermaLink="true">https://vaala.cat/posts/åœ¨wpä¾§è¾¹æ ä¸­æ·»åŠ svgæŒ‰é’®å¹¶æ·»åŠ åŠ¨ç”»</guid><pubDate>Mon, 13 Aug 2018 13:39:37 GMT</pubDate></item><item><title><![CDATA[[è½¬è½½]æ­¤æ—¶æˆ‘èººåœ¨æˆéƒ½æŸå®¾é¦†çš„åºŠä¸Š]]></title><description><![CDATA[<h2 id="by-moycat-https-moy-cat-">By <a href="https://moy.cat">moycat</a></h2>
<p>Day -8 //ç”±æ­¤å¯è§moyé»‘å†å²ä¸æ­¢ä¸€æ¡</p>
<p>æ­¤æ—¶æˆ‘èººåœ¨æˆéƒ½æŸå®¾é¦†çš„åºŠä¸Šï¼Œç­‰å¾…ç€éšæ—¶çš„å…¥ç¡ã€‚</p>
<p>æ‰€è°“ç«èµ›å­¦ä¹ ï¼Œå®å·²åå­˜å®äº¡ï¼Œä¸åœ¨å—å……çš„è‡ªä¹ å¹¶æ— ä¸¤æ ·ã€‚è™½ç„¶ï¼Œåœ¨è¿™è¾¹ï¼Œæ„Ÿè§‰ä¼¼ä¹è¦å¥½äº›ã€‚</p>
<p>è¿™æ¬¡åœ¨æˆéƒ½ï¼Œæ²¡æœ‰åŠå¹´å¤šå‰çš„é‚£èˆ¬åŒ†å¿™ï¼Œå€’ç«Ÿæ¯”åœ¨å—å……è¿˜è¦èˆ’çˆ½äº›ã€‚åªæ˜¯æˆéƒ½æ²¡æœ‰å—å……çš„å¤œé›¨ï¼Œå¾ˆæ˜¯å¹²ç‡¥ã€‚</p>
<p>åªæ˜¯æ•Œä¸è¿‡ï¼Œè¿˜å‰©å…«å¤©çš„è¿™ä¸ªäº‹å®ã€‚</p>
<p>ä¸æƒ³è°ˆè‡ªå·±ä¸OIï¼Œç„¶è€Œå¿ä¸ä½ã€‚</p>
<p>ä¸Šä¸ªå­¦æœŸçš„åŠå¹´æ¥ï¼Œä¼¼ä¹æˆ‘æ²¡æœ‰æ”¾è¶…è¿‡ä¸€ä¸ä¸€æ¯«çš„ç²¾åŠ›åœ¨OIä¸­ã€‚2æœˆåŸ¹è®­çš„å›«å›µåæ£åï¼Œä¼¼ä¹å½»åº•æŠŠæˆ‘å™ä½äº†ï¼Œå™äº†åŠå¹´ã€‚æˆ‘æ€€ç–‘åŠå¹´æ¥æˆ‘åšè¿‡å‡ é“OIçš„é¢˜ï¼Œçœ‹è¿‡å‡ é¡µOIçš„ä¹¦ã€‚è¿™å¹¶ä¸å…‰å½©ï¼Œç„¶è€Œä¸ºä½•æˆ‘çš„é›„å¿ƒç«Ÿä¼šèç¼©è‡³æ­¤ï¼Ÿ</p>
<p>æˆ–è®¸æ˜¯æˆ‘æ—©å°±éšéšè§‰å¾—ï¼ŒOIå’Œæ–‡åŒ–è¯¾ã€å…¶ä»–ç«èµ›çš„ç›¸ä¼¼ç‚¹ï¼Œè¿˜æ˜¯æœ‰é‚£ä¹ˆå¤šã€‚</p>
<p>æˆ‘ä¹‹æ‰€ä»¥è®¨åŒå¤§å¤šæ•°é«˜è€ƒè¦è€ƒçš„æ–‡åŒ–è¯¾ï¼Œæ— éæ˜¯åšå®ƒä»¬çš„é¢˜å¾ˆæ˜¯çƒ¦äººï¼šå¦‚æœä½ çŸ¥é“è¿™ä¸ªè§£é¢˜å¥—è·¯ï¼Œé‚£ä¹ˆå¥—è¿›å»ï¼Œå¾—åˆ†ï¼›ä½ è¦æ˜¯ä¸çŸ¥é“ï¼Œä»»ä½ æƒ³ç ´å¤´çš®ï¼Œåšä¸å‡ºæ¥ã€‚</p>
<p>è¿™ä¸–ç•Œä¸Šçš„é—®é¢˜ï¼Œçš„ç¡®å¾ˆå¤šéœ€è¦ç»éªŒå»è§£å†³ï¼Œç»éªŒâ€”â€”æˆ–è®°å¿†ï¼Œæ˜¯äººç±»èµ–ä»¥å­˜æ´»çš„æ ¹åŸºã€‚å¯æ˜¯åœ¨æ–‡åŒ–è¯¾çš„é¢˜ç›®ä¸­ï¼Œè¿™ä¸€ç‚¹è¢«æ— é™æ”¾å¤§äº†ï¼Œä½ å°±æ˜¯è¦èƒŒä½è¿™ä¸ªå¥—è·¯ï¼Œè¿™ä¸ªé¢˜å‹ï¼Œè¿™ä¸ªæ–¹æ³•ï¼Œå¦åˆ™æ­»è·¯ä¸€æ¡ã€‚ä¹Ÿè®¸å¹¶ä¸æ˜¯å¦‚æ­¤å§ï¼Œä½†æˆ‘æ‰€åœ¨çš„ç¯å¢ƒå¤„å¤„å¦‚æ­¤ï¼Œä»¥è‡³äºæˆ‘æ€»è§‰å¾—å…¶ä¸­å¦æœ‰ç›®çš„ã€‚</p>
<p>ä½†OIä¸ä¹Ÿå¦‚æ­¤å—ï¼ŸèƒŒä¸‹å„ç§å„æ ·çš„ç®—æ³•ï¼Œäº†è§£å„ç§å„æ ·çš„é¢˜å‹ã€‚åœ¨STLè¿˜æ²¡è¢«è§£ç¦çš„æ—¶å€™ï¼Œä¸€ä¸ªæ’åºç®—æ³•éƒ½éœ€è¦èƒŒå¾—æƒ³åã€‚é‚£æ—¶å€™ä¹‹æœºæ¢°æ›´ç”šï¼ŒçœŸä¸æ˜ç™½æ˜æ˜æœ‰STLä¸ºä»€ä¹ˆä¸å…è®¸ç”¨ã€‚ä½†OIæ¯•ç«Ÿå’Œå…¶ä»–ç§‘ç›®ä¸åŒï¼Œå¦åˆ™æˆ‘æ—©å°±æ”¾å¼ƒäº†ï¼Œå°±åƒæˆ‘å…¥å­¦çŸ­çŸ­å‡ ä¸ªæœˆåæ”¾å¼ƒç‰©ç†ç«èµ›ä¸€æ ·ã€‚è™½ç„¶æˆ‘ä¸çŸ¥é“æ˜¯ä¸æ˜¯æˆ‘å¯¹ä¿¡æ¯æŠ€æœ¯çš„å–œçˆ±é®ä½äº†ä»€ä¹ˆç¼ºç‚¹ã€‚ä¸è¿‡ä¹Ÿæ— æ‰€è°“äº†ã€‚</p>
<p>åœ¨è¢«å™ä½åŠå¹´åï¼Œæˆ‘æ‰é‡æ–°æ‹¿èµ·OIï¼Œå¤‡æˆ˜NOIPâ€”â€”ä¹Ÿå°±æ˜¯è¿™å­¦æœŸå¼€å§‹å§ã€‚ä»æ‰¾æ—¶é—´ç»ƒï¼Œå†æ™šä¸Šæ”¾å­¦ç•™åœ¨æœºæˆ¿ç»ƒï¼Œåˆåœè¯¾ç»ƒï¼Œç°åœ¨è·‘åˆ°æˆéƒ½ç»ƒã€‚èƒ½æ²‰æµ¸åœ¨è‡ªå·±å–œæ¬¢çš„äº‹æƒ…é‡Œï¼Œæ„Ÿè§‰çœŸæ˜¯å¥½å•Šï¼Œåªæ˜¯è¿™æ—¶é—´å¤ªçŸ­äº†ã€‚ä½†æˆ‘æ²¡æœ‰ä¸ºè¿‡å»çš„åŠå¹´åæ‚”ï¼Œå› ä¸ºæˆ‘çŸ¥é“åæ‚”æ— ç”¨ï¼Œè€Œä¸”å°±ç®—å†æ¥ä¸€æ¬¡ï¼Œä¹Ÿæœªå¿…ä¼šè¢«æˆ‘çæƒœã€‚</p>
<p>å”¯ä¸€ä»¤æˆ‘æ¬£æ…°çš„æ˜¯ï¼ŒNOIPå°±ç®—å¤±è´¥ä¹Ÿä¸ä¼šæ˜¯æˆ‘OIçš„ç»ˆç‚¹ã€‚è¿˜æœ‰çœé€‰ï¼Œè™½ç„¶å¸Œæœ›ä¸å¤§ã€‚ä½†å°†æ¥åˆ°äº†å¤§å­¦ï¼Œæˆ‘å¯ä¸æƒ³å»ACMäº†â€¦â€¦é‚£æ—¶æ—¢ç„¶æœ‰äº†è‡ªç”±ï¼Œæˆ‘å°±ä¼šåšè‡ªå·±æ¢¦æƒ³çš„äº‹ã€‚</p>
<p>ç¦»NOIP2015è¿˜æœ‰çŸ­çŸ­å‡ å¤©ã€‚æœªæ¥çš„äº‹ï¼Œåˆæœ‰è°èƒ½é¢„è§ã€‚</p>
]]></description><link>https://vaala.cat/posts/è½¬è½½æ­¤æ—¶æˆ‘èººåœ¨æˆéƒ½æŸå®¾é¦†çš„åºŠä¸Š</link><guid isPermaLink="true">https://vaala.cat/posts/è½¬è½½æ­¤æ—¶æˆ‘èººåœ¨æˆéƒ½æŸå®¾é¦†çš„åºŠä¸Š</guid><pubDate>Sun, 12 Aug 2018 18:50:15 GMT</pubDate></item></channel></rss>