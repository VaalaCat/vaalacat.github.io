<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><link rel="stylesheet" href="/_next/static/css/93d284478209e5f1.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/633a9ad1601bb6ee.css" data-precedence="next"/><link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/lxgw-wenkai-webfont/1.7.0/style.min.css"/><title>修复 MacOS TimeMachine 的同步错误</title><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="any"/><script src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" noModule=""></script></head><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lxgw-wenkai-webfont/1.7.0/style.min.css"/><body class="antialiased min-h-screen bg-white dark:bg-slate-950 text-slate-900 dark:text-slate-50"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><div class="max-w-2xl mx-auto py-10 px-4"><header><div class="flex items-center justify-between"><button class="border rounded-md w-6 h-6 flex items-center justify-center"><span class="sr-only">Toggle mode</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"></path></svg></button><nav class="ml-auto text-sm font-medium space-x-6"><a class="hover:text-sky-500" href="/">Home</a><a class="hover:text-sky-500" href="/about/">About</a><a class="hover:text-sky-500" href="/link/">Friends</a></nav></div></header><main><article class="py-6 prose dark:prose-invert"><h1 class="mb-2">修复 MacOS TimeMachine 的同步错误</h1><hr class="my-4"/><time dateTime="2022-01-23T20:24:11.000Z" class="mb-2 block text-xs text-gray-600 dark:text-gray-300">January 23, 2022</time><h2>引言</h2>
<p>作为一个新的白🍎用户，对于 TimeMachine 属于又爱又恨，其官方指定的备份目标 AirPort Time Capsule 实在是过于高贵，所以我选择使用一个提供 AFP 服务的 NAS 作为备份目标磁盘 （SMB 协议据说会出现神秘掉盘问题）</p>
<p>在内网中快乐的使用几天后出了趟门，想着使用 Wireguard 连回内网路由段接着备份。理想非常的丰满，实践却出了问题，在某一次备份时意外断了网，回到内网中报了如下错误</p>
<pre><code>无法访问备份磁盘映像“Vaala的MacBook Pro.sparsebundle”（错误35）。
</code></pre>
<p>在 Apple 论坛和互联网中找到的都是让我清除备份重来，就像下面这样</p>
<blockquote>
<p><a href="https://discussionschinese.apple.com/thread/86190">https://discussionschinese.apple.com/thread/86190</a></p>
</blockquote>
<p>但备份不久是为了防止出错？再来清理出错的备份也太本末倒置了，分析问题发生的情况后我选择降低备份频率，使用 TimeMachineEditor 阻止日间备份，并且备份只能在 Mac 不活跃时进行。不出意外，再次苟活几天后又出现了相同错误，原因竟然是 MacOS 在休眠时会自动断开网络连接导致备份失败😅😅😅😅，在经过两次清空备份后，抽了一点时间查找相关资料，得到了最终的解决方案</p>
<h2>步骤</h2>
<ol>
<li>
<p>首先关闭掉 TimeMachine 中的自动备份，其它与 TimeMachine 相关的程序例如 TimeMachineEditor 也尽量终止，在终止后尽量重启一次保证没有进程占用相关资源。</p>
</li>
<li>
<p>找到备份磁盘中的 <code>sparsebundle</code> 文件，将下面命令的路径替换掉。</p>
</li>
</ol>
<pre><code class="hljs language-bash">hdiutil attach -nomount /path/to/sparsebundleFile
</code></pre>
<ol start="3">
<li>得到备份磁盘名称，会有很多个磁盘，找到格式为 <code>/dev/diskNs2</code> 的磁盘，<code>N</code> 为数字，<code>s2</code> 为第二分区，备注为 <code>Apple_APFS</code>，我这里是 <code>/dev/disk4s2</code>，接下来对该分区的备份进行检查。</li>
</ol>
<pre><code class="hljs language-bash"><span class="hljs-comment"># 要注意这里的磁盘前面加了一个r代表raw原始不缓存设备</span>
fsck_hfs -p /dev/rdisk4s2 
</code></pre>
<ol start="4">
<li>如果命令出现错误，将命令中的 p 参数替换为 f 再试一次，如果错误无法修复，还是考虑格式化重来吧</li>
</ol>
<blockquote>
<p>对于错误我们可以使用 <code>diskutil mount diskNs2</code> 挂载镜像并在 Finder 中检查。</p>
</blockquote>
<ol start="5">
<li>然后我们 detatch 备份区</li>
</ol>
<pre><code class="hljs language-bash"><span class="hljs-comment"># 这里没有指定第二分区</span>
hdiutil detach diskN
</code></pre>
<ol start="6">
<li>
<p>确定没有报错然后在 Finder 中找到 <code>sparsebundle</code> 文件，然后在文件上右键单击，点击查看包内容，找到名为 <code>com.apple.TimeMachine.MachineID.plist</code> 的文件，使用 Xcode 打开编辑 （保证xml文件格式不会出错），找到 <code>VerificationState</code> 将值修改为 1</p>
</li>
<li>
<p>如果存在键 <code>RecoveryBackupDeclinedDate</code> 则将其键和值都删除</p>
</li>
<li>
<p>保存修改，在 TimeMachine 设置中移除磁盘，然后再将磁盘加入备份目标，点击立即备份即可</p>
</li>
</ol>
<h2>参考</h2>
<ul>
<li><a href="https://apple.stackexchange.com/questions/375894/inheriting-time-machine-backup-invalid-target">Inheriting Time Machine Backup: Invalid Target</a></li>
</ul>
<blockquote>
<p>MacOS 确实不错，不过里面吃了💩的设定能不能改改啊😅</p>
</blockquote><div class="text-sm w-full text-center text-slate-500 mt-6 mb-2">- The End -</div><hr/><div></div></article></main><footer><p class="text-sm text-slate-500 dark:text-slate-400 text-center mb-0 sm:mb-10">Copyrights © <!-- -->2024<!-- --> VaalaCat. All Rights Reserved.</p></footer></div><script src="/_next/static/chunks/webpack-876f4251bab0ed7d.js" async=""></script><script src="/_next/static/chunks/e5a6a3a4-3bb818ecd9bb262c.js" async=""></script><script src="/_next/static/chunks/313-7e64359f4c0a3e6a.js" async=""></script><script src="/_next/static/chunks/main-app-057d0b1a1c3214a3.js" async=""></script></body></html><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/css/93d284478209e5f1.css\",{\"as\":\"style\"}]\n0:\"$L2\"\n"])</script><script>self.__next_f.push([1,"3:HL[\"/_next/static/css/633a9ad1601bb6ee.css\",{\"as\":\"style\"}]\n"])</script><script>self.__next_f.push([1,"4:I{\"id\":\"9134\",\"chunks\":[\"272:static/chunks/webpack-876f4251bab0ed7d.js\",\"115:static/chunks/e5a6a3a4-3bb818ecd9bb262c.js\",\"313:static/chunks/313-7e64359f4c0a3e6a.js\"],\"name\":\"\",\"async\":false}\n6:I{\"id\":\"1181\",\"chunks\":[\"272:static/chunks/webpack-876f4251bab0ed7d.js\",\"115:static/chunks/e5a6a3a4-3bb818ecd9bb262c.js\",\"313:static/chunks/313-7e64359f4c0a3e6a.js\"],\"name\":\"\",\"async\":false}\n7:I{\"id\":\"4304\",\"chunks\":[\"16:static/chunks/16-ac25bf4963a321a9.js\",\"700:static/chunks/700-52cc25b5c0cceee9.js\",\"185:static/ch"])</script><script>self.__next_f.push([1,"unks/app/layout-cfcdb55ab9601d93.js\"],\"name\":\"Providers\",\"async\":false}\n8:I{\"id\":\"7801\",\"chunks\":[\"16:static/chunks/16-ac25bf4963a321a9.js\",\"700:static/chunks/700-52cc25b5c0cceee9.js\",\"185:static/chunks/app/layout-cfcdb55ab9601d93.js\"],\"name\":\"ModeToggle\",\"async\":false}\n9:I{\"id\":\"1016\",\"chunks\":[\"16:static/chunks/16-ac25bf4963a321a9.js\",\"700:static/chunks/700-52cc25b5c0cceee9.js\",\"185:static/chunks/app/layout-cfcdb55ab9601d93.js\"],\"name\":\"\",\"async\":false}\na:I{\"id\":\"5284\",\"chunks\":[\"16:static/chunks/16-ac25b"])</script><script>self.__next_f.push([1,"f4963a321a9.js\",\"700:static/chunks/700-52cc25b5c0cceee9.js\",\"185:static/chunks/app/layout-cfcdb55ab9601d93.js\"],\"name\":\"Analytics\",\"async\":false}\nb:I{\"id\":\"674\",\"chunks\":[\"272:static/chunks/webpack-876f4251bab0ed7d.js\",\"115:static/chunks/e5a6a3a4-3bb818ecd9bb262c.js\",\"313:static/chunks/313-7e64359f4c0a3e6a.js\"],\"name\":\"\",\"async\":false}\nc:I{\"id\":\"2236\",\"chunks\":[\"272:static/chunks/webpack-876f4251bab0ed7d.js\",\"115:static/chunks/e5a6a3a4-3bb818ecd9bb262c.js\",\"313:static/chunks/313-7e64359f4c0a3e6a.js\"],\"name\""])</script><script>self.__next_f.push([1,":\"\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"2:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/93d284478209e5f1.css\",\"precedence\":\"next\"}]],[\"$\",\"$L4\",null,{\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/posts/%E4%BF%AE%E5%A4%8D-MacOS-TimeMachine-%E7%9A%84%E5%90%8C%E6%AD%A5%E9%94%99%E8%AF%AF/\",\"initialTree\":[\"\",{\"children\":[\"posts\",{\"children\":[[\"slug\",\"%E4%BF%AE%E5%A4%8D-MacOS-TimeMachine-%E7%9A%84%E5%90%8C%E6%AD%A5%E9%94%99%E8%AF%AF\",\"c\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":[\\\"修复-MacOS-TimeMachine-的同步错误\\\"]}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialHead\":[\"$L5\",null],\"globalErrorComponent\":\"$6\",\"notFound\":[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[[\"$\",\"link\",null,{\"rel\":\"stylesheet\",\"href\":\"https://cdnjs.cloudflare.com/ajax/libs/lxgw-wenkai-webfont/1.7.0/style.min.css\"}],[\"$\",\"body\",null,{\"className\":\"antialiased min-h-screen bg-white dark:bg-slate-950 text-slate-900 dark:text-slate-50\",\"children\":[\"$\",\"$L7\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"max-w-2xl mx-auto py-10 px-4\",\"children\":[[\"$\",\"header\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center justify-between\",\"children\":[[\"$\",\"$L8\",null,{}],[\"$\",\"nav\",null,{\"className\":\"ml-auto text-sm font-medium space-x-6\",\"children\":[[\"$\",\"$L9\",null,{\"href\":\"/\",\"className\":\"hover:text-sky-500\",\"children\":\"Home\"}],[\"$\",\"$L9\",null,{\"href\":\"/about\",\"className\":\"hover:text-sky-500\",\"children\":\"About\"}],[\"$\",\"$L9\",null,{\"href\":\"/link\",\"className\":\"hover:text-sky-500\",\"children\":\"Friends\"}]]}]]}]}],[\"$\",\"main\",null,{\"children\":[\"$undefined\",[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]]]}],[\"$\",\"footer\",null,{\"children\":[\"$\",\"p\",null,{\"className\":\"text-sm text-slate-500 dark:text-slate-400 text-center mb-0 sm:mb-10\",\"children\":[\"Copyrights © \",2024,\" VaalaCat. All Rights Reserved.\"]}]}]]}],[\"$\",\"$La\",null,{}]]}]}]]}],\"asNotFound\":false,\"children\":[[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[[\"$\",\"link\",null,{\"rel\":\"stylesheet\",\"href\":\"https://cdnjs.cloudflare.com/ajax/libs/lxgw-wenkai-webfont/1.7.0/style.min.css\"}],[\"$\",\"body\",null,{\"className\":\"antialiased min-h-screen bg-white dark:bg-slate-950 text-slate-900 dark:text-slate-50\",\"children\":[\"$\",\"$L7\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"max-w-2xl mx-auto py-10 px-4\",\"children\":[[\"$\",\"header\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center justify-between\",\"children\":[[\"$\",\"$L8\",null,{}],[\"$\",\"nav\",null,{\"className\":\"ml-auto text-sm font-medium space-x-6\",\"children\":[[\"$\",\"$L9\",null,{\"href\":\"/\",\"className\":\"hover:text-sky-500\",\"children\":\"Home\"}],[\"$\",\"$L9\",null,{\"href\":\"/about\",\"className\":\"hover:text-sky-500\",\"children\":\"About\"}],[\"$\",\"$L9\",null,{\"href\":\"/link\",\"className\":\"hover:text-sky-500\",\"children\":\"Friends\"}]]}]]}]}],[\"$\",\"main\",null,{\"children\":[\"$\",\"$Lb\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Lc\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"asNotFound\":false,\"childProp\":{\"current\":[\"$\",\"$Lb\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Lc\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"asNotFound\":false,\"childProp\":{\"current\":[\"$\",\"$Lb\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\",[\"slug\",\"%E4%BF%AE%E5%A4%8D-MacOS-TimeMachine-%E7%9A%84%E5%90%8C%E6%AD%A5%E9%94%99%E8%AF%AF\",\"c\"],\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Lc\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"asNotFound\":false,\"childProp\":{\"current\":[\"$Ld\",null],\"segment\":\"__PAGE__?{\\\"slug\\\":[\\\"修复-MacOS-TimeMachine-的同步错误\\\"]}\"},\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/633a9ad1601bb6ee.css\",\"precedence\":\"next\"}]]}],\"segment\":[\"slug\",\"%E4%BF%AE%E5%A4%8D-MacOS-TimeMachine-%E7%9A%84%E5%90%8C%E6%AD%A5%E9%94%99%E8%AF%AF\",\"c\"]},\"styles\":[]}],\"segment\":\"posts\"},\"styles\":[]}]}],[\"$\",\"footer\",null,{\"children\":[\"$\",\"p\",null,{\"className\":\"text-sm text-slate-500 dark:text-slate-400 text-center mb-0 sm:mb-10\",\"children\":[\"Copyrights © \",2024,\" VaalaCat. All Rights Reserved.\"]}]}]]}],[\"$\",\"$La\",null,{}]]}]}]]}],null]}]]\n"])</script><script>self.__next_f.push([1,"e:I{\"id\":\"4083\",\"chunks\":[\"232:static/chunks/ad809e52-8ff9ed3aaf334a74.js\",\"249:static/chunks/7f34000f-53a298e23e93d2d0.js\",\"206:static/chunks/c6f2715a-9295945954d32d44.js\",\"578:static/chunks/578-5ca193d330e7469e.js\",\"11:static/chunks/11-58372cdb3fd1b1af.js\",\"629:static/chunks/629-cdae87bfb6a1efc0.js\",\"227:static/chunks/app/[year]/[mon]/[date]/[name]/page-9f7571f5d99d676e.js\"],\"name\":\"PostContent\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"d:[\"$\",\"article\",null,{\"className\":\"py-6 prose dark:prose-invert\",\"children\":[\"$\",\"$Le\",null,{\"post\":{\"title\":\"修复 MacOS TimeMachine 的同步错误\",\"date\":\"2022-01-23T20:24:11.000Z\",\"body\":{\"raw\":\"\",\"code\":\"var Component=(()=\u003e{var o=Object.create;var r=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,M=Object.prototype.hasOwnProperty;var g=(c,e)=\u003e()=\u003e(e||c((e={exports:{}}).exports,e),e.exports),k=(c,e)=\u003e{for(var i in e)r(c,i,{get:e[i],enumerable:!0})},h=(c,e,i,d)=\u003e{if(e\u0026\u0026typeof e==\\\"object\\\"||typeof e==\\\"function\\\")for(let l of m(e))!M.call(c,l)\u0026\u0026l!==i\u0026\u0026r(c,l,{get:()=\u003ee[l],enumerable:!(d=p(e,l))||d.enumerable});return c};var b=(c,e,i)=\u003e(i=c!=null?o(u(c)):{},h(e||!c||!c.__esModule?r(i,\\\"default\\\",{value:c,enumerable:!0}):i,c)),T=c=\u003eh(r({},\\\"__esModule\\\",{value:!0}),c);var t=g((_,a)=\u003e{a.exports=_jsx_runtime});var N={};k(N,{default:()=\u003ex,frontmatter:()=\u003ef});var n=b(t()),f={title:\\\"\\\\u4FEE\\\\u590D MacOS TimeMachine \\\\u7684\\\\u540C\\\\u6B65\\\\u9519\\\\u8BEF\\\",date:new Date(1642969451e3),tags:[\\\"TimeMachine\\\",\\\"MacOS\\\",\\\"MacBook\\\"],categories:[[\\\"Technique\\\",\\\"Software\\\"]]};function s(c){let e=Object.assign({h2:\\\"h2\\\",p:\\\"p\\\",pre:\\\"pre\\\",code:\\\"code\\\",blockquote:\\\"blockquote\\\",a:\\\"a\\\",ol:\\\"ol\\\",li:\\\"li\\\",span:\\\"span\\\",ul:\\\"ul\\\"},c.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h2,{children:\\\"\\\\u5F15\\\\u8A00\\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\\"\\\\u4F5C\\\\u4E3A\\\\u4E00\\\\u4E2A\\\\u65B0\\\\u7684\\\\u767D\\\\u{1F34E}\\\\u7528\\\\u6237\\\\uFF0C\\\\u5BF9\\\\u4E8E TimeMachine \\\\u5C5E\\\\u4E8E\\\\u53C8\\\\u7231\\\\u53C8\\\\u6068\\\\uFF0C\\\\u5176\\\\u5B98\\\\u65B9\\\\u6307\\\\u5B9A\\\\u7684\\\\u5907\\\\u4EFD\\\\u76EE\\\\u6807 AirPort Time Capsule \\\\u5B9E\\\\u5728\\\\u662F\\\\u8FC7\\\\u4E8E\\\\u9AD8\\\\u8D35\\\\uFF0C\\\\u6240\\\\u4EE5\\\\u6211\\\\u9009\\\\u62E9\\\\u4F7F\\\\u7528\\\\u4E00\\\\u4E2A\\\\u63D0\\\\u4F9B AFP \\\\u670D\\\\u52A1\\\\u7684 NAS \\\\u4F5C\\\\u4E3A\\\\u5907\\\\u4EFD\\\\u76EE\\\\u6807\\\\u78C1\\\\u76D8 \\\\uFF08SMB \\\\u534F\\\\u8BAE\\\\u636E\\\\u8BF4\\\\u4F1A\\\\u51FA\\\\u73B0\\\\u795E\\\\u79D8\\\\u6389\\\\u76D8\\\\u95EE\\\\u9898\\\\uFF09\\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\\"\\\\u5728\\\\u5185\\\\u7F51\\\\u4E2D\\\\u5FEB\\\\u4E50\\\\u7684\\\\u4F7F\\\\u7528\\\\u51E0\\\\u5929\\\\u540E\\\\u51FA\\\\u4E86\\\\u8D9F\\\\u95E8\\\\uFF0C\\\\u60F3\\\\u7740\\\\u4F7F\\\\u7528 Wireguard \\\\u8FDE\\\\u56DE\\\\u5185\\\\u7F51\\\\u8DEF\\\\u7531\\\\u6BB5\\\\u63A5\\\\u7740\\\\u5907\\\\u4EFD\\\\u3002\\\\u7406\\\\u60F3\\\\u975E\\\\u5E38\\\\u7684\\\\u4E30\\\\u6EE1\\\\uFF0C\\\\u5B9E\\\\u8DF5\\\\u5374\\\\u51FA\\\\u4E86\\\\u95EE\\\\u9898\\\\uFF0C\\\\u5728\\\\u67D0\\\\u4E00\\\\u6B21\\\\u5907\\\\u4EFD\\\\u65F6\\\\u610F\\\\u5916\\\\u65AD\\\\u4E86\\\\u7F51\\\\uFF0C\\\\u56DE\\\\u5230\\\\u5185\\\\u7F51\\\\u4E2D\\\\u62A5\\\\u4E86\\\\u5982\\\\u4E0B\\\\u9519\\\\u8BEF\\\"}),`\\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{children:`\\\\u65E0\\\\u6CD5\\\\u8BBF\\\\u95EE\\\\u5907\\\\u4EFD\\\\u78C1\\\\u76D8\\\\u6620\\\\u50CF\\\\u201CVaala\\\\u7684MacBook Pro.sparsebundle\\\\u201D\\\\uFF08\\\\u9519\\\\u8BEF35\\\\uFF09\\\\u3002\\n`})}),`\\n`,(0,n.jsx)(e.p,{children:\\\"\\\\u5728 Apple \\\\u8BBA\\\\u575B\\\\u548C\\\\u4E92\\\\u8054\\\\u7F51\\\\u4E2D\\\\u627E\\\\u5230\\\\u7684\\\\u90FD\\\\u662F\\\\u8BA9\\\\u6211\\\\u6E05\\\\u9664\\\\u5907\\\\u4EFD\\\\u91CD\\\\u6765\\\\uFF0C\\\\u5C31\\\\u50CF\\\\u4E0B\\\\u9762\\\\u8FD9\\\\u6837\\\"}),`\\n`,(0,n.jsxs)(e.blockquote,{children:[`\\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\\\"https://discussionschinese.apple.com/thread/86190\\\",children:\\\"https://discussionschinese.apple.com/thread/86190\\\"})}),`\\n`]}),`\\n`,(0,n.jsx)(e.p,{children:\\\"\\\\u4F46\\\\u5907\\\\u4EFD\\\\u4E0D\\\\u4E45\\\\u662F\\\\u4E3A\\\\u4E86\\\\u9632\\\\u6B62\\\\u51FA\\\\u9519\\\\uFF1F\\\\u518D\\\\u6765\\\\u6E05\\\\u7406\\\\u51FA\\\\u9519\\\\u7684\\\\u5907\\\\u4EFD\\\\u4E5F\\\\u592A\\\\u672C\\\\u672B\\\\u5012\\\\u7F6E\\\\u4E86\\\\uFF0C\\\\u5206\\\\u6790\\\\u95EE\\\\u9898\\\\u53D1\\\\u751F\\\\u7684\\\\u60C5\\\\u51B5\\\\u540E\\\\u6211\\\\u9009\\\\u62E9\\\\u964D\\\\u4F4E\\\\u5907\\\\u4EFD\\\\u9891\\\\u7387\\\\uFF0C\\\\u4F7F\\\\u7528 TimeMachineEditor \\\\u963B\\\\u6B62\\\\u65E5\\\\u95F4\\\\u5907\\\\u4EFD\\\\uFF0C\\\\u5E76\\\\u4E14\\\\u5907\\\\u4EFD\\\\u53EA\\\\u80FD\\\\u5728 Mac \\\\u4E0D\\\\u6D3B\\\\u8DC3\\\\u65F6\\\\u8FDB\\\\u884C\\\\u3002\\\\u4E0D\\\\u51FA\\\\u610F\\\\u5916\\\\uFF0C\\\\u518D\\\\u6B21\\\\u82DF\\\\u6D3B\\\\u51E0\\\\u5929\\\\u540E\\\\u53C8\\\\u51FA\\\\u73B0\\\\u4E86\\\\u76F8\\\\u540C\\\\u9519\\\\u8BEF\\\\uFF0C\\\\u539F\\\\u56E0\\\\u7ADF\\\\u7136\\\\u662F MacOS \\\\u5728\\\\u4F11\\\\u7720\\\\u65F6\\\\u4F1A\\\\u81EA\\\\u52A8\\\\u65AD\\\\u5F00\\\\u7F51\\\\u7EDC\\\\u8FDE\\\\u63A5\\\\u5BFC\\\\u81F4\\\\u5907\\\\u4EFD\\\\u5931\\\\u8D25\\\\u{1F605}\\\\u{1F605}\\\\u{1F605}\\\\u{1F605}\\\\uFF0C\\\\u5728\\\\u7ECF\\\\u8FC7\\\\u4E24\\\\u6B21\\\\u6E05\\\\u7A7A\\\\u5907\\\\u4EFD\\\\u540E\\\\uFF0C\\\\u62BD\\\\u4E86\\\\u4E00\\\\u70B9\\\\u65F6\\\\u95F4\\\\u67E5\\\\u627E\\\\u76F8\\\\u5173\\\\u8D44\\\\u6599\\\\uFF0C\\\\u5F97\\\\u5230\\\\u4E86\\\\u6700\\\\u7EC8\\\\u7684\\\\u89E3\\\\u51B3\\\\u65B9\\\\u6848\\\"}),`\\n`,(0,n.jsx)(e.h2,{children:\\\"\\\\u6B65\\\\u9AA4\\\"}),`\\n`,(0,n.jsxs)(e.ol,{children:[`\\n`,(0,n.jsxs)(e.li,{children:[`\\n`,(0,n.jsx)(e.p,{children:\\\"\\\\u9996\\\\u5148\\\\u5173\\\\u95ED\\\\u6389 TimeMachine \\\\u4E2D\\\\u7684\\\\u81EA\\\\u52A8\\\\u5907\\\\u4EFD\\\\uFF0C\\\\u5176\\\\u5B83\\\\u4E0E TimeMachine \\\\u76F8\\\\u5173\\\\u7684\\\\u7A0B\\\\u5E8F\\\\u4F8B\\\\u5982 TimeMachineEditor \\\\u4E5F\\\\u5C3D\\\\u91CF\\\\u7EC8\\\\u6B62\\\\uFF0C\\\\u5728\\\\u7EC8\\\\u6B62\\\\u540E\\\\u5C3D\\\\u91CF\\\\u91CD\\\\u542F\\\\u4E00\\\\u6B21\\\\u4FDD\\\\u8BC1\\\\u6CA1\\\\u6709\\\\u8FDB\\\\u7A0B\\\\u5360\\\\u7528\\\\u76F8\\\\u5173\\\\u8D44\\\\u6E90\\\\u3002\\\"}),`\\n`]}),`\\n`,(0,n.jsxs)(e.li,{children:[`\\n`,(0,n.jsxs)(e.p,{children:[\\\"\\\\u627E\\\\u5230\\\\u5907\\\\u4EFD\\\\u78C1\\\\u76D8\\\\u4E2D\\\\u7684 \\\",(0,n.jsx)(e.code,{children:\\\"sparsebundle\\\"}),\\\" \\\\u6587\\\\u4EF6\\\\uFF0C\\\\u5C06\\\\u4E0B\\\\u9762\\\\u547D\\\\u4EE4\\\\u7684\\\\u8DEF\\\\u5F84\\\\u66FF\\\\u6362\\\\u6389\\\\u3002\\\"]}),`\\n`]}),`\\n`]}),`\\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\\\"hljs language-bash\\\",children:`hdiutil attach -nomount /path/to/sparsebundleFile\\n`})}),`\\n`,(0,n.jsxs)(e.ol,{start:\\\"3\\\",children:[`\\n`,(0,n.jsxs)(e.li,{children:[\\\"\\\\u5F97\\\\u5230\\\\u5907\\\\u4EFD\\\\u78C1\\\\u76D8\\\\u540D\\\\u79F0\\\\uFF0C\\\\u4F1A\\\\u6709\\\\u5F88\\\\u591A\\\\u4E2A\\\\u78C1\\\\u76D8\\\\uFF0C\\\\u627E\\\\u5230\\\\u683C\\\\u5F0F\\\\u4E3A \\\",(0,n.jsx)(e.code,{children:\\\"/dev/diskNs2\\\"}),\\\" \\\\u7684\\\\u78C1\\\\u76D8\\\\uFF0C\\\",(0,n.jsx)(e.code,{children:\\\"N\\\"}),\\\" \\\\u4E3A\\\\u6570\\\\u5B57\\\\uFF0C\\\",(0,n.jsx)(e.code,{children:\\\"s2\\\"}),\\\" \\\\u4E3A\\\\u7B2C\\\\u4E8C\\\\u5206\\\\u533A\\\\uFF0C\\\\u5907\\\\u6CE8\\\\u4E3A \\\",(0,n.jsx)(e.code,{children:\\\"Apple_APFS\\\"}),\\\"\\\\uFF0C\\\\u6211\\\\u8FD9\\\\u91CC\\\\u662F \\\",(0,n.jsx)(e.code,{children:\\\"/dev/disk4s2\\\"}),\\\"\\\\uFF0C\\\\u63A5\\\\u4E0B\\\\u6765\\\\u5BF9\\\\u8BE5\\\\u5206\\\\u533A\\\\u7684\\\\u5907\\\\u4EFD\\\\u8FDB\\\\u884C\\\\u68C0\\\\u67E5\\\\u3002\\\"]}),`\\n`]}),`\\n`,(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\\\"hljs language-bash\\\",children:[(0,n.jsx)(e.span,{className:\\\"hljs-comment\\\",children:\\\"# \\\\u8981\\\\u6CE8\\\\u610F\\\\u8FD9\\\\u91CC\\\\u7684\\\\u78C1\\\\u76D8\\\\u524D\\\\u9762\\\\u52A0\\\\u4E86\\\\u4E00\\\\u4E2Ar\\\\u4EE3\\\\u8868raw\\\\u539F\\\\u59CB\\\\u4E0D\\\\u7F13\\\\u5B58\\\\u8BBE\\\\u5907\\\"}),`\\nfsck_hfs -p /dev/rdisk4s2 \\n`]})}),`\\n`,(0,n.jsxs)(e.ol,{start:\\\"4\\\",children:[`\\n`,(0,n.jsx)(e.li,{children:\\\"\\\\u5982\\\\u679C\\\\u547D\\\\u4EE4\\\\u51FA\\\\u73B0\\\\u9519\\\\u8BEF\\\\uFF0C\\\\u5C06\\\\u547D\\\\u4EE4\\\\u4E2D\\\\u7684 p \\\\u53C2\\\\u6570\\\\u66FF\\\\u6362\\\\u4E3A f \\\\u518D\\\\u8BD5\\\\u4E00\\\\u6B21\\\\uFF0C\\\\u5982\\\\u679C\\\\u9519\\\\u8BEF\\\\u65E0\\\\u6CD5\\\\u4FEE\\\\u590D\\\\uFF0C\\\\u8FD8\\\\u662F\\\\u8003\\\\u8651\\\\u683C\\\\u5F0F\\\\u5316\\\\u91CD\\\\u6765\\\\u5427\\\"}),`\\n`]}),`\\n`,(0,n.jsxs)(e.blockquote,{children:[`\\n`,(0,n.jsxs)(e.p,{children:[\\\"\\\\u5BF9\\\\u4E8E\\\\u9519\\\\u8BEF\\\\u6211\\\\u4EEC\\\\u53EF\\\\u4EE5\\\\u4F7F\\\\u7528 \\\",(0,n.jsx)(e.code,{children:\\\"diskutil mount diskNs2\\\"}),\\\" \\\\u6302\\\\u8F7D\\\\u955C\\\\u50CF\\\\u5E76\\\\u5728 Finder \\\\u4E2D\\\\u68C0\\\\u67E5\\\\u3002\\\"]}),`\\n`]}),`\\n`,(0,n.jsxs)(e.ol,{start:\\\"5\\\",children:[`\\n`,(0,n.jsx)(e.li,{children:\\\"\\\\u7136\\\\u540E\\\\u6211\\\\u4EEC detatch \\\\u5907\\\\u4EFD\\\\u533A\\\"}),`\\n`]}),`\\n`,(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\\\"hljs language-bash\\\",children:[(0,n.jsx)(e.span,{className:\\\"hljs-comment\\\",children:\\\"# \\\\u8FD9\\\\u91CC\\\\u6CA1\\\\u6709\\\\u6307\\\\u5B9A\\\\u7B2C\\\\u4E8C\\\\u5206\\\\u533A\\\"}),`\\nhdiutil detach diskN\\n`]})}),`\\n`,(0,n.jsxs)(e.ol,{start:\\\"6\\\",children:[`\\n`,(0,n.jsxs)(e.li,{children:[`\\n`,(0,n.jsxs)(e.p,{children:[\\\"\\\\u786E\\\\u5B9A\\\\u6CA1\\\\u6709\\\\u62A5\\\\u9519\\\\u7136\\\\u540E\\\\u5728 Finder \\\\u4E2D\\\\u627E\\\\u5230 \\\",(0,n.jsx)(e.code,{children:\\\"sparsebundle\\\"}),\\\" \\\\u6587\\\\u4EF6\\\\uFF0C\\\\u7136\\\\u540E\\\\u5728\\\\u6587\\\\u4EF6\\\\u4E0A\\\\u53F3\\\\u952E\\\\u5355\\\\u51FB\\\\uFF0C\\\\u70B9\\\\u51FB\\\\u67E5\\\\u770B\\\\u5305\\\\u5185\\\\u5BB9\\\\uFF0C\\\\u627E\\\\u5230\\\\u540D\\\\u4E3A \\\",(0,n.jsx)(e.code,{children:\\\"com.apple.TimeMachine.MachineID.plist\\\"}),\\\" \\\\u7684\\\\u6587\\\\u4EF6\\\\uFF0C\\\\u4F7F\\\\u7528 Xcode \\\\u6253\\\\u5F00\\\\u7F16\\\\u8F91 \\\\uFF08\\\\u4FDD\\\\u8BC1xml\\\\u6587\\\\u4EF6\\\\u683C\\\\u5F0F\\\\u4E0D\\\\u4F1A\\\\u51FA\\\\u9519\\\\uFF09\\\\uFF0C\\\\u627E\\\\u5230 \\\",(0,n.jsx)(e.code,{children:\\\"VerificationState\\\"}),\\\" \\\\u5C06\\\\u503C\\\\u4FEE\\\\u6539\\\\u4E3A 1\\\"]}),`\\n`]}),`\\n`,(0,n.jsxs)(e.li,{children:[`\\n`,(0,n.jsxs)(e.p,{children:[\\\"\\\\u5982\\\\u679C\\\\u5B58\\\\u5728\\\\u952E \\\",(0,n.jsx)(e.code,{children:\\\"RecoveryBackupDeclinedDate\\\"}),\\\" \\\\u5219\\\\u5C06\\\\u5176\\\\u952E\\\\u548C\\\\u503C\\\\u90FD\\\\u5220\\\\u9664\\\"]}),`\\n`]}),`\\n`,(0,n.jsxs)(e.li,{children:[`\\n`,(0,n.jsx)(e.p,{children:\\\"\\\\u4FDD\\\\u5B58\\\\u4FEE\\\\u6539\\\\uFF0C\\\\u5728 TimeMachine \\\\u8BBE\\\\u7F6E\\\\u4E2D\\\\u79FB\\\\u9664\\\\u78C1\\\\u76D8\\\\uFF0C\\\\u7136\\\\u540E\\\\u518D\\\\u5C06\\\\u78C1\\\\u76D8\\\\u52A0\\\\u5165\\\\u5907\\\\u4EFD\\\\u76EE\\\\u6807\\\\uFF0C\\\\u70B9\\\\u51FB\\\\u7ACB\\\\u5373\\\\u5907\\\\u4EFD\\\\u5373\\\\u53EF\\\"}),`\\n`]}),`\\n`]}),`\\n`,(0,n.jsx)(e.h2,{children:\\\"\\\\u53C2\\\\u8003\\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\\"https://apple.stackexchange.com/questions/375894/inheriting-time-machine-backup-invalid-target\\\",children:\\\"Inheriting Time Machine Backup: Invalid Target\\\"})}),`\\n`]}),`\\n`,(0,n.jsxs)(e.blockquote,{children:[`\\n`,(0,n.jsx)(e.p,{children:\\\"MacOS \\\\u786E\\\\u5B9E\\\\u4E0D\\\\u9519\\\\uFF0C\\\\u4E0D\\\\u8FC7\\\\u91CC\\\\u9762\\\\u5403\\\\u4E86\\\\u{1F4A9}\\\\u7684\\\\u8BBE\\\\u5B9A\\\\u80FD\\\\u4E0D\\\\u80FD\\\\u6539\\\\u6539\\\\u554A\\\\u{1F605}\\\"}),`\\n`]})]})}function j(c={}){let{wrapper:e}=c.components||{};return e?(0,n.jsx)(e,Object.assign({},c,{children:(0,n.jsx)(s,c)})):s(c)}var x=j;return T(N);})();\\n;return Component;\"},\"_id\":\"posts/修复-MacOS-TimeMachine-的同步错误.mdx\",\"_raw\":{\"sourceFilePath\":\"posts/修复-MacOS-TimeMachine-的同步错误.mdx\",\"sourceFileName\":\"修复-MacOS-TimeMachine-的同步错误.mdx\",\"sourceFileDir\":\"posts\",\"contentType\":\"mdx\",\"flattenedPath\":\"posts/修复-MacOS-TimeMachine-的同步错误\"},\"type\":\"Post\",\"slug\":\"/posts/修复-MacOS-TimeMachine-的同步错误\",\"slugAsParams\":\"修复-MacOS-TimeMachine-的同步错误\"}}]}]\n"])</script><script>self.__next_f.push([1,"5:[[[\"$\",\"meta\",null,{\"charSet\":\"utf-8\"}],[\"$\",\"title\",null,{\"children\":\"修复 MacOS TimeMachine 的同步错误\"}],null,null,null,null,null,null,null,null,null,[\"$\",\"meta\",null,{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],null,null,null,null,null,null,null,null,null,null,[]],[null,null,null,null],null,null,[null,null,null,null,null],null,null,null,null,[null,[[\"$\",\"link\",null,{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"any\"}]],[],null]]\n"])</script>